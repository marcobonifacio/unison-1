<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">{-| This module provides efficient and streaming left folds that you can combine
    using 'Applicative' style.

    Import this module qualified to avoid clashing with the Prelude:

&gt;&gt;&gt; import qualified Control.Foldl as Foldl

    Use 'fold' to apply a 'Fold' to a list:

&gt;&gt;&gt; Foldl.fold Foldl.sum [1..100]
5050

    'Fold's are 'Applicative's, so you can combine them using 'Applicative'
    combinators:

&gt;&gt;&gt; import Control.Applicative
&gt;&gt;&gt; let average = (/) &lt;$&gt; Foldl.sum &lt;*&gt; Foldl.genericLength

    &#8230; or you can use @do@ notation if you enable the @ApplicativeDo@ language
    extension:

&gt;&gt;&gt; :set -XApplicativeDo
&gt;&gt;&gt; let average = do total &lt;- Foldl.sum; count &lt;- Foldl.genericLength; return (total / count)

    &#8230; or you can use the fact that the `Fold` type implements `Num` to do this:

&gt;&gt;&gt; let average = Foldl.sum / Foldl.genericLength

    These combined folds will still traverse the list only once, streaming
    efficiently over the list in constant space without space leaks:

&gt;&gt;&gt; Foldl.fold average [1..10000000]
5000000.5
&gt;&gt;&gt; Foldl.fold ((,) &lt;$&gt; Foldl.minimum &lt;*&gt; Foldl.maximum) [1..10000000]
(Just 1,Just 10000000)

    You might want to try enabling the @-flate-dmd-anal@ flag when compiling
    executables that use this library to further improve performance.
-}</span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="hs-pragma">{-# LANGUAGE BangPatterns              #-}</span><span>
</span><span id="line-42"></span><span class="hs-pragma">{-# LANGUAGE ExistentialQuantification #-}</span><span>
</span><span id="line-43"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts          #-}</span><span>
</span><span id="line-44"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes                #-}</span><span>
</span><span id="line-45"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables       #-}</span><span>
</span><span id="line-46"></span><span class="hs-pragma">{-# LANGUAGE Trustworthy               #-}</span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Control.Foldl</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-49"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Fold Types</span></span><span>
</span><span id="line-50"></span><span>      </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier">Fold</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier">FoldM</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span>
</span><span id="line-53"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Folding</span></span><span>
</span><span id="line-54"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#fold"><span class="hs-identifier">fold</span></a></span><span>
</span><span id="line-55"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#foldM"><span class="hs-identifier">foldM</span></a></span><span>
</span><span id="line-56"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#scan"><span class="hs-identifier">scan</span></a></span><span>
</span><span id="line-57"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#prescan"><span class="hs-identifier">prescan</span></a></span><span>
</span><span id="line-58"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#postscan"><span class="hs-identifier">postscan</span></a></span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Folds</span></span><span>
</span><span id="line-61"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#mconcat"><span class="hs-identifier">Control.Foldl.mconcat</span></a></span><span>
</span><span id="line-62"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#foldMap"><span class="hs-identifier">Control.Foldl.foldMap</span></a></span><span>
</span><span id="line-63"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#head"><span class="hs-identifier">head</span></a></span><span>
</span><span id="line-64"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#last"><span class="hs-identifier">last</span></a></span><span>
</span><span id="line-65"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#lastDef"><span class="hs-identifier">lastDef</span></a></span><span>
</span><span id="line-66"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#lastN"><span class="hs-identifier">lastN</span></a></span><span>
</span><span id="line-67"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#null"><span class="hs-identifier">null</span></a></span><span>
</span><span id="line-68"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#length"><span class="hs-identifier">length</span></a></span><span>
</span><span id="line-69"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#and"><span class="hs-identifier">and</span></a></span><span>
</span><span id="line-70"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#or"><span class="hs-identifier">or</span></a></span><span>
</span><span id="line-71"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#all"><span class="hs-identifier">all</span></a></span><span>
</span><span id="line-72"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#any"><span class="hs-identifier">any</span></a></span><span>
</span><span id="line-73"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#sum"><span class="hs-identifier">sum</span></a></span><span>
</span><span id="line-74"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#product"><span class="hs-identifier">product</span></a></span><span>
</span><span id="line-75"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#mean"><span class="hs-identifier">mean</span></a></span><span>
</span><span id="line-76"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#variance"><span class="hs-identifier">variance</span></a></span><span>
</span><span id="line-77"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#std"><span class="hs-identifier">std</span></a></span><span>
</span><span id="line-78"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#maximum"><span class="hs-identifier">maximum</span></a></span><span>
</span><span id="line-79"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#maximumBy"><span class="hs-identifier">maximumBy</span></a></span><span>
</span><span id="line-80"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#minimum"><span class="hs-identifier">minimum</span></a></span><span>
</span><span id="line-81"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#minimumBy"><span class="hs-identifier">minimumBy</span></a></span><span>
</span><span id="line-82"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#elem"><span class="hs-identifier">elem</span></a></span><span>
</span><span id="line-83"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#notElem"><span class="hs-identifier">notElem</span></a></span><span>
</span><span id="line-84"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#find"><span class="hs-identifier">find</span></a></span><span>
</span><span id="line-85"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#index"><span class="hs-identifier">index</span></a></span><span>
</span><span id="line-86"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#lookup"><span class="hs-identifier">lookup</span></a></span><span>
</span><span id="line-87"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#elemIndex"><span class="hs-identifier">elemIndex</span></a></span><span>
</span><span id="line-88"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#findIndex"><span class="hs-identifier">findIndex</span></a></span><span>
</span><span id="line-89"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#random"><span class="hs-identifier">random</span></a></span><span>
</span><span id="line-90"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#randomN"><span class="hs-identifier">randomN</span></a></span><span>
</span><span id="line-91"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#mapM_"><span class="hs-identifier">Control.Foldl.mapM_</span></a></span><span>
</span><span id="line-92"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#sink"><span class="hs-identifier">sink</span></a></span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Generic Folds</span></span><span>
</span><span id="line-95"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#genericLength"><span class="hs-identifier">genericLength</span></a></span><span>
</span><span id="line-96"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#genericIndex"><span class="hs-identifier">genericIndex</span></a></span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Container folds</span></span><span>
</span><span id="line-99"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#list"><span class="hs-identifier">list</span></a></span><span>
</span><span id="line-100"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#revList"><span class="hs-identifier">revList</span></a></span><span>
</span><span id="line-101"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#nub"><span class="hs-identifier">nub</span></a></span><span>
</span><span id="line-102"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#eqNub"><span class="hs-identifier">eqNub</span></a></span><span>
</span><span id="line-103"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#set"><span class="hs-identifier">set</span></a></span><span>
</span><span id="line-104"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#hashSet"><span class="hs-identifier">hashSet</span></a></span><span>
</span><span id="line-105"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#map"><span class="hs-identifier">map</span></a></span><span>
</span><span id="line-106"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#foldByKeyMap"><span class="hs-identifier">foldByKeyMap</span></a></span><span>
</span><span id="line-107"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#hashMap"><span class="hs-identifier">hashMap</span></a></span><span>
</span><span id="line-108"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#foldByKeyHashMap"><span class="hs-identifier">foldByKeyHashMap</span></a></span><span>
</span><span id="line-109"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#vector"><span class="hs-identifier">vector</span></a></span><span>
</span><span id="line-110"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#vectorM"><span class="hs-identifier">vectorM</span></a></span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Utilities</span></span><span>
</span><span id="line-113"></span><span>    </span><span class="annot"><span class="hs-comment">-- $utilities</span></span><span>
</span><span id="line-114"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#purely"><span class="hs-identifier">purely</span></a></span><span>
</span><span id="line-115"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#purely_"><span class="hs-identifier">purely_</span></a></span><span>
</span><span id="line-116"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#impurely"><span class="hs-identifier">impurely</span></a></span><span>
</span><span id="line-117"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#impurely_"><span class="hs-identifier">impurely_</span></a></span><span>
</span><span id="line-118"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#generalize"><span class="hs-identifier">generalize</span></a></span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#simplify"><span class="hs-identifier">simplify</span></a></span><span>
</span><span id="line-120"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#hoists"><span class="hs-identifier">hoists</span></a></span><span>
</span><span id="line-121"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#duplicateM"><span class="hs-identifier">duplicateM</span></a></span><span>
</span><span id="line-122"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#_Fold1"><span class="hs-identifier">_Fold1</span></a></span><span>
</span><span id="line-123"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#premap"><span class="hs-identifier">premap</span></a></span><span>
</span><span id="line-124"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#premapM"><span class="hs-identifier">premapM</span></a></span><span>
</span><span id="line-125"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#prefilter"><span class="hs-identifier">prefilter</span></a></span><span>
</span><span id="line-126"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#prefilterM"><span class="hs-identifier">prefilterM</span></a></span><span>
</span><span id="line-127"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#predropWhile"><span class="hs-identifier">predropWhile</span></a></span><span>
</span><span id="line-128"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#drop"><span class="hs-identifier">drop</span></a></span><span>
</span><span id="line-129"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#dropM"><span class="hs-identifier">dropM</span></a></span><span>
</span><span id="line-130"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#Handler"><span class="hs-identifier">Handler</span></a></span><span>
</span><span id="line-131"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#handles"><span class="hs-identifier">handles</span></a></span><span>
</span><span id="line-132"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#foldOver"><span class="hs-identifier">foldOver</span></a></span><span>
</span><span id="line-133"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#EndoM"><span class="hs-identifier">EndoM</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#HandlerM"><span class="hs-identifier">HandlerM</span></a></span><span>
</span><span id="line-135"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#handlesM"><span class="hs-identifier">handlesM</span></a></span><span>
</span><span id="line-136"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#foldOverM"><span class="hs-identifier">foldOverM</span></a></span><span>
</span><span id="line-137"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#folded"><span class="hs-identifier">folded</span></a></span><span>
</span><span id="line-138"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#filtered"><span class="hs-identifier">filtered</span></a></span><span>
</span><span id="line-139"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#groupBy"><span class="hs-identifier">groupBy</span></a></span><span>
</span><span id="line-140"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#either"><span class="hs-identifier">either</span></a></span><span>
</span><span id="line-141"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#eitherM"><span class="hs-identifier">eitherM</span></a></span><span>
</span><span id="line-142"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.html#nest"><span class="hs-identifier">nest</span></a></span><span>
</span><span id="line-143"></span><span>
</span><span id="line-144"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Re-exports</span></span><span>
</span><span id="line-145"></span><span>    </span><span class="annot"><span class="hs-comment">-- $reexports</span></span><span>
</span><span id="line-146"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">module</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Primitive</span></span><span>
</span><span id="line-147"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">module</span><span> </span><span class="annot"><span class="hs-identifier">Data.Foldable</span></span><span>
</span><span id="line-148"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">module</span><span> </span><span class="annot"><span class="hs-identifier">Data.Vector.Generic</span></span><span>
</span><span id="line-149"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Control.Foldl.Optics.html"><span class="hs-identifier">Control.Foldl.Optics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.Optics.html#_Left"><span class="hs-identifier">_Left</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.Optics.html#_Right"><span class="hs-identifier">_Right</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Applicative</span></span><span>
</span><span id="line-153"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Control.Foldl.Internal.html"><span class="hs-identifier">Control.Foldl.Internal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.Internal.html#Maybe%27"><span class="hs-identifier">Maybe'</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.Internal.html#lazy"><span class="hs-identifier">lazy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.Internal.html#Either%27"><span class="hs-identifier">Either'</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier">Pair</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Foldl.Internal.html#hush"><span class="hs-identifier">hush</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-154"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(&lt;=&lt;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Primitive</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">PrimMonad</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">RealWorld</span></span><span class="hs-special">)</span><span>
</span><span id="line-156"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Comonad</span></span><span>
</span><span id="line-157"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Foldable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Foldable</span></span><span class="hs-special">)</span><span>
</span><span id="line-158"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Functor.Identity</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Identity</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">runIdentity</span></span><span class="hs-special">)</span><span>
</span><span id="line-159"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Functor.Contravariant</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Contravariant</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashMap.Strict</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">HashMap</span></span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.Strict</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Map</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">alter</span></span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fromMaybe</span></span><span class="hs-special">)</span><span>
</span><span id="line-163"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Monoid</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(&lt;&gt;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-164"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Semigroupoid</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Semigroupoid</span></span><span class="hs-special">)</span><span>
</span><span id="line-165"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Functor.Extend</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Extend</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-166"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Profunctor</span></span><span>
</span><span id="line-167"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Sequence</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(|&gt;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-168"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Vector.Generic</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Vector</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Mutable</span></span><span class="hs-special">)</span><span>
</span><span id="line-169"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Vector.Generic.Mutable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MVector</span></span><span class="hs-special">)</span><span>
</span><span id="line-170"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Hashable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Hashable</span></span><span class="hs-special">)</span><span>
</span><span id="line-171"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Traversable</span></span><span>
</span><span id="line-172"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Numeric.Natural</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Natural</span></span><span class="hs-special">)</span><span>
</span><span id="line-173"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.Random</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">StdGen</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">newStdGen</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">uniformR</span></span><span class="hs-special">)</span><span>
</span><span id="line-174"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span> </span><span class="hs-keyword">hiding</span><span>
</span><span id="line-175"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">head</span></span><span>
</span><span id="line-176"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">last</span></span><span>
</span><span id="line-177"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">null</span></span><span>
</span><span id="line-178"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">length</span></span><span>
</span><span id="line-179"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">and</span></span><span>
</span><span id="line-180"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">or</span></span><span>
</span><span id="line-181"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">all</span></span><span>
</span><span id="line-182"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">any</span></span><span>
</span><span id="line-183"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">sum</span></span><span>
</span><span id="line-184"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">product</span></span><span>
</span><span id="line-185"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">maximum</span></span><span>
</span><span id="line-186"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">minimum</span></span><span>
</span><span id="line-187"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">elem</span></span><span>
</span><span id="line-188"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">notElem</span></span><span>
</span><span id="line-189"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">lookup</span></span><span>
</span><span id="line-190"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">map</span></span><span>
</span><span id="line-191"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">either</span></span><span>
</span><span id="line-192"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">drop</span></span><span>
</span><span id="line-193"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-194"></span><span>
</span><span id="line-195"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Foldable</span></span><span>               </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">F</span></span><span>
</span><span id="line-196"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span>                   </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">List</span></span><span>
</span><span id="line-197"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Sequence</span></span><span>               </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Seq</span></span><span>
</span><span id="line-198"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span>                    </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-199"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.Strict</span></span><span>             </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-200"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashMap.Strict</span></span><span>         </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">HashMap</span></span><span>
</span><span id="line-201"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashSet</span></span><span>                </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">HashSet</span></span><span>
</span><span id="line-202"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Vector.Generic</span></span><span>         </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">V</span></span><span>
</span><span id="line-203"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Control.Foldl.Util.Vector.html"><span class="hs-identifier">Control.Foldl.Util.Vector</span></a></span><span>   </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">V</span></span><span>
</span><span id="line-204"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Vector.Generic.Mutable</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">M</span></span><span>
</span><span id="line-205"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Semigroupoid</span></span><span>
</span><span id="line-206"></span><span>
</span><span id="line-207"></span><span class="hs-comment">{- $setup

&gt;&gt;&gt; import qualified Control.Foldl as Foldl

&gt;&gt;&gt; _2 f (x, y) = fmap (\i -&gt; (x, i)) (f y)

&gt;&gt;&gt; :{
&gt;&gt;&gt; _Just = let maybeEither Nothing = Left Nothing
&gt;&gt;&gt;             maybeEither (Just x) = Right x
&gt;&gt;&gt;         in Control.Foldl.Optics.prism Just maybeEither
&gt;&gt;&gt; :}

&gt;&gt;&gt; both f (x, y) = (,) &lt;$&gt; f x &lt;*&gt; f y

-}</span><span>
</span><span id="line-222"></span><span>
</span><span id="line-223"></span><span class="hs-comment">{-| Efficient representation of a left fold that preserves the fold's step
    function, initial accumulator, and extraction function

    This allows the 'Applicative' instance to assemble derived folds that
    traverse the container only once

    A \''Fold' a b\' processes elements of type __a__ and results in a
    value of type __b__.
-}</span><span>
</span><span id="line-232"></span><span class="hs-keyword">data</span><span> </span><span id="Fold"><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span></span><span> </span><span id="local-6989586621679085028"><span class="annot"><a href="#local-6989586621679085028"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679085027"><span class="annot"><a href="#local-6989586621679085027"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-233"></span><span>  </span><span class="hs-comment">-- | @Fold @ @ step @ @ initial @ @ extract@</span><span>
</span><span id="line-234"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084116"><span class="annot"><a href="#local-6989586621679084116"><span class="hs-identifier hs-type">x</span></a></span></span><span class="hs-operator">.</span><span> </span><span id="Fold"><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084116"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085028"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084116"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679084116"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084116"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679085027"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-235"></span><span>
</span><span id="line-236"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679084112"><span id="local-6989586621679085033"><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679085033"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-237"></span><span>    </span><span id="local-6989586621679084110"><span class="annot"><span class="annottext">fmap :: forall a b. (a -&gt; b) -&gt; Fold a a -&gt; Fold a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fmap</span></span></span><span> </span><span id="local-6989586621679084109"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679084109"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span id="local-6989586621679084108"><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679084108"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679084107"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679084107"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621679084106"><span class="annot"><span class="annottext">x -&gt; a
</span><a href="#local-6989586621679084106"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679084108"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679084107"><span class="hs-identifier hs-var">begin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679084109"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; a
</span><a href="#local-6989586621679084106"><span class="hs-identifier hs-var">done</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-238"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">fmap</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-239"></span><span>
</span><span id="line-240"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679084097"><span id="local-6989586621679084099"><span id="local-6989586621679084103"><span class="annot"><span class="hs-identifier hs-type">Profunctor</span></span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-241"></span><span>    </span><span id="local-6989586621679084095"><span class="annot"><span class="annottext">lmap :: forall a b c. (a -&gt; b) -&gt; Fold b c -&gt; Fold a c
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">lmap</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b) -&gt; Fold b c -&gt; Fold a c
</span><a href="Control.Foldl.html#premap"><span class="hs-identifier hs-var">premap</span></a></span><span>
</span><span id="line-242"></span><span>    </span><span id="local-6989586621679084092"><span class="annot"><span class="annottext">rmap :: forall b c a. (b -&gt; c) -&gt; Fold a b -&gt; Fold a c
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">rmap</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span>
</span><span id="line-243"></span><span>
</span><span id="line-244"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679084087"><span class="annot"><span class="hs-identifier hs-type">Choice</span></span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-245"></span><span>  </span><span id="local-6989586621679084084"><span class="annot"><span class="annottext">right' :: forall a b c. Fold a b -&gt; Fold (Either c a) (Either c b)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">right'</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span id="local-6989586621679084078"><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679084078"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679084077"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679084077"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621679084076"><span class="annot"><span class="annottext">x -&gt; b
</span><a href="#local-6989586621679084076"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b c.
Applicative f =&gt;
(a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><span class="hs-identifier hs-var">liftA2</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679084078"><span class="hs-identifier hs-var">step</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679084077"><span class="hs-identifier hs-var">begin</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; b
</span><a href="#local-6989586621679084076"><span class="hs-identifier hs-var">done</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-246"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">right'</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-247"></span><span>
</span><span id="line-248"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679084069"><span id="local-6989586621679084979"><span class="annot"><span class="hs-identifier hs-type">Comonad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084979"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-249"></span><span>    </span><span id="local-6989586621679084067"><span class="annot"><span class="annottext">extract :: forall a. Fold a a -&gt; a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">extract</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679084065"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679084065"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621679084064"><span class="annot"><span class="annottext">x -&gt; a
</span><a href="#local-6989586621679084064"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x -&gt; a
</span><a href="#local-6989586621679084064"><span class="hs-identifier hs-var">done</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679084065"><span class="hs-identifier hs-var">begin</span></a></span><span>
</span><span id="line-250"></span><span>    </span><span class="hs-pragma">{-#  INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">extract</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span>    </span><span id="local-6989586621679084063"><span class="annot"><span class="annottext">duplicate :: forall a. Fold a a -&gt; Fold a (Fold a a)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">duplicate</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span id="local-6989586621679084061"><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679084061"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679084060"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679084060"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621679084059"><span class="annot"><span class="annottext">x -&gt; a
</span><a href="#local-6989586621679084059"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679084061"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679084060"><span class="hs-identifier hs-var">begin</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679084058"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679084058"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679084061"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679084058"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; a
</span><a href="#local-6989586621679084059"><span class="hs-identifier hs-var">done</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-253"></span><span>    </span><span class="hs-pragma">{-#  INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">duplicate</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-254"></span><span>
</span><span id="line-255"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679084048"><span id="local-6989586621679084050"><span id="local-6989586621679084052"><span id="local-6989586621679084967"><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084967"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-256"></span><span>    </span><span id="local-6989586621679084046"><span class="annot"><span class="annottext">pure :: forall a. a -&gt; Fold a a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">pure</span></span></span><span> </span><span id="local-6989586621679084045"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679084045"><span class="hs-identifier hs-var">b</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679084045"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-257"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">pure</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-258"></span><span>
</span><span id="line-259"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span id="local-6989586621679084044"><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679084044"><span class="hs-identifier hs-var">stepL</span></a></span></span><span> </span><span id="local-6989586621679084043"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679084043"><span class="hs-identifier hs-var">beginL</span></a></span></span><span> </span><span id="local-6989586621679084042"><span class="annot"><span class="annottext">x -&gt; a -&gt; b
</span><a href="#local-6989586621679084042"><span class="hs-identifier hs-var">doneL</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679084041"><span class="annot"><span class="annottext">&lt;*&gt; :: forall a b. Fold a (a -&gt; b) -&gt; Fold a a -&gt; Fold a b
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;*&gt;</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span id="local-6989586621679084040"><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679084040"><span class="hs-identifier hs-var">stepR</span></a></span></span><span> </span><span id="local-6989586621679084039"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679084039"><span class="hs-identifier hs-var">beginR</span></a></span></span><span> </span><span id="local-6989586621679084038"><span class="annot"><span class="annottext">x -&gt; a
</span><a href="#local-6989586621679084038"><span class="hs-identifier hs-var">doneR</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-260"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679084037"><span class="annot"><span class="annottext">step :: Pair x x -&gt; a -&gt; Pair x x
</span><a href="#local-6989586621679084037"><span class="hs-identifier hs-var hs-var">step</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span id="local-6989586621679084035"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679084035"><span class="hs-identifier hs-var">xL</span></a></span></span><span> </span><span id="local-6989586621679084034"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679084034"><span class="hs-identifier hs-var">xR</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679084033"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679084033"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; Pair a b
</span><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-var">Pair</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679084044"><span class="hs-identifier hs-var">stepL</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679084035"><span class="hs-identifier hs-var">xL</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679084033"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679084040"><span class="hs-identifier hs-var">stepR</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679084034"><span class="hs-identifier hs-var">xR</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679084033"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-261"></span><span>            </span><span id="local-6989586621679084032"><span class="annot"><span class="annottext">begin :: Pair x x
</span><a href="#local-6989586621679084032"><span class="hs-identifier hs-var hs-var">begin</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; Pair a b
</span><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-var">Pair</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679084043"><span class="hs-identifier hs-var">beginL</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679084039"><span class="hs-identifier hs-var">beginR</span></a></span><span>
</span><span id="line-262"></span><span>            </span><span id="local-6989586621679084031"><span class="annot"><span class="annottext">done :: Pair x x -&gt; b
</span><a href="#local-6989586621679084031"><span class="hs-identifier hs-var hs-var">done</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span id="local-6989586621679084030"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679084030"><span class="hs-identifier hs-var">xL</span></a></span></span><span> </span><span id="local-6989586621679084029"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679084029"><span class="hs-identifier hs-var">xR</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; b
</span><a href="#local-6989586621679084042"><span class="hs-identifier hs-var">doneL</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679084030"><span class="hs-identifier hs-var">xL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x -&gt; a
</span><a href="#local-6989586621679084038"><span class="hs-identifier hs-var">doneR</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679084029"><span class="hs-identifier hs-var">xR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-263"></span><span>        </span><span class="hs-keyword">in</span><span>  </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">Pair x x -&gt; a -&gt; Pair x x
</span><a href="#local-6989586621679084037"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">Pair x x
</span><a href="#local-6989586621679084032"><span class="hs-identifier hs-var">begin</span></a></span><span> </span><span class="annot"><span class="annottext">Pair x x -&gt; b
</span><a href="#local-6989586621679084031"><span class="hs-identifier hs-var">done</span></a></span><span>
</span><span id="line-264"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&lt;*&gt;</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-265"></span><span>
</span><span id="line-266"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679084024"><span id="local-6989586621679084954"><span class="annot"><span class="hs-identifier hs-type">Extend</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084954"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-267"></span><span>    </span><span id="local-6989586621679084021"><span class="annot"><span class="annottext">duplicated :: forall a. Fold a a -&gt; Fold a (Fold a a)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">duplicated</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (w :: * -&gt; *) a. Comonad w =&gt; w a -&gt; w (w a)
</span><span class="hs-identifier hs-var">duplicate</span></span><span>
</span><span id="line-268"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">duplicated</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-269"></span><span>
</span><span id="line-270"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679084015"><span id="local-6989586621679084017"><span id="local-6989586621679084950"><span id="local-6989586621679084951"><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="annot"><a href="#local-6989586621679084951"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084950"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084951"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-271"></span><span>    </span><span id="local-6989586621679084011"><span class="annot"><span class="annottext">&lt;&gt; :: Fold a b -&gt; Fold a b -&gt; Fold a b
</span><span class="hs-operator hs-var hs-var hs-var hs-var">(&lt;&gt;)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b c.
Applicative f =&gt;
(a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><span class="hs-identifier hs-var">liftA2</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(&lt;&gt;)</span></span><span>
</span><span id="line-272"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&lt;&gt;</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-273"></span><span>
</span><span id="line-274"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Semigroupoid</span></span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-275"></span><span>    </span><span id="local-6989586621679084007"><span class="annot"><span class="annottext">o :: forall j k1 i. Fold j k1 -&gt; Fold i j -&gt; Fold i k1
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">o</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span id="local-6989586621679084005"><span class="annot"><span class="annottext">x -&gt; j -&gt; x
</span><a href="#local-6989586621679084005"><span class="hs-identifier hs-var">step1</span></a></span></span><span> </span><span id="local-6989586621679084004"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679084004"><span class="hs-identifier hs-var">begin1</span></a></span></span><span> </span><span id="local-6989586621679084003"><span class="annot"><span class="annottext">x -&gt; k1
</span><a href="#local-6989586621679084003"><span class="hs-identifier hs-var">done1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span id="local-6989586621679084002"><span class="annot"><span class="annottext">x -&gt; i -&gt; x
</span><a href="#local-6989586621679084002"><span class="hs-identifier hs-var">step2</span></a></span></span><span> </span><span id="local-6989586621679084001"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679084001"><span class="hs-identifier hs-var">begin2</span></a></span></span><span> </span><span id="local-6989586621679084000"><span class="annot"><span class="annottext">x -&gt; j
</span><a href="#local-6989586621679084000"><span class="hs-identifier hs-var">done2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span>
</span><span id="line-276"></span><span>        </span><span class="annot"><span class="annottext">Pair x x -&gt; i -&gt; Pair x x
</span><a href="#local-6989586621679083999"><span class="hs-identifier hs-var">step</span></a></span><span>
</span><span id="line-277"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; Pair a b
</span><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-var">Pair</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679084004"><span class="hs-identifier hs-var">begin1</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679084001"><span class="hs-identifier hs-var">begin2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-278"></span><span>        </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span id="local-6989586621679083998"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083998"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">x
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">x -&gt; k1
</span><a href="#local-6989586621679084003"><span class="hs-identifier hs-var">done1</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083998"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-279"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-280"></span><span>        </span><span id="local-6989586621679083999"><span class="annot"><span class="annottext">step :: Pair x x -&gt; i -&gt; Pair x x
</span><a href="#local-6989586621679083999"><span class="hs-identifier hs-var hs-var">step</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span id="local-6989586621679083997"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083997"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621679083996"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083996"><span class="hs-identifier hs-var">c2</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679083995"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679083995"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-281"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679083994"><span class="annot"><span class="annottext">c2' :: x
</span><a href="#local-6989586621679083994"><span class="hs-identifier hs-var hs-var">c2'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x -&gt; i -&gt; x
</span><a href="#local-6989586621679084002"><span class="hs-identifier hs-var">step2</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083996"><span class="hs-identifier hs-var">c2</span></a></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679083995"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-282"></span><span>                </span><span id="local-6989586621679083993"><span class="annot"><span class="annottext">c1' :: x
</span><a href="#local-6989586621679083993"><span class="hs-identifier hs-var hs-var">c1'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x -&gt; j -&gt; x
</span><a href="#local-6989586621679084005"><span class="hs-identifier hs-var">step1</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083997"><span class="hs-identifier hs-var">c1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x -&gt; j
</span><a href="#local-6989586621679084000"><span class="hs-identifier hs-var">done2</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083994"><span class="hs-identifier hs-var">c2'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-283"></span><span>            </span><span class="hs-keyword">in</span><span>  </span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; Pair a b
</span><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-var">Pair</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083993"><span class="hs-identifier hs-var">c1'</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083994"><span class="hs-identifier hs-var">c2'</span></a></span><span>
</span><span id="line-284"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">o</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-285"></span><span>
</span><span id="line-286"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083987"><span id="local-6989586621679084936"><span id="local-6989586621679084937"><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679084937"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084936"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084937"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-287"></span><span>    </span><span id="local-6989586621679083983"><span class="annot"><span class="annottext">mempty :: Fold a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-288"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">mempty</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-289"></span><span>
</span><span id="line-290"></span><span>    </span><span id="local-6989586621679083980"><span class="annot"><span class="annottext">mappend :: Fold a b -&gt; Fold a b -&gt; Fold a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">mappend</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b c.
Applicative f =&gt;
(a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><span class="hs-identifier hs-var">liftA2</span></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">mappend</span></span><span>
</span><span id="line-291"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">mappend</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-292"></span><span>
</span><span id="line-293"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679084931"><span id="local-6989586621679084932"><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="annot"><a href="#local-6989586621679084932"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084931"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084932"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-294"></span><span>    </span><span id="local-6989586621679083967"><span class="annot"><span class="annottext">fromInteger :: Integer -&gt; Fold a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fromInteger</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; Integer -&gt; a
</span><span class="hs-identifier hs-var">fromInteger</span></span><span>
</span><span id="line-295"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">fromInteger</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-296"></span><span>
</span><span id="line-297"></span><span>    </span><span id="local-6989586621679083964"><span class="annot"><span class="annottext">negate :: Fold a b -&gt; Fold a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">negate</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">negate</span></span><span>
</span><span id="line-298"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">negate</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-299"></span><span>
</span><span id="line-300"></span><span>    </span><span id="local-6989586621679083961"><span class="annot"><span class="annottext">abs :: Fold a b -&gt; Fold a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">abs</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">abs</span></span><span>
</span><span id="line-301"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">abs</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-302"></span><span>
</span><span id="line-303"></span><span>    </span><span id="local-6989586621679083957"><span class="annot"><span class="annottext">signum :: Fold a b -&gt; Fold a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">signum</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">signum</span></span><span>
</span><span id="line-304"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">signum</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-305"></span><span>
</span><span id="line-306"></span><span>    </span><span id="local-6989586621679083953"><span class="annot"><span class="annottext">+ :: Fold a b -&gt; Fold a b -&gt; Fold a b
</span><span class="hs-operator hs-var hs-var hs-var hs-var">(+)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b c.
Applicative f =&gt;
(a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><span class="hs-identifier hs-var">liftA2</span></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(+)</span></span><span>
</span><span id="line-307"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">+</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span>    </span><span id="local-6989586621679083949"><span class="annot"><span class="annottext">* :: Fold a b -&gt; Fold a b -&gt; Fold a b
</span><span class="hs-operator hs-var hs-var hs-var hs-var">(*)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b c.
Applicative f =&gt;
(a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><span class="hs-identifier hs-var">liftA2</span></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(*)</span></span><span>
</span><span id="line-310"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">*</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span>    </span><span id="local-6989586621679083945"><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="hs-special">)</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b c.
Applicative f =&gt;
(a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><span class="hs-identifier hs-var">liftA2</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="hs-special">)</span><span>
</span><span id="line-313"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">-</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-314"></span><span>
</span><span id="line-315"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679084926"><span id="local-6989586621679084927"><span class="annot"><span class="hs-identifier hs-type">Fractional</span></span><span> </span><span class="annot"><a href="#local-6989586621679084927"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Fractional</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084926"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084927"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-316"></span><span>    </span><span id="local-6989586621679083932"><span class="annot"><span class="annottext">fromRational :: Rational -&gt; Fold a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fromRational</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a. Fractional a =&gt; Rational -&gt; a
</span><span class="hs-identifier hs-var">fromRational</span></span><span>
</span><span id="line-317"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">fromRational</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-318"></span><span>
</span><span id="line-319"></span><span>    </span><span id="local-6989586621679083929"><span class="annot"><span class="annottext">recip :: Fold a b -&gt; Fold a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">recip</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Fractional a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">recip</span></span><span>
</span><span id="line-320"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">recip</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-321"></span><span>
</span><span id="line-322"></span><span>    </span><span id="local-6989586621679083925"><span class="annot"><span class="annottext">/ :: Fold a b -&gt; Fold a b -&gt; Fold a b
</span><span class="hs-operator hs-var hs-var hs-var hs-var">(/)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b c.
Applicative f =&gt;
(a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><span class="hs-identifier hs-var">liftA2</span></span><span> </span><span class="annot"><span class="annottext">forall a. Fractional a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(/)</span></span><span>
</span><span id="line-323"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">/</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-324"></span><span>
</span><span id="line-325"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083896"><span id="local-6989586621679083898"><span id="local-6989586621679083900"><span id="local-6989586621679083902"><span id="local-6989586621679084923"><span id="local-6989586621679084924"><span class="annot"><span class="hs-identifier hs-type">Floating</span></span><span> </span><span class="annot"><a href="#local-6989586621679084924"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Floating</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084923"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084924"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-326"></span><span>    </span><span id="local-6989586621679083892"><span class="annot"><span class="annottext">pi :: Fold a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">pi</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a
</span><span class="hs-identifier hs-var">pi</span></span><span>
</span><span id="line-327"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">pi</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-328"></span><span>
</span><span id="line-329"></span><span>    </span><span id="local-6989586621679083888"><span class="annot"><span class="annottext">exp :: Fold a b -&gt; Fold a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">exp</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">exp</span></span><span>
</span><span id="line-330"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">exp</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-331"></span><span>
</span><span id="line-332"></span><span>    </span><span id="local-6989586621679083884"><span class="annot"><span class="annottext">sqrt :: Fold a b -&gt; Fold a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">sqrt</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">sqrt</span></span><span>
</span><span id="line-333"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">sqrt</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-334"></span><span>
</span><span id="line-335"></span><span>    </span><span id="local-6989586621679083880"><span class="annot"><span class="annottext">log :: Fold a b -&gt; Fold a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">log</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">log</span></span><span>
</span><span id="line-336"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">log</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-337"></span><span>
</span><span id="line-338"></span><span>    </span><span id="local-6989586621679083876"><span class="annot"><span class="annottext">sin :: Fold a b -&gt; Fold a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">sin</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">sin</span></span><span>
</span><span id="line-339"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">sin</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-340"></span><span>
</span><span id="line-341"></span><span>    </span><span id="local-6989586621679083872"><span class="annot"><span class="annottext">tan :: Fold a b -&gt; Fold a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">tan</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">tan</span></span><span>
</span><span id="line-342"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">tan</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-343"></span><span>
</span><span id="line-344"></span><span>    </span><span id="local-6989586621679083868"><span class="annot"><span class="annottext">cos :: Fold a b -&gt; Fold a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">cos</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">cos</span></span><span>
</span><span id="line-345"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">cos</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-346"></span><span>
</span><span id="line-347"></span><span>    </span><span id="local-6989586621679083864"><span class="annot"><span class="annottext">asin :: Fold a b -&gt; Fold a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">asin</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">asin</span></span><span>
</span><span id="line-348"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">asin</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-349"></span><span>
</span><span id="line-350"></span><span>    </span><span id="local-6989586621679083860"><span class="annot"><span class="annottext">atan :: Fold a b -&gt; Fold a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">atan</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">atan</span></span><span>
</span><span id="line-351"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">atan</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-352"></span><span>
</span><span id="line-353"></span><span>    </span><span id="local-6989586621679083856"><span class="annot"><span class="annottext">acos :: Fold a b -&gt; Fold a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">acos</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">acos</span></span><span>
</span><span id="line-354"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">acos</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-355"></span><span>
</span><span id="line-356"></span><span>    </span><span id="local-6989586621679083852"><span class="annot"><span class="annottext">sinh :: Fold a b -&gt; Fold a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">sinh</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">sinh</span></span><span>
</span><span id="line-357"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">sinh</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-358"></span><span>
</span><span id="line-359"></span><span>    </span><span id="local-6989586621679083848"><span class="annot"><span class="annottext">tanh :: Fold a b -&gt; Fold a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">tanh</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">tanh</span></span><span>
</span><span id="line-360"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">tanh</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-361"></span><span>
</span><span id="line-362"></span><span>    </span><span id="local-6989586621679083844"><span class="annot"><span class="annottext">cosh :: Fold a b -&gt; Fold a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">cosh</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">cosh</span></span><span>
</span><span id="line-363"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">cosh</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-364"></span><span>
</span><span id="line-365"></span><span>    </span><span id="local-6989586621679083840"><span class="annot"><span class="annottext">asinh :: Fold a b -&gt; Fold a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">asinh</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">asinh</span></span><span>
</span><span id="line-366"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">asinh</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-367"></span><span>
</span><span id="line-368"></span><span>    </span><span id="local-6989586621679083836"><span class="annot"><span class="annottext">atanh :: Fold a b -&gt; Fold a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">atanh</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">atanh</span></span><span>
</span><span id="line-369"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">atanh</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-370"></span><span>
</span><span id="line-371"></span><span>    </span><span id="local-6989586621679083832"><span class="annot"><span class="annottext">acosh :: Fold a b -&gt; Fold a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">acosh</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">acosh</span></span><span>
</span><span id="line-372"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">acosh</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-373"></span><span>
</span><span id="line-374"></span><span>    </span><span id="local-6989586621679083828"><span class="annot"><span class="annottext">** :: Fold a b -&gt; Fold a b -&gt; Fold a b
</span><span class="hs-operator hs-var hs-var hs-var hs-var">(**)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b c.
Applicative f =&gt;
(a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><span class="hs-identifier hs-var">liftA2</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(**)</span></span><span>
</span><span id="line-375"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">**</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-376"></span><span>
</span><span id="line-377"></span><span>    </span><span id="local-6989586621679083824"><span class="annot"><span class="annottext">logBase :: Fold a b -&gt; Fold a b -&gt; Fold a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">logBase</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b c.
Applicative f =&gt;
(a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><span class="hs-identifier hs-var">liftA2</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">logBase</span></span><span>
</span><span id="line-378"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">logBase</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-379"></span><span>
</span><span id="line-380"></span><span class="hs-comment">{-| Like 'Fold', but monadic.

    A \''FoldM' m a b\' processes elements of type __a__ and
    results in a monadic value of type __m b__.
-}</span><span>
</span><span id="line-385"></span><span class="hs-keyword">data</span><span> </span><span id="FoldM"><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-var">FoldM</span></a></span></span><span> </span><span id="local-6989586621679084915"><span class="annot"><a href="#local-6989586621679084915"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679084916"><span class="annot"><a href="#local-6989586621679084916"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679084914"><span class="annot"><a href="#local-6989586621679084914"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-386"></span><span>  </span><span class="hs-comment">-- | @FoldM @ @ step @ @ initial @ @ extract@</span><span>
</span><span id="line-387"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679083822"><span class="annot"><a href="#local-6989586621679083822"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span id="FoldM"><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-var">FoldM</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679083822"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084916"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084915"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083822"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084915"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083822"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679083822"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084915"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084914"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-388"></span><span>
</span><span id="line-389"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083818"><span id="local-6989586621679084921"><span id="local-6989586621679084922"><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621679084922"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084922"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084921"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-390"></span><span>    </span><span id="local-6989586621679083817"><span class="annot"><span class="annottext">fmap :: forall a b. (a -&gt; b) -&gt; FoldM m a a -&gt; FoldM m a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fmap</span></span></span><span> </span><span id="local-6989586621679083816"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679083816"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span id="local-6989586621679083815"><span class="annot"><span class="annottext">x -&gt; a -&gt; m x
</span><a href="#local-6989586621679083815"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679083814"><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621679083814"><span class="hs-identifier hs-var">start</span></a></span></span><span> </span><span id="local-6989586621679083813"><span class="annot"><span class="annottext">x -&gt; m a
</span><a href="#local-6989586621679083813"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b x.
(x -&gt; a -&gt; m x) -&gt; m x -&gt; (x -&gt; m b) -&gt; FoldM m a b
</span><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-var">FoldM</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; m x
</span><a href="#local-6989586621679083815"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621679083814"><span class="hs-identifier hs-var">start</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; m b
</span><a href="#local-6989586621679083812"><span class="hs-identifier hs-var">done'</span></a></span><span>
</span><span id="line-391"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-392"></span><span>        </span><span id="local-6989586621679083812"><span class="annot"><span class="annottext">done' :: x -&gt; m b
</span><a href="#local-6989586621679083812"><span class="hs-identifier hs-var hs-var">done'</span></a></span></span><span> </span><span id="local-6989586621679083810"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083810"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679083816"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; m a
</span><a href="#local-6989586621679083813"><span class="hs-identifier hs-var">done</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083810"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-393"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">fmap</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-394"></span><span>
</span><span id="line-395"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083799"><span id="local-6989586621679083801"><span id="local-6989586621679083803"><span id="local-6989586621679084909"><span id="local-6989586621679084910"><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679084910"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084910"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084909"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-396"></span><span>    </span><span id="local-6989586621679083795"><span class="annot"><span class="annottext">pure :: forall a. a -&gt; FoldM m a a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">pure</span></span></span><span> </span><span id="local-6989586621679083794"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083794"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b x.
(x -&gt; a -&gt; m x) -&gt; m x -&gt; (x -&gt; m b) -&gt; FoldM m a b
</span><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-var">FoldM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083794"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-397"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">pure</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-398"></span><span>
</span><span id="line-399"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span id="local-6989586621679083793"><span class="annot"><span class="annottext">x -&gt; a -&gt; m x
</span><a href="#local-6989586621679083793"><span class="hs-identifier hs-var">stepL</span></a></span></span><span> </span><span id="local-6989586621679083792"><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621679083792"><span class="hs-identifier hs-var">beginL</span></a></span></span><span> </span><span id="local-6989586621679083791"><span class="annot"><span class="annottext">x -&gt; m (a -&gt; b)
</span><a href="#local-6989586621679083791"><span class="hs-identifier hs-var">doneL</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679083790"><span class="annot"><span class="annottext">&lt;*&gt; :: forall a b. FoldM m a (a -&gt; b) -&gt; FoldM m a a -&gt; FoldM m a b
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;*&gt;</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span id="local-6989586621679083789"><span class="annot"><span class="annottext">x -&gt; a -&gt; m x
</span><a href="#local-6989586621679083789"><span class="hs-identifier hs-var">stepR</span></a></span></span><span> </span><span id="local-6989586621679083788"><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621679083788"><span class="hs-identifier hs-var">beginR</span></a></span></span><span> </span><span id="local-6989586621679083787"><span class="annot"><span class="annottext">x -&gt; m a
</span><a href="#local-6989586621679083787"><span class="hs-identifier hs-var">doneR</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-400"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679083784"><span class="annot"><span class="annottext">step :: Pair x x -&gt; a -&gt; m (Pair x x)
</span><a href="#local-6989586621679083784"><span class="hs-identifier hs-var hs-var">step</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span id="local-6989586621679083783"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083783"><span class="hs-identifier hs-var">xL</span></a></span></span><span> </span><span id="local-6989586621679083782"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083782"><span class="hs-identifier hs-var">xR</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679083781"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083781"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; Pair a b
</span><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-var">Pair</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; m x
</span><a href="#local-6989586621679083793"><span class="hs-identifier hs-var">stepL</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083783"><span class="hs-identifier hs-var">xL</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083781"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; m x
</span><a href="#local-6989586621679083789"><span class="hs-identifier hs-var">stepR</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083782"><span class="hs-identifier hs-var">xR</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083781"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-401"></span><span>            </span><span id="local-6989586621679083777"><span class="annot"><span class="annottext">begin :: m (Pair x x)
</span><a href="#local-6989586621679083777"><span class="hs-identifier hs-var hs-var">begin</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; Pair a b
</span><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-var">Pair</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621679083792"><span class="hs-identifier hs-var">beginL</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621679083788"><span class="hs-identifier hs-var">beginR</span></a></span><span>
</span><span id="line-402"></span><span>            </span><span id="local-6989586621679083775"><span class="annot"><span class="annottext">done :: Pair x x -&gt; m b
</span><a href="#local-6989586621679083775"><span class="hs-identifier hs-var hs-var">done</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span id="local-6989586621679083774"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083774"><span class="hs-identifier hs-var">xL</span></a></span></span><span> </span><span id="local-6989586621679083773"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083773"><span class="hs-identifier hs-var">xR</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x -&gt; m (a -&gt; b)
</span><a href="#local-6989586621679083791"><span class="hs-identifier hs-var">doneL</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083774"><span class="hs-identifier hs-var">xL</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; m a
</span><a href="#local-6989586621679083787"><span class="hs-identifier hs-var">doneR</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083773"><span class="hs-identifier hs-var">xR</span></a></span><span>
</span><span id="line-403"></span><span>        </span><span class="hs-keyword">in</span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b x.
(x -&gt; a -&gt; m x) -&gt; m x -&gt; (x -&gt; m b) -&gt; FoldM m a b
</span><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-var">FoldM</span></a></span><span> </span><span class="annot"><span class="annottext">Pair x x -&gt; a -&gt; m (Pair x x)
</span><a href="#local-6989586621679083784"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">m (Pair x x)
</span><a href="#local-6989586621679083777"><span class="hs-identifier hs-var">begin</span></a></span><span> </span><span class="annot"><span class="annottext">Pair x x -&gt; m b
</span><a href="#local-6989586621679083775"><span class="hs-identifier hs-var">done</span></a></span><span>
</span><span id="line-404"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&lt;*&gt;</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-405"></span><span>
</span><span id="line-406"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083768"><span id="local-6989586621679084898"><span id="local-6989586621679084899"><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679084899"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Extend</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084899"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084898"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-407"></span><span>    </span><span id="local-6989586621679083766"><span class="annot"><span class="annottext">duplicated :: forall a. FoldM m a a -&gt; FoldM m a (FoldM m a a)
</span><a href="#local-6989586621679083766"><span class="hs-identifier hs-var hs-var hs-var hs-var">duplicated</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b.
Applicative m =&gt;
FoldM m a b -&gt; FoldM m a (FoldM m a b)
</span><a href="Control.Foldl.html#duplicateM"><span class="hs-identifier hs-var">duplicateM</span></a></span><span>
</span><span id="line-408"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">duplicated</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-409"></span><span>
</span><span id="line-410"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083758"><span id="local-6989586621679083760"><span id="local-6989586621679083764"><span id="local-6989586621679084894"><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621679084894"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Profunctor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084894"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-411"></span><span>    </span><span id="local-6989586621679083756"><span class="annot"><span class="annottext">rmap :: forall b c a. (b -&gt; c) -&gt; FoldM m a b -&gt; FoldM m a c
</span><a href="#local-6989586621679083756"><span class="hs-identifier hs-var hs-var hs-var hs-var">rmap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span>
</span><span id="line-412"></span><span>    </span><span id="local-6989586621679083755"><span class="annot"><span class="annottext">lmap :: forall a b c. (a -&gt; b) -&gt; FoldM m b c -&gt; FoldM m a c
</span><a href="#local-6989586621679083755"><span class="hs-identifier hs-var hs-var hs-var hs-var">lmap</span></a></span></span><span> </span><span id="local-6989586621679083754"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679083754"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span id="local-6989586621679083753"><span class="annot"><span class="annottext">x -&gt; b -&gt; m x
</span><a href="#local-6989586621679083753"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679083752"><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621679083752"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621679083751"><span class="annot"><span class="annottext">x -&gt; m c
</span><a href="#local-6989586621679083751"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b x.
(x -&gt; a -&gt; m x) -&gt; m x -&gt; (x -&gt; m b) -&gt; FoldM m a b
</span><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-var">FoldM</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; m x
</span><a href="#local-6989586621679083750"><span class="hs-identifier hs-var">step'</span></a></span><span> </span><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621679083752"><span class="hs-identifier hs-var">begin</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; m c
</span><a href="#local-6989586621679083751"><span class="hs-identifier hs-var">done</span></a></span><span>
</span><span id="line-413"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-414"></span><span>        </span><span id="local-6989586621679083750"><span class="annot"><span class="annottext">step' :: x -&gt; a -&gt; m x
</span><a href="#local-6989586621679083750"><span class="hs-identifier hs-var hs-var">step'</span></a></span></span><span> </span><span id="local-6989586621679083749"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083749"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679083748"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083748"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x -&gt; b -&gt; m x
</span><a href="#local-6989586621679083753"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083749"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679083754"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083748"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-415"></span><span>
</span><span id="line-416"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083743"><span id="local-6989586621679083745"><span id="local-6989586621679084886"><span id="local-6989586621679084887"><span id="local-6989586621679084888"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="annot"><a href="#local-6989586621679084888"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679084887"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084887"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084886"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084888"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-417"></span><span>    </span><span id="local-6989586621679083740"><span class="annot"><span class="annottext">&lt;&gt; :: FoldM m a b -&gt; FoldM m a b -&gt; FoldM m a b
</span><span class="hs-operator hs-var hs-var hs-var hs-var">(&lt;&gt;)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b c.
Applicative f =&gt;
(a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><span class="hs-identifier hs-var">liftA2</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(&lt;&gt;)</span></span><span>
</span><span id="line-418"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&lt;&gt;</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-419"></span><span>
</span><span id="line-420"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083734"><span id="local-6989586621679084883"><span id="local-6989586621679084884"><span id="local-6989586621679084885"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679084885"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679084884"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084884"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084883"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084885"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-421"></span><span>    </span><span id="local-6989586621679083731"><span class="annot"><span class="annottext">mempty :: FoldM m a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-422"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">mempty</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-423"></span><span>
</span><span id="line-424"></span><span>    </span><span id="local-6989586621679083728"><span class="annot"><span class="annottext">mappend :: FoldM m a b -&gt; FoldM m a b -&gt; FoldM m a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">mappend</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b c.
Applicative f =&gt;
(a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><span class="hs-identifier hs-var">liftA2</span></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">mappend</span></span><span>
</span><span id="line-425"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">mappend</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-426"></span><span>
</span><span id="line-427"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679084877"><span id="local-6989586621679084878"><span id="local-6989586621679084879"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679084879"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="annot"><a href="#local-6989586621679084878"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084879"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084877"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084878"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-428"></span><span>    </span><span id="local-6989586621679083713"><span class="annot"><span class="annottext">fromInteger :: Integer -&gt; FoldM m a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fromInteger</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; Integer -&gt; a
</span><span class="hs-identifier hs-var">fromInteger</span></span><span>
</span><span id="line-429"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">fromInteger</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-430"></span><span>
</span><span id="line-431"></span><span>    </span><span id="local-6989586621679083710"><span class="annot"><span class="annottext">negate :: FoldM m a b -&gt; FoldM m a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">negate</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">negate</span></span><span>
</span><span id="line-432"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">negate</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-433"></span><span>
</span><span id="line-434"></span><span>    </span><span id="local-6989586621679083707"><span class="annot"><span class="annottext">abs :: FoldM m a b -&gt; FoldM m a b
</span><a href="#local-6989586621679083707"><span class="hs-identifier hs-var hs-var hs-var hs-var">abs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">abs</span></span><span>
</span><span id="line-435"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">abs</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-436"></span><span>
</span><span id="line-437"></span><span>    </span><span id="local-6989586621679083704"><span class="annot"><span class="annottext">signum :: FoldM m a b -&gt; FoldM m a b
</span><a href="#local-6989586621679083704"><span class="hs-identifier hs-var hs-var hs-var hs-var">signum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">signum</span></span><span>
</span><span id="line-438"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">signum</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-439"></span><span>
</span><span id="line-440"></span><span>    </span><span id="local-6989586621679083701"><span class="annot"><span class="annottext">+ :: FoldM m a b -&gt; FoldM m a b -&gt; FoldM m a b
</span><a href="#local-6989586621679083701"><span class="hs-operator hs-var hs-var hs-var hs-var">(+)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b c.
Applicative f =&gt;
(a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><span class="hs-identifier hs-var">liftA2</span></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(+)</span></span><span>
</span><span id="line-441"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">+</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-442"></span><span>
</span><span id="line-443"></span><span>    </span><span id="local-6989586621679083698"><span class="annot"><span class="annottext">* :: FoldM m a b -&gt; FoldM m a b -&gt; FoldM m a b
</span><a href="#local-6989586621679083698"><span class="hs-operator hs-var hs-var hs-var hs-var">(*)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b c.
Applicative f =&gt;
(a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><span class="hs-identifier hs-var">liftA2</span></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(*)</span></span><span>
</span><span id="line-444"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">*</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-445"></span><span>
</span><span id="line-446"></span><span>    </span><span id="local-6989586621679083695"><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="hs-special">)</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b c.
Applicative f =&gt;
(a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><span class="hs-identifier hs-var">liftA2</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="hs-special">)</span><span>
</span><span id="line-447"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">-</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-448"></span><span>
</span><span id="line-449"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679084871"><span id="local-6989586621679084872"><span id="local-6989586621679084873"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679084873"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Fractional</span></span><span> </span><span class="annot"><a href="#local-6989586621679084872"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Fractional</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084873"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084871"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084872"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-450"></span><span>    </span><span id="local-6989586621679083681"><span class="annot"><span class="annottext">fromRational :: Rational -&gt; FoldM m a b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fromRational</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a. Fractional a =&gt; Rational -&gt; a
</span><span class="hs-identifier hs-var">fromRational</span></span><span>
</span><span id="line-451"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">fromRational</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-452"></span><span>
</span><span id="line-453"></span><span>    </span><span id="local-6989586621679083678"><span class="annot"><span class="annottext">recip :: FoldM m a b -&gt; FoldM m a b
</span><a href="#local-6989586621679083678"><span class="hs-identifier hs-var hs-var hs-var hs-var">recip</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Fractional a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">recip</span></span><span>
</span><span id="line-454"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">recip</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-455"></span><span>
</span><span id="line-456"></span><span>    </span><span id="local-6989586621679083675"><span class="annot"><span class="annottext">/ :: FoldM m a b -&gt; FoldM m a b -&gt; FoldM m a b
</span><a href="#local-6989586621679083675"><span class="hs-operator hs-var hs-var hs-var hs-var">(/)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b c.
Applicative f =&gt;
(a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><span class="hs-identifier hs-var">liftA2</span></span><span> </span><span class="annot"><span class="annottext">forall a. Fractional a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(/)</span></span><span>
</span><span id="line-457"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">/</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-458"></span><span>
</span><span id="line-459"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679083647"><span id="local-6989586621679083649"><span id="local-6989586621679083651"><span id="local-6989586621679083653"><span id="local-6989586621679084868"><span id="local-6989586621679084869"><span id="local-6989586621679084870"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679084870"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Floating</span></span><span> </span><span class="annot"><a href="#local-6989586621679084869"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Floating</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084870"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084868"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084869"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-460"></span><span>    </span><span id="local-6989586621679083644"><span class="annot"><span class="annottext">pi :: FoldM m a b
</span><a href="#local-6989586621679083644"><span class="hs-identifier hs-var hs-var hs-var hs-var">pi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a
</span><span class="hs-identifier hs-var">pi</span></span><span>
</span><span id="line-461"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">pi</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-462"></span><span>
</span><span id="line-463"></span><span>    </span><span id="local-6989586621679083641"><span class="annot"><span class="annottext">exp :: FoldM m a b -&gt; FoldM m a b
</span><a href="#local-6989586621679083641"><span class="hs-identifier hs-var hs-var hs-var hs-var">exp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">exp</span></span><span>
</span><span id="line-464"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">exp</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-465"></span><span>
</span><span id="line-466"></span><span>    </span><span id="local-6989586621679083638"><span class="annot"><span class="annottext">sqrt :: FoldM m a b -&gt; FoldM m a b
</span><a href="#local-6989586621679083638"><span class="hs-identifier hs-var hs-var hs-var hs-var">sqrt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">sqrt</span></span><span>
</span><span id="line-467"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">sqrt</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-468"></span><span>
</span><span id="line-469"></span><span>    </span><span id="local-6989586621679083635"><span class="annot"><span class="annottext">log :: FoldM m a b -&gt; FoldM m a b
</span><a href="#local-6989586621679083635"><span class="hs-identifier hs-var hs-var hs-var hs-var">log</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">log</span></span><span>
</span><span id="line-470"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">log</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-471"></span><span>
</span><span id="line-472"></span><span>    </span><span id="local-6989586621679083632"><span class="annot"><span class="annottext">sin :: FoldM m a b -&gt; FoldM m a b
</span><a href="#local-6989586621679083632"><span class="hs-identifier hs-var hs-var hs-var hs-var">sin</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">sin</span></span><span>
</span><span id="line-473"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">sin</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-474"></span><span>
</span><span id="line-475"></span><span>    </span><span id="local-6989586621679083629"><span class="annot"><span class="annottext">tan :: FoldM m a b -&gt; FoldM m a b
</span><a href="#local-6989586621679083629"><span class="hs-identifier hs-var hs-var hs-var hs-var">tan</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">tan</span></span><span>
</span><span id="line-476"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">tan</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-477"></span><span>
</span><span id="line-478"></span><span>    </span><span id="local-6989586621679083626"><span class="annot"><span class="annottext">cos :: FoldM m a b -&gt; FoldM m a b
</span><a href="#local-6989586621679083626"><span class="hs-identifier hs-var hs-var hs-var hs-var">cos</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">cos</span></span><span>
</span><span id="line-479"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">cos</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-480"></span><span>
</span><span id="line-481"></span><span>    </span><span id="local-6989586621679083623"><span class="annot"><span class="annottext">asin :: FoldM m a b -&gt; FoldM m a b
</span><a href="#local-6989586621679083623"><span class="hs-identifier hs-var hs-var hs-var hs-var">asin</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">asin</span></span><span>
</span><span id="line-482"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">asin</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-483"></span><span>
</span><span id="line-484"></span><span>    </span><span id="local-6989586621679083620"><span class="annot"><span class="annottext">atan :: FoldM m a b -&gt; FoldM m a b
</span><a href="#local-6989586621679083620"><span class="hs-identifier hs-var hs-var hs-var hs-var">atan</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">atan</span></span><span>
</span><span id="line-485"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">atan</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-486"></span><span>
</span><span id="line-487"></span><span>    </span><span id="local-6989586621679083617"><span class="annot"><span class="annottext">acos :: FoldM m a b -&gt; FoldM m a b
</span><a href="#local-6989586621679083617"><span class="hs-identifier hs-var hs-var hs-var hs-var">acos</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">acos</span></span><span>
</span><span id="line-488"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">acos</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-489"></span><span>
</span><span id="line-490"></span><span>    </span><span id="local-6989586621679083614"><span class="annot"><span class="annottext">sinh :: FoldM m a b -&gt; FoldM m a b
</span><a href="#local-6989586621679083614"><span class="hs-identifier hs-var hs-var hs-var hs-var">sinh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">sinh</span></span><span>
</span><span id="line-491"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">sinh</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-492"></span><span>
</span><span id="line-493"></span><span>    </span><span id="local-6989586621679083611"><span class="annot"><span class="annottext">tanh :: FoldM m a b -&gt; FoldM m a b
</span><a href="#local-6989586621679083611"><span class="hs-identifier hs-var hs-var hs-var hs-var">tanh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">tanh</span></span><span>
</span><span id="line-494"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">tanh</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-495"></span><span>
</span><span id="line-496"></span><span>    </span><span id="local-6989586621679083608"><span class="annot"><span class="annottext">cosh :: FoldM m a b -&gt; FoldM m a b
</span><a href="#local-6989586621679083608"><span class="hs-identifier hs-var hs-var hs-var hs-var">cosh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">cosh</span></span><span>
</span><span id="line-497"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">cosh</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-498"></span><span>
</span><span id="line-499"></span><span>    </span><span id="local-6989586621679083605"><span class="annot"><span class="annottext">asinh :: FoldM m a b -&gt; FoldM m a b
</span><a href="#local-6989586621679083605"><span class="hs-identifier hs-var hs-var hs-var hs-var">asinh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">asinh</span></span><span>
</span><span id="line-500"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">asinh</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-501"></span><span>
</span><span id="line-502"></span><span>    </span><span id="local-6989586621679083602"><span class="annot"><span class="annottext">atanh :: FoldM m a b -&gt; FoldM m a b
</span><a href="#local-6989586621679083602"><span class="hs-identifier hs-var hs-var hs-var hs-var">atanh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">atanh</span></span><span>
</span><span id="line-503"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">atanh</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-504"></span><span>
</span><span id="line-505"></span><span>    </span><span id="local-6989586621679083599"><span class="annot"><span class="annottext">acosh :: FoldM m a b -&gt; FoldM m a b
</span><a href="#local-6989586621679083599"><span class="hs-identifier hs-var hs-var hs-var hs-var">acosh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">acosh</span></span><span>
</span><span id="line-506"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">acosh</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-507"></span><span>
</span><span id="line-508"></span><span>    </span><span id="local-6989586621679083596"><span class="annot"><span class="annottext">** :: FoldM m a b -&gt; FoldM m a b -&gt; FoldM m a b
</span><a href="#local-6989586621679083596"><span class="hs-operator hs-var hs-var hs-var hs-var">(**)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b c.
Applicative f =&gt;
(a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><span class="hs-identifier hs-var">liftA2</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(**)</span></span><span>
</span><span id="line-509"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">**</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-510"></span><span>
</span><span id="line-511"></span><span>    </span><span id="local-6989586621679083593"><span class="annot"><span class="annottext">logBase :: FoldM m a b -&gt; FoldM m a b -&gt; FoldM m a b
</span><a href="#local-6989586621679083593"><span class="hs-identifier hs-var hs-var hs-var hs-var">logBase</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b c.
Applicative f =&gt;
(a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><span class="hs-identifier hs-var">liftA2</span></span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">logBase</span></span><span>
</span><span id="line-512"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">logBase</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-513"></span><span>
</span><span id="line-514"></span><span class="hs-comment">-- | Apply a strict left 'Fold' to a 'Foldable' container</span><span>
</span><span id="line-515"></span><span id="local-6989586621679084865"><span id="local-6989586621679084866"><span id="local-6989586621679084867"><span class="annot"><a href="Control.Foldl.html#fold"><span class="hs-identifier hs-type">fold</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Foldable</span></span><span> </span><span class="annot"><a href="#local-6989586621679084867"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084866"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084865"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084867"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084866"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084865"><span class="hs-identifier hs-type">b</span></a></span></span></span></span><span>
</span><span id="line-516"></span><span id="fold"><span class="annot"><span class="annottext">fold :: forall (f :: * -&gt; *) a b. Foldable f =&gt; Fold a b -&gt; f a -&gt; b
</span><a href="Control.Foldl.html#fold"><span class="hs-identifier hs-var hs-var">fold</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span id="local-6989586621679083590"><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679083590"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679083589"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083589"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621679083588"><span class="annot"><span class="annottext">x -&gt; b
</span><a href="#local-6989586621679083588"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679083587"><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679083587"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">F.foldr</span></span><span> </span><span class="annot"><span class="annottext">forall {b}. a -&gt; (x -&gt; b) -&gt; x -&gt; b
</span><a href="#local-6989586621679083585"><span class="hs-identifier hs-var">cons</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; b
</span><a href="#local-6989586621679083588"><span class="hs-identifier hs-var">done</span></a></span><span> </span><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679083587"><span class="hs-keyword hs-var">as</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083589"><span class="hs-identifier hs-var">begin</span></a></span><span>
</span><span id="line-517"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-518"></span><span>    </span><span id="local-6989586621679083585"><span class="annot"><span class="annottext">cons :: a -&gt; (x -&gt; b) -&gt; x -&gt; b
</span><a href="#local-6989586621679083585"><span class="hs-identifier hs-var hs-var">cons</span></a></span></span><span> </span><span id="local-6989586621679083584"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083584"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679083583"><span class="annot"><span class="annottext">x -&gt; b
</span><a href="#local-6989586621679083583"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679083582"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083582"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x -&gt; b
</span><a href="#local-6989586621679083583"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679083590"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083582"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083584"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-519"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Control.Foldl.html#fold"><span class="hs-pragma hs-type">fold</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-520"></span><span>
</span><span id="line-521"></span><span class="hs-comment">-- | Like 'fold', but monadic</span><span>
</span><span id="line-522"></span><span id="local-6989586621679084853"><span id="local-6989586621679084854"><span id="local-6989586621679084855"><span id="local-6989586621679084856"><span class="annot"><a href="Control.Foldl.html#foldM"><span class="hs-identifier hs-type">foldM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Foldable</span></span><span> </span><span class="annot"><a href="#local-6989586621679084856"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679084855"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084855"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084854"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084853"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084856"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084854"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084855"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084853"><span class="hs-identifier hs-type">b</span></a></span></span></span></span></span><span>
</span><span id="line-523"></span><span id="foldM"><span class="annot"><span class="annottext">foldM :: forall (f :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable f, Monad m) =&gt;
FoldM m a b -&gt; f a -&gt; m b
</span><a href="Control.Foldl.html#foldM"><span class="hs-identifier hs-var hs-var">foldM</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span id="local-6989586621679083577"><span class="annot"><span class="annottext">x -&gt; a -&gt; m x
</span><a href="#local-6989586621679083577"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679083576"><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621679083576"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621679083575"><span class="annot"><span class="annottext">x -&gt; m b
</span><a href="#local-6989586621679083575"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679083574"><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679083574"><span class="hs-identifier hs-var">as0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-524"></span><span>    </span><span id="local-6989586621679083573"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083573"><span class="hs-identifier hs-var">x0</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621679083576"><span class="hs-identifier hs-var">begin</span></a></span><span>
</span><span id="line-525"></span><span>    </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">F.foldr</span></span><span> </span><span class="annot"><span class="annottext">forall {b}. a -&gt; (x -&gt; m b) -&gt; x -&gt; m b
</span><a href="#local-6989586621679083572"><span class="hs-identifier hs-var">step'</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; m b
</span><a href="#local-6989586621679083575"><span class="hs-identifier hs-var">done</span></a></span><span> </span><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679083574"><span class="hs-identifier hs-var">as0</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083573"><span class="hs-identifier hs-var">x0</span></a></span><span>
</span><span id="line-526"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-527"></span><span>    </span><span id="local-6989586621679083572"><span class="annot"><span class="annottext">step' :: a -&gt; (x -&gt; m b) -&gt; x -&gt; m b
</span><a href="#local-6989586621679083572"><span class="hs-identifier hs-var hs-var">step'</span></a></span></span><span> </span><span id="local-6989586621679083570"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083570"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679083569"><span class="annot"><span class="annottext">x -&gt; m b
</span><a href="#local-6989586621679083569"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679083568"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083568"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-528"></span><span>        </span><span id="local-6989586621679083567"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083567"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; m x
</span><a href="#local-6989586621679083577"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083568"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083570"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-529"></span><span>        </span><span class="annot"><span class="annottext">x -&gt; m b
</span><a href="#local-6989586621679083569"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083567"><span class="hs-identifier hs-var">x'</span></a></span><span>
</span><span id="line-530"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Control.Foldl.html#foldM"><span class="hs-pragma hs-type">foldM</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-531"></span><span>
</span><span id="line-532"></span><span class="hs-comment">{-| Convert a strict left 'Fold' into a scan

    &gt;&gt;&gt; Foldl.scan Foldl.length [1..5]
    [0,1,2,3,4,5]
-}</span><span>
</span><span id="line-537"></span><span id="local-6989586621679084845"><span id="local-6989586621679084846"><span class="annot"><a href="Control.Foldl.html#scan"><span class="hs-identifier hs-type">scan</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084846"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084845"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679084846"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679084845"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-538"></span><span id="scan"><span class="annot"><span class="annottext">scan :: forall a b. Fold a b -&gt; [a] -&gt; [b]
</span><a href="Control.Foldl.html#scan"><span class="hs-identifier hs-var hs-var">scan</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span id="local-6989586621679083564"><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679083564"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679083563"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083563"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621679083562"><span class="annot"><span class="annottext">x -&gt; b
</span><a href="#local-6989586621679083562"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679083561"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679083561"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; (x -&gt; [b]) -&gt; x -&gt; [b]
</span><a href="#local-6989586621679083560"><span class="hs-identifier hs-var">cons</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; [b]
</span><a href="#local-6989586621679083559"><span class="hs-identifier hs-var">nil</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679083561"><span class="hs-keyword hs-var">as</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083563"><span class="hs-identifier hs-var">begin</span></a></span><span>
</span><span id="line-539"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-540"></span><span>    </span><span id="local-6989586621679083559"><span class="annot"><span class="annottext">nil :: x -&gt; [b]
</span><a href="#local-6989586621679083559"><span class="hs-identifier hs-var hs-var">nil</span></a></span></span><span>      </span><span id="local-6989586621679083558"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083558"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x -&gt; b
</span><a href="#local-6989586621679083562"><span class="hs-identifier hs-var">done</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083558"><span class="hs-identifier hs-var">x</span></a></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-541"></span><span>    </span><span id="local-6989586621679083560"><span class="annot"><span class="annottext">cons :: a -&gt; (x -&gt; [b]) -&gt; x -&gt; [b]
</span><a href="#local-6989586621679083560"><span class="hs-identifier hs-var hs-var">cons</span></a></span></span><span> </span><span id="local-6989586621679083557"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083557"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679083556"><span class="annot"><span class="annottext">x -&gt; [b]
</span><a href="#local-6989586621679083556"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679083555"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083555"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x -&gt; b
</span><a href="#local-6989586621679083562"><span class="hs-identifier hs-var">done</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083555"><span class="hs-identifier hs-var">x</span></a></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">(</span><span class="annot"><span class="annottext">x -&gt; [b]
</span><a href="#local-6989586621679083556"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679083564"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083555"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083557"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-542"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Control.Foldl.html#scan"><span class="hs-pragma hs-type">scan</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-543"></span><span>
</span><span id="line-544"></span><span class="hs-comment">{-| Convert a `Fold` into a prescan for any `Traversable` type

    \&quot;Prescan\&quot; means that the last element of the scan is not included

    &gt;&gt;&gt; Foldl.prescan Foldl.length [1..5]
    [0,1,2,3,4]
-}</span><span>
</span><span id="line-551"></span><span id="local-6989586621679084838"><span id="local-6989586621679084839"><span id="local-6989586621679084840"><span class="annot"><a href="Control.Foldl.html#prescan"><span class="hs-identifier hs-type">prescan</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Traversable</span></span><span> </span><span class="annot"><a href="#local-6989586621679084840"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084839"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084838"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084840"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084839"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084840"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084838"><span class="hs-identifier hs-type">b</span></a></span></span></span></span><span>
</span><span id="line-552"></span><span id="prescan"><span class="annot"><span class="annottext">prescan :: forall (t :: * -&gt; *) a b. Traversable t =&gt; Fold a b -&gt; t a -&gt; t b
</span><a href="Control.Foldl.html#prescan"><span class="hs-identifier hs-var hs-var">prescan</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span id="local-6989586621679083553"><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679083553"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679083552"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083552"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621679083551"><span class="annot"><span class="annottext">x -&gt; b
</span><a href="#local-6989586621679083551"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679083550"><span class="annot"><span class="annottext">t a
</span><a href="#local-6989586621679083550"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t b
</span><a href="#local-6989586621679083549"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-553"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-554"></span><span>    </span><span id="local-6989586621679083548"><span class="annot"><span class="annottext">step' :: x -&gt; a -&gt; (x, b)
</span><a href="#local-6989586621679083548"><span class="hs-identifier hs-var hs-var">step'</span></a></span></span><span> </span><span id="local-6989586621679083547"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083547"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679083546"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083546"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083545"><span class="hs-identifier hs-var">x'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679083544"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-555"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-556"></span><span>        </span><span id="local-6989586621679083545"><span class="annot"><span class="annottext">x' :: x
</span><a href="#local-6989586621679083545"><span class="hs-identifier hs-var hs-var">x'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679083553"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083547"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083546"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-557"></span><span>        </span><span id="local-6989586621679083544"><span class="annot"><span class="annottext">b :: b
</span><a href="#local-6989586621679083544"><span class="hs-identifier hs-var hs-var">b</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x -&gt; b
</span><a href="#local-6989586621679083551"><span class="hs-identifier hs-var">done</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083547"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-558"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679083549"><span class="annot"><span class="annottext">t b
</span><a href="#local-6989586621679083549"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) s a b.
Traversable t =&gt;
(s -&gt; a -&gt; (s, b)) -&gt; s -&gt; t a -&gt; (s, t b)
</span><span class="hs-identifier hs-var">mapAccumL</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; (x, b)
</span><a href="#local-6989586621679083548"><span class="hs-identifier hs-var">step'</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083552"><span class="hs-identifier hs-var">begin</span></a></span><span> </span><span class="annot"><span class="annottext">t a
</span><a href="#local-6989586621679083550"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-559"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Control.Foldl.html#prescan"><span class="hs-pragma hs-type">prescan</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-560"></span><span>
</span><span id="line-561"></span><span class="hs-comment">{-| Convert a `Fold` into a postscan for any `Traversable` type

    \&quot;Postscan\&quot; means that the first element of the scan is not included

    &gt;&gt;&gt; Foldl.postscan Foldl.length [1..5]
    [1,2,3,4,5]
-}</span><span>
</span><span id="line-568"></span><span id="local-6989586621679083539"><span id="local-6989586621679083540"><span id="local-6989586621679083541"><span class="annot"><a href="Control.Foldl.html#postscan"><span class="hs-identifier hs-type">postscan</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Traversable</span></span><span> </span><span class="annot"><a href="#local-6989586621679083541"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083540"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083539"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679083541"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083540"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679083541"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083539"><span class="hs-identifier hs-type">b</span></a></span></span></span></span><span>
</span><span id="line-569"></span><span id="postscan"><span class="annot"><span class="annottext">postscan :: forall (t :: * -&gt; *) a b. Traversable t =&gt; Fold a b -&gt; t a -&gt; t b
</span><a href="Control.Foldl.html#postscan"><span class="hs-identifier hs-var hs-var">postscan</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span id="local-6989586621679083537"><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679083537"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679083536"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083536"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621679083535"><span class="annot"><span class="annottext">x -&gt; b
</span><a href="#local-6989586621679083535"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679083534"><span class="annot"><span class="annottext">t a
</span><a href="#local-6989586621679083534"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t b
</span><a href="#local-6989586621679083533"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-570"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-571"></span><span>    </span><span id="local-6989586621679083532"><span class="annot"><span class="annottext">step' :: x -&gt; a -&gt; (x, b)
</span><a href="#local-6989586621679083532"><span class="hs-identifier hs-var hs-var">step'</span></a></span></span><span> </span><span id="local-6989586621679083531"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083531"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679083530"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083530"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083529"><span class="hs-identifier hs-var">x'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679083528"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-572"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-573"></span><span>        </span><span id="local-6989586621679083529"><span class="annot"><span class="annottext">x' :: x
</span><a href="#local-6989586621679083529"><span class="hs-identifier hs-var hs-var">x'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679083537"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083531"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083530"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-574"></span><span>        </span><span id="local-6989586621679083528"><span class="annot"><span class="annottext">b :: b
</span><a href="#local-6989586621679083528"><span class="hs-identifier hs-var hs-var">b</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x -&gt; b
</span><a href="#local-6989586621679083535"><span class="hs-identifier hs-var">done</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083529"><span class="hs-identifier hs-var">x'</span></a></span><span>
</span><span id="line-575"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679083533"><span class="annot"><span class="annottext">t b
</span><a href="#local-6989586621679083533"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) s a b.
Traversable t =&gt;
(s -&gt; a -&gt; (s, b)) -&gt; s -&gt; t a -&gt; (s, t b)
</span><span class="hs-identifier hs-var">mapAccumL</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; (x, b)
</span><a href="#local-6989586621679083532"><span class="hs-identifier hs-var">step'</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083536"><span class="hs-identifier hs-var">begin</span></a></span><span> </span><span class="annot"><span class="annottext">t a
</span><a href="#local-6989586621679083534"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-576"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Control.Foldl.html#postscan"><span class="hs-pragma hs-type">postscan</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-577"></span><span>
</span><span id="line-578"></span><span class="hs-comment">-- | Fold all values within a container using 'mappend' and 'mempty'</span><span>
</span><span id="line-579"></span><span id="local-6989586621679084825"><span class="annot"><a href="Control.Foldl.html#mconcat"><span class="hs-identifier hs-type">mconcat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679084825"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084825"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084825"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-580"></span><span id="mconcat"><span class="annot"><span class="annottext">mconcat :: forall a. Monoid a =&gt; Fold a a
</span><a href="Control.Foldl.html#mconcat"><span class="hs-identifier hs-var hs-var">mconcat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">mappend</span></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-581"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#mconcat"><span class="hs-pragma hs-type">mconcat</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-582"></span><span>
</span><span id="line-583"></span><span class="hs-comment">-- | Convert a \&quot;@foldMap@\&quot; to a 'Fold'</span><span>
</span><span id="line-584"></span><span id="local-6989586621679084820"><span id="local-6989586621679084821"><span id="local-6989586621679084822"><span class="annot"><a href="Control.Foldl.html#foldMap"><span class="hs-identifier hs-type">foldMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679084822"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084821"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084822"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084822"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084820"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084821"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084820"><span class="hs-identifier hs-type">b</span></a></span></span></span></span><span>
</span><span id="line-585"></span><span id="foldMap"><span class="annot"><span class="annottext">foldMap :: forall w a b. Monoid w =&gt; (a -&gt; w) -&gt; (w -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#foldMap"><span class="hs-identifier hs-var hs-var">foldMap</span></a></span></span><span> </span><span id="local-6989586621679083519"><span class="annot"><span class="annottext">a -&gt; w
</span><a href="#local-6989586621679083519"><span class="hs-identifier hs-var">to</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679083518"><span class="annot"><span class="annottext">w
</span><a href="#local-6989586621679083518"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679083517"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083517"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">mappend</span></span><span> </span><span class="annot"><span class="annottext">w
</span><a href="#local-6989586621679083518"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; w
</span><a href="#local-6989586621679083519"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083517"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-586"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#foldMap"><span class="hs-pragma hs-type">foldMap</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-587"></span><span>
</span><span id="line-588"></span><span class="hs-comment">{-| Get the first element of a container or return 'Nothing' if the container is
    empty
-}</span><span>
</span><span id="line-591"></span><span id="local-6989586621679084817"><span class="annot"><a href="Control.Foldl.html#head"><span class="hs-identifier hs-type">head</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084817"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679084817"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-592"></span><span id="head"><span class="annot"><span class="annottext">head :: forall a. Fold a (Maybe a)
</span><a href="Control.Foldl.html#head"><span class="hs-identifier hs-var hs-var">head</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; a -&gt; a) -&gt; Fold a (Maybe a)
</span><a href="Control.Foldl.html#_Fold1"><span class="hs-identifier hs-var">_Fold1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span>
</span><span id="line-593"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#head"><span class="hs-pragma hs-type">head</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-594"></span><span>
</span><span id="line-595"></span><span class="hs-comment">{-| Get the last element of a container or return 'Nothing' if the container is
    empty
-}</span><span>
</span><span id="line-598"></span><span id="local-6989586621679083515"><span class="annot"><a href="Control.Foldl.html#last"><span class="hs-identifier hs-type">last</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083515"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679083515"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-599"></span><span id="last"><span class="annot"><span class="annottext">last :: forall a. Fold a (Maybe a)
</span><a href="Control.Foldl.html#last"><span class="hs-identifier hs-var hs-var">last</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; a -&gt; a) -&gt; Fold a (Maybe a)
</span><a href="Control.Foldl.html#_Fold1"><span class="hs-identifier hs-var">_Fold1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span class="hs-special">)</span><span>
</span><span id="line-600"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#last"><span class="hs-pragma hs-type">last</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-601"></span><span>
</span><span id="line-602"></span><span class="hs-comment">{-| Get the last element of a container or return a default value if the container
    is empty
-}</span><span>
</span><span id="line-605"></span><span id="local-6989586621679084810"><span class="annot"><a href="Control.Foldl.html#lastDef"><span class="hs-identifier hs-type">lastDef</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679084810"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084810"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084810"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-606"></span><span id="lastDef"><span class="annot"><span class="annottext">lastDef :: forall a. a -&gt; Fold a a
</span><a href="Control.Foldl.html#lastDef"><span class="hs-identifier hs-var hs-var">lastDef</span></a></span></span><span> </span><span id="local-6989586621679083513"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083513"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679083512"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083512"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083512"><span class="hs-identifier hs-var">a'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083513"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-607"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#lastDef"><span class="hs-pragma hs-type">lastDef</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-608"></span><span>
</span><span id="line-609"></span><span class="hs-comment">{-| Return the last N elements

-}</span><span>
</span><span id="line-612"></span><span id="local-6989586621679084808"><span class="annot"><a href="Control.Foldl.html#lastN"><span class="hs-identifier hs-type">lastN</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084808"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679084808"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-613"></span><span id="lastN"><span class="annot"><span class="annottext">lastN :: forall a. Int -&gt; Fold a [a]
</span><a href="Control.Foldl.html#lastN"><span class="hs-identifier hs-var hs-var">lastN</span></a></span></span><span> </span><span id="local-6989586621679083511"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083511"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a}. Seq a -&gt; a -&gt; Seq a
</span><a href="#local-6989586621679083510"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a}. Seq a
</span><a href="#local-6989586621679083509"><span class="hs-identifier hs-var">begin</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a}. Seq a -&gt; [a]
</span><a href="#local-6989586621679083508"><span class="hs-identifier hs-var">done</span></a></span><span>
</span><span id="line-614"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-615"></span><span>    </span><span id="local-6989586621679083510"><span class="annot"><span class="annottext">step :: Seq a -&gt; a -&gt; Seq a
</span><a href="#local-6989586621679083510"><span class="hs-identifier hs-var hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679083507"><span class="annot"><span class="annottext">Seq a
</span><a href="#local-6989586621679083507"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621679083506"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083506"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Seq a
</span><a href="#local-6989586621679083505"><span class="hs-identifier hs-var">s'</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a}. Seq a -&gt; a -&gt; Seq a
</span><span class="hs-operator hs-var">|&gt;</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083506"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-616"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-617"></span><span>        </span><span id="local-6989586621679083505"><span class="annot"><span class="annottext">s' :: Seq a
</span><a href="#local-6989586621679083505"><span class="hs-identifier hs-var hs-var">s'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-618"></span><span>            </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">forall a. Seq a -&gt; Int
</span><span class="hs-identifier hs-var">Seq.length</span></span><span> </span><span class="annot"><span class="annottext">Seq a
</span><a href="#local-6989586621679083507"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083511"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-619"></span><span>            </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Seq a
</span><a href="#local-6989586621679083507"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-620"></span><span>            </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall a. Int -&gt; Seq a -&gt; Seq a
</span><span class="hs-identifier hs-var">Seq.drop</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Seq a
</span><a href="#local-6989586621679083507"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-621"></span><span>    </span><span id="local-6989586621679083509"><span class="annot"><span class="annottext">begin :: Seq a
</span><a href="#local-6989586621679083509"><span class="hs-identifier hs-var hs-var">begin</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {a}. Seq a
</span><span class="hs-identifier hs-var">Seq.empty</span></span><span>
</span><span id="line-622"></span><span>    </span><span id="local-6989586621679083508"><span class="annot"><span class="annottext">done :: Seq a -&gt; [a]
</span><a href="#local-6989586621679083508"><span class="hs-identifier hs-var hs-var">done</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">F.toList</span></span><span>
</span><span id="line-623"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#lastN"><span class="hs-pragma hs-type">lastN</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-624"></span><span>
</span><span id="line-625"></span><span class="hs-comment">-- | Returns 'True' if the container is empty, 'False' otherwise</span><span>
</span><span id="line-626"></span><span id="local-6989586621679084799"><span class="annot"><a href="Control.Foldl.html#null"><span class="hs-identifier hs-type">null</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084799"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-627"></span><span id="null"><span class="annot"><span class="annottext">null :: forall a. Fold a Bool
</span><a href="Control.Foldl.html#null"><span class="hs-identifier hs-var hs-var">null</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-628"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#null"><span class="hs-pragma hs-type">null</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-629"></span><span>
</span><span id="line-630"></span><span class="hs-comment">-- | Return the length of the container</span><span>
</span><span id="line-631"></span><span id="local-6989586621679084797"><span class="annot"><a href="Control.Foldl.html#length"><span class="hs-identifier hs-type">length</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084797"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span></span><span>
</span><span id="line-632"></span><span id="length"><span class="annot"><span class="annottext">length :: forall a. Fold a Int
</span><a href="Control.Foldl.html#length"><span class="hs-identifier hs-var hs-var">length</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b a. Num b =&gt; Fold a b
</span><a href="Control.Foldl.html#genericLength"><span class="hs-identifier hs-var">genericLength</span></a></span><span>
</span><span id="line-633"></span><span class="hs-comment">{- Technically, 'length' is just 'genericLength' specialized to 'Int's.  I keep
   the two separate so that I can later provide an 'Int'-specialized
   implementation of 'length' for performance reasons like &quot;GHC.List&quot; does
   without breaking backwards compatibility.
-}</span><span>
</span><span id="line-638"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#length"><span class="hs-pragma hs-type">length</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-639"></span><span>
</span><span id="line-640"></span><span class="hs-comment">-- | Returns 'True' if all elements are 'True', 'False' otherwise</span><span>
</span><span id="line-641"></span><span class="annot"><a href="Control.Foldl.html#and"><span class="hs-identifier hs-type">and</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-642"></span><span id="and"><span class="annot"><span class="annottext">and :: Fold Bool Bool
</span><a href="Control.Foldl.html#and"><span class="hs-identifier hs-var hs-var">and</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">(&amp;&amp;)</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-643"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#and"><span class="hs-pragma hs-type">and</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-644"></span><span>
</span><span id="line-645"></span><span class="hs-comment">-- | Returns 'True' if any element is 'True', 'False' otherwise</span><span>
</span><span id="line-646"></span><span class="annot"><a href="Control.Foldl.html#or"><span class="hs-identifier hs-type">or</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-647"></span><span id="or"><span class="annot"><span class="annottext">or :: Fold Bool Bool
</span><a href="Control.Foldl.html#or"><span class="hs-identifier hs-var hs-var">or</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">(||)</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-648"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#or"><span class="hs-pragma hs-type">or</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-649"></span><span>
</span><span id="line-650"></span><span class="hs-comment">{-| @(all predicate)@ returns 'True' if all elements satisfy the predicate,
    'False' otherwise
-}</span><span>
</span><span id="line-653"></span><span id="local-6989586621679084794"><span class="annot"><a href="Control.Foldl.html#all"><span class="hs-identifier hs-type">all</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084794"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084794"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-654"></span><span id="all"><span class="annot"><span class="annottext">all :: forall a. (a -&gt; Bool) -&gt; Fold a Bool
</span><a href="Control.Foldl.html#all"><span class="hs-identifier hs-var hs-var">all</span></a></span></span><span> </span><span id="local-6989586621679083492"><span class="annot"><span class="annottext">a -&gt; Bool
</span><a href="#local-6989586621679083492"><span class="hs-identifier hs-var">predicate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679083491"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679083491"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679083490"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083490"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679083491"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Bool
</span><a href="#local-6989586621679083492"><span class="hs-identifier hs-var">predicate</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083490"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-655"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#all"><span class="hs-pragma hs-type">all</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-656"></span><span>
</span><span id="line-657"></span><span class="hs-comment">{-| @(any predicate)@ returns 'True' if any element satisfies the predicate,
    'False' otherwise
-}</span><span>
</span><span id="line-660"></span><span id="local-6989586621679083489"><span class="annot"><a href="Control.Foldl.html#any"><span class="hs-identifier hs-type">any</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679083489"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083489"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-661"></span><span id="any"><span class="annot"><span class="annottext">any :: forall a. (a -&gt; Bool) -&gt; Fold a Bool
</span><a href="Control.Foldl.html#any"><span class="hs-identifier hs-var hs-var">any</span></a></span></span><span> </span><span id="local-6989586621679083488"><span class="annot"><span class="annottext">a -&gt; Bool
</span><a href="#local-6989586621679083488"><span class="hs-identifier hs-var">predicate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679083487"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679083487"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679083486"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083486"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679083487"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Bool
</span><a href="#local-6989586621679083488"><span class="hs-identifier hs-var">predicate</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083486"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-662"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#any"><span class="hs-pragma hs-type">any</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-663"></span><span>
</span><span id="line-664"></span><span class="hs-comment">-- | Computes the sum of all elements</span><span>
</span><span id="line-665"></span><span id="local-6989586621679084791"><span class="annot"><a href="Control.Foldl.html#sum"><span class="hs-identifier hs-type">sum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="annot"><a href="#local-6989586621679084791"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084791"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084791"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-666"></span><span id="sum"><span class="annot"><span class="annottext">sum :: forall a. Num a =&gt; Fold a a
</span><a href="Control.Foldl.html#sum"><span class="hs-identifier hs-var hs-var">sum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(+)</span></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-667"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#sum"><span class="hs-pragma hs-type">sum</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-668"></span><span>
</span><span id="line-669"></span><span class="hs-comment">-- | Computes the product of all elements</span><span>
</span><span id="line-670"></span><span id="local-6989586621679083482"><span class="annot"><a href="Control.Foldl.html#product"><span class="hs-identifier hs-type">product</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="annot"><a href="#local-6989586621679083482"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083482"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083482"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-671"></span><span id="product"><span class="annot"><span class="annottext">product :: forall a. Num a =&gt; Fold a a
</span><a href="Control.Foldl.html#product"><span class="hs-identifier hs-var hs-var">product</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(*)</span></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-672"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#product"><span class="hs-pragma hs-type">product</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-673"></span><span>
</span><span id="line-674"></span><span class="hs-comment">-- | Compute a numerically stable arithmetic mean of all elements</span><span>
</span><span id="line-675"></span><span id="local-6989586621679084788"><span class="annot"><a href="Control.Foldl.html#mean"><span class="hs-identifier hs-type">mean</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Fractional</span></span><span> </span><span class="annot"><a href="#local-6989586621679084788"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084788"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084788"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-676"></span><span id="mean"><span class="annot"><span class="annottext">mean :: forall a. Fractional a =&gt; Fold a a
</span><a href="Control.Foldl.html#mean"><span class="hs-identifier hs-var hs-var">mean</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">forall {b}. Fractional b =&gt; Pair b b -&gt; b -&gt; Pair b b
</span><a href="#local-6989586621679083475"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">Pair a a
</span><a href="#local-6989586621679083474"><span class="hs-identifier hs-var">begin</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a} {b}. Pair a b -&gt; a
</span><a href="#local-6989586621679083473"><span class="hs-identifier hs-var">done</span></a></span><span>
</span><span id="line-677"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-678"></span><span>    </span><span id="local-6989586621679083474"><span class="annot"><span class="annottext">begin :: Pair a a
</span><a href="#local-6989586621679083474"><span class="hs-identifier hs-var hs-var">begin</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; Pair a b
</span><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-var">Pair</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">0</span></span><span>
</span><span id="line-679"></span><span>    </span><span id="local-6989586621679083475"><span class="annot"><span class="annottext">step :: Pair b b -&gt; b -&gt; Pair b b
</span><a href="#local-6989586621679083475"><span class="hs-identifier hs-var hs-var">step</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span id="local-6989586621679083465"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679083465"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679083464"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679083464"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679083463"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679083463"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679083460"><span class="annot"><span class="annottext">n' :: b
</span><a href="#local-6989586621679083460"><span class="hs-identifier hs-var hs-var">n'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679083464"><span class="hs-identifier hs-var">n</span></a></span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">b
</span><span class="hs-number">1</span></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; Pair a b
</span><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-var">Pair</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679083465"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679083463"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679083465"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Fractional a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">/</span></span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679083460"><span class="hs-identifier hs-var">n'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679083460"><span class="hs-identifier hs-var">n'</span></a></span><span>
</span><span id="line-680"></span><span>    </span><span id="local-6989586621679083473"><span class="annot"><span class="annottext">done :: Pair a b -&gt; a
</span><a href="#local-6989586621679083473"><span class="hs-identifier hs-var hs-var">done</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span id="local-6989586621679083459"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083459"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">b
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083459"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-681"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#mean"><span class="hs-pragma hs-type">mean</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-682"></span><span>
</span><span id="line-683"></span><span class="hs-comment">-- | Compute a numerically stable (population) variance over all elements</span><span>
</span><span id="line-684"></span><span id="local-6989586621679083458"><span class="annot"><a href="Control.Foldl.html#variance"><span class="hs-identifier hs-type">variance</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Fractional</span></span><span> </span><span class="annot"><a href="#local-6989586621679083458"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083458"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083458"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-685"></span><span id="variance"><span class="annot"><span class="annottext">variance :: forall a. Fractional a =&gt; Fold a a
</span><a href="Control.Foldl.html#variance"><span class="hs-identifier hs-var hs-var">variance</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">forall {c}. Fractional c =&gt; Pair3 c c c -&gt; c -&gt; Pair3 c c c
</span><a href="#local-6989586621679083453"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">Pair3 a a a
</span><a href="#local-6989586621679083452"><span class="hs-identifier hs-var">begin</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a} {b}. Fractional a =&gt; Pair3 a b a -&gt; a
</span><a href="#local-6989586621679083451"><span class="hs-identifier hs-var">done</span></a></span><span>
</span><span id="line-686"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-687"></span><span>    </span><span id="local-6989586621679083452"><span class="annot"><span class="annottext">begin :: Pair3 a a a
</span><a href="#local-6989586621679083452"><span class="hs-identifier hs-var hs-var">begin</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c. a -&gt; b -&gt; c -&gt; Pair3 a b c
</span><a href="Control.Foldl.html#Pair3"><span class="hs-identifier hs-var">Pair3</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">0</span></span><span>
</span><span id="line-688"></span><span>
</span><span id="line-689"></span><span>    </span><span id="local-6989586621679083453"><span class="annot"><span class="annottext">step :: Pair3 c c c -&gt; c -&gt; Pair3 c c c
</span><a href="#local-6989586621679083453"><span class="hs-identifier hs-var hs-var">step</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Pair3"><span class="hs-identifier hs-type">Pair3</span></a></span><span> </span><span id="local-6989586621679083444"><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679083444"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679083443"><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679083443"><span class="hs-identifier hs-var">mean_</span></a></span></span><span> </span><span id="local-6989586621679083442"><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679083442"><span class="hs-identifier hs-var">m2</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679083441"><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679083441"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c. a -&gt; b -&gt; c -&gt; Pair3 a b c
</span><a href="Control.Foldl.html#Pair3"><span class="hs-identifier hs-var">Pair3</span></a></span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679083440"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679083439"><span class="hs-identifier hs-var">mean'</span></a></span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679083438"><span class="hs-identifier hs-var">m2'</span></a></span><span>
</span><span id="line-690"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-691"></span><span>        </span><span id="local-6989586621679083440"><span class="annot"><span class="annottext">n' :: c
</span><a href="#local-6989586621679083440"><span class="hs-identifier hs-var hs-var">n'</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679083444"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">c
</span><span class="hs-number">1</span></span><span>
</span><span id="line-692"></span><span>        </span><span id="local-6989586621679083439"><span class="annot"><span class="annottext">mean' :: c
</span><a href="#local-6989586621679083439"><span class="hs-identifier hs-var hs-var">mean'</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679083444"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679083443"><span class="hs-identifier hs-var">mean_</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679083441"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Fractional a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">/</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679083444"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">c
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-693"></span><span>        </span><span id="local-6989586621679083429"><span class="annot"><span class="annottext">delta :: c
</span><a href="#local-6989586621679083429"><span class="hs-identifier hs-var hs-var">delta</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679083441"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679083443"><span class="hs-identifier hs-var">mean_</span></a></span><span>
</span><span id="line-694"></span><span>        </span><span id="local-6989586621679083438"><span class="annot"><span class="annottext">m2' :: c
</span><a href="#local-6989586621679083438"><span class="hs-identifier hs-var hs-var">m2'</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679083442"><span class="hs-identifier hs-var">m2</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679083429"><span class="hs-identifier hs-var">delta</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679083429"><span class="hs-identifier hs-var">delta</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679083444"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Fractional a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">/</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679083444"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">c
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-695"></span><span>
</span><span id="line-696"></span><span>    </span><span id="local-6989586621679083451"><span class="annot"><span class="annottext">done :: Pair3 a b a -&gt; a
</span><a href="#local-6989586621679083451"><span class="hs-identifier hs-var hs-var">done</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Pair3"><span class="hs-identifier hs-type">Pair3</span></a></span><span> </span><span id="local-6989586621679083420"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083420"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="annottext">b
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679083419"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083419"><span class="hs-identifier hs-var">m2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083419"><span class="hs-identifier hs-var">m2</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Fractional a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">/</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083420"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-697"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#variance"><span class="hs-pragma hs-type">variance</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-698"></span><span>
</span><span id="line-699"></span><span class="hs-comment">{-| Compute a numerically stable (population) standard deviation over all
    elements
-}</span><span>
</span><span id="line-702"></span><span id="local-6989586621679084775"><span class="annot"><a href="Control.Foldl.html#std"><span class="hs-identifier hs-type">std</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Floating</span></span><span> </span><span class="annot"><a href="#local-6989586621679084775"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084775"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084775"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-703"></span><span id="std"><span class="annot"><span class="annottext">std :: forall a. Floating a =&gt; Fold a a
</span><a href="Control.Foldl.html#std"><span class="hs-identifier hs-var hs-var">std</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Floating a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">sqrt</span></span><span> </span><span class="annot"><span class="annottext">forall a. Fractional a =&gt; Fold a a
</span><a href="Control.Foldl.html#variance"><span class="hs-identifier hs-var">variance</span></a></span><span>
</span><span id="line-704"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#std"><span class="hs-pragma hs-type">std</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-705"></span><span>
</span><span id="line-706"></span><span class="hs-comment">-- | Computes the maximum element</span><span>
</span><span id="line-707"></span><span id="local-6989586621679084773"><span class="annot"><a href="Control.Foldl.html#maximum"><span class="hs-identifier hs-type">maximum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679084773"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084773"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679084773"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-708"></span><span id="maximum"><span class="annot"><span class="annottext">maximum :: forall a. Ord a =&gt; Fold a (Maybe a)
</span><a href="Control.Foldl.html#maximum"><span class="hs-identifier hs-var hs-var">maximum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; a -&gt; a) -&gt; Fold a (Maybe a)
</span><a href="Control.Foldl.html#_Fold1"><span class="hs-identifier hs-var">_Fold1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">max</span></span><span>
</span><span id="line-709"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#maximum"><span class="hs-pragma hs-type">maximum</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-710"></span><span>
</span><span id="line-711"></span><span class="hs-comment">{-| Computes the maximum element with respect to the given comparison
    function
-}</span><span>
</span><span id="line-714"></span><span id="local-6989586621679084771"><span class="annot"><a href="Control.Foldl.html#maximumBy"><span class="hs-identifier hs-type">maximumBy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084771"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084771"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ordering</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084771"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679084771"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-715"></span><span id="maximumBy"><span class="annot"><span class="annottext">maximumBy :: forall a. (a -&gt; a -&gt; Ordering) -&gt; Fold a (Maybe a)
</span><a href="Control.Foldl.html#maximumBy"><span class="hs-identifier hs-var hs-var">maximumBy</span></a></span></span><span> </span><span id="local-6989586621679083411"><span class="annot"><span class="annottext">a -&gt; a -&gt; Ordering
</span><a href="#local-6989586621679083411"><span class="hs-identifier hs-var">cmp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; a -&gt; a) -&gt; Fold a (Maybe a)
</span><a href="Control.Foldl.html#_Fold1"><span class="hs-identifier hs-var">_Fold1</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
</span><a href="#local-6989586621679083410"><span class="hs-identifier hs-var">max'</span></a></span><span>
</span><span id="line-716"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-717"></span><span>    </span><span id="local-6989586621679083410"><span class="annot"><span class="annottext">max' :: a -&gt; a -&gt; a
</span><a href="#local-6989586621679083410"><span class="hs-identifier hs-var hs-var">max'</span></a></span></span><span> </span><span id="local-6989586621679083409"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083409"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679083408"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083408"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; Ordering
</span><a href="#local-6989586621679083411"><span class="hs-identifier hs-var">cmp</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083409"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083408"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-718"></span><span>        </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083409"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-719"></span><span>        </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083408"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-720"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#maximumBy"><span class="hs-pragma hs-type">maximumBy</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-721"></span><span>
</span><span id="line-722"></span><span class="hs-comment">-- | Computes the minimum element</span><span>
</span><span id="line-723"></span><span id="local-6989586621679083407"><span class="annot"><a href="Control.Foldl.html#minimum"><span class="hs-identifier hs-type">minimum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679083407"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083407"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679083407"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-724"></span><span id="minimum"><span class="annot"><span class="annottext">minimum :: forall a. Ord a =&gt; Fold a (Maybe a)
</span><a href="Control.Foldl.html#minimum"><span class="hs-identifier hs-var hs-var">minimum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; a -&gt; a) -&gt; Fold a (Maybe a)
</span><a href="Control.Foldl.html#_Fold1"><span class="hs-identifier hs-var">_Fold1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">min</span></span><span>
</span><span id="line-725"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#minimum"><span class="hs-pragma hs-type">minimum</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-726"></span><span>
</span><span id="line-727"></span><span class="hs-comment">{-| Computes the minimum element with respect to the given comparison
    function
-}</span><span>
</span><span id="line-730"></span><span id="local-6989586621679083403"><span class="annot"><a href="Control.Foldl.html#minimumBy"><span class="hs-identifier hs-type">minimumBy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679083403"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679083403"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ordering</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083403"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679083403"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-731"></span><span id="minimumBy"><span class="annot"><span class="annottext">minimumBy :: forall a. (a -&gt; a -&gt; Ordering) -&gt; Fold a (Maybe a)
</span><a href="Control.Foldl.html#minimumBy"><span class="hs-identifier hs-var hs-var">minimumBy</span></a></span></span><span> </span><span id="local-6989586621679083402"><span class="annot"><span class="annottext">a -&gt; a -&gt; Ordering
</span><a href="#local-6989586621679083402"><span class="hs-identifier hs-var">cmp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; a -&gt; a) -&gt; Fold a (Maybe a)
</span><a href="Control.Foldl.html#_Fold1"><span class="hs-identifier hs-var">_Fold1</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
</span><a href="#local-6989586621679083401"><span class="hs-identifier hs-var">min'</span></a></span><span>
</span><span id="line-732"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-733"></span><span>    </span><span id="local-6989586621679083401"><span class="annot"><span class="annottext">min' :: a -&gt; a -&gt; a
</span><a href="#local-6989586621679083401"><span class="hs-identifier hs-var hs-var">min'</span></a></span></span><span> </span><span id="local-6989586621679083400"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083400"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679083399"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083399"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; Ordering
</span><a href="#local-6989586621679083402"><span class="hs-identifier hs-var">cmp</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083400"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083399"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-734"></span><span>        </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083399"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-735"></span><span>        </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083400"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-736"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#minimumBy"><span class="hs-pragma hs-type">minimumBy</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-737"></span><span>
</span><span id="line-738"></span><span class="hs-comment">{-| @(elem a)@ returns 'True' if the container has an element equal to @a@,
    'False' otherwise
-}</span><span>
</span><span id="line-741"></span><span id="local-6989586621679084767"><span class="annot"><a href="Control.Foldl.html#elem"><span class="hs-identifier hs-type">elem</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679084767"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084767"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084767"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-742"></span><span id="elem"><span class="annot"><span class="annottext">elem :: forall a. Eq a =&gt; a -&gt; Fold a Bool
</span><a href="Control.Foldl.html#elem"><span class="hs-identifier hs-var hs-var">elem</span></a></span></span><span> </span><span id="local-6989586621679083396"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083396"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; Fold a Bool
</span><a href="Control.Foldl.html#any"><span class="hs-identifier hs-var">any</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083396"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span class="hs-special">)</span><span>
</span><span id="line-743"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#elem"><span class="hs-pragma hs-type">elem</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-744"></span><span>
</span><span id="line-745"></span><span class="hs-comment">{-| @(notElem a)@ returns 'False' if the container has an element equal to @a@,
    'True' otherwise
-}</span><span>
</span><span id="line-748"></span><span id="local-6989586621679083395"><span class="annot"><a href="Control.Foldl.html#notElem"><span class="hs-identifier hs-type">notElem</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679083395"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679083395"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083395"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-749"></span><span id="notElem"><span class="annot"><span class="annottext">notElem :: forall a. Eq a =&gt; a -&gt; Fold a Bool
</span><a href="Control.Foldl.html#notElem"><span class="hs-identifier hs-var hs-var">notElem</span></a></span></span><span> </span><span id="local-6989586621679083392"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083392"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; Fold a Bool
</span><a href="Control.Foldl.html#all"><span class="hs-identifier hs-var">all</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083392"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span class="hs-special">)</span><span>
</span><span id="line-750"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#notElem"><span class="hs-pragma hs-type">notElem</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-751"></span><span>
</span><span id="line-752"></span><span class="hs-comment">{-| @(find predicate)@ returns the first element that satisfies the predicate or
    'Nothing' if no element satisfies the predicate
-}</span><span>
</span><span id="line-755"></span><span id="local-6989586621679084763"><span class="annot"><a href="Control.Foldl.html#find"><span class="hs-identifier hs-type">find</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084763"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084763"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679084763"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-756"></span><span id="find"><span class="annot"><span class="annottext">find :: forall a. (a -&gt; Bool) -&gt; Fold a (Maybe a)
</span><a href="Control.Foldl.html#find"><span class="hs-identifier hs-var hs-var">find</span></a></span></span><span> </span><span id="local-6989586621679083390"><span class="annot"><span class="annottext">a -&gt; Bool
</span><a href="#local-6989586621679083390"><span class="hs-identifier hs-var">predicate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe' a -&gt; a -&gt; Maybe' a
</span><a href="#local-6989586621679083389"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe' a
</span><a href="Control.Foldl.Internal.html#Nothing%27"><span class="hs-identifier hs-var">Nothing'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe' a -&gt; Maybe a
</span><a href="Control.Foldl.Internal.html#lazy"><span class="hs-identifier hs-var">lazy</span></a></span><span>
</span><span id="line-757"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-758"></span><span>    </span><span id="local-6989586621679083389"><span class="annot"><span class="annottext">step :: Maybe' a -&gt; a -&gt; Maybe' a
</span><a href="#local-6989586621679083389"><span class="hs-identifier hs-var hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679083387"><span class="annot"><span class="annottext">Maybe' a
</span><a href="#local-6989586621679083387"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679083386"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083386"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe' a
</span><a href="#local-6989586621679083387"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-759"></span><span>        </span><span class="annot"><span class="annottext">Maybe' a
</span><a href="Control.Foldl.Internal.html#Nothing%27"><span class="hs-identifier hs-var">Nothing'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">a -&gt; Bool
</span><a href="#local-6989586621679083390"><span class="hs-identifier hs-var">predicate</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083386"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe' a
</span><a href="Control.Foldl.Internal.html#Just%27"><span class="hs-identifier hs-var">Just'</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083386"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe' a
</span><a href="Control.Foldl.Internal.html#Nothing%27"><span class="hs-identifier hs-var">Nothing'</span></a></span><span>
</span><span id="line-760"></span><span>        </span><span class="annot"><span class="annottext">Maybe' a
</span><span class="hs-identifier">_</span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe' a
</span><a href="#local-6989586621679083387"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-761"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#find"><span class="hs-pragma hs-type">find</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-762"></span><span>
</span><span id="line-763"></span><span class="hs-comment">{-| @(index n)@ returns the @n@th element of the container, or 'Nothing' if the
    container has an insufficient number of elements
-}</span><span>
</span><span id="line-766"></span><span id="local-6989586621679084758"><span class="annot"><a href="Control.Foldl.html#index"><span class="hs-identifier hs-type">index</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084758"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679084758"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-767"></span><span id="index"><span class="annot"><span class="annottext">index :: forall a. Int -&gt; Fold a (Maybe a)
</span><a href="Control.Foldl.html#index"><span class="hs-identifier hs-var hs-var">index</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall i a. Integral i =&gt; i -&gt; Fold a (Maybe a)
</span><a href="Control.Foldl.html#genericIndex"><span class="hs-identifier hs-var">genericIndex</span></a></span><span>
</span><span id="line-768"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#index"><span class="hs-pragma hs-type">index</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-769"></span><span>
</span><span id="line-770"></span><span class="hs-comment">{-| @(elemIndex a)@ returns the index of the first element that equals @a@, or
    'Nothing' if no element matches
-}</span><span>
</span><span id="line-773"></span><span id="local-6989586621679084755"><span class="annot"><a href="Control.Foldl.html#elemIndex"><span class="hs-identifier hs-type">elemIndex</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679084755"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084755"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084755"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span></span><span>
</span><span id="line-774"></span><span id="elemIndex"><span class="annot"><span class="annottext">elemIndex :: forall a. Eq a =&gt; a -&gt; Fold a (Maybe Int)
</span><a href="Control.Foldl.html#elemIndex"><span class="hs-identifier hs-var hs-var">elemIndex</span></a></span></span><span> </span><span id="local-6989586621679083380"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083380"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; Fold a (Maybe Int)
</span><a href="Control.Foldl.html#findIndex"><span class="hs-identifier hs-var">findIndex</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083380"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span class="hs-special">)</span><span>
</span><span id="line-775"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#elemIndex"><span class="hs-pragma hs-type">elemIndex</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-776"></span><span>
</span><span id="line-777"></span><span class="hs-comment">{-| @(findIndex predicate)@ returns the index of the first element that
    satisfies the predicate, or 'Nothing' if no element satisfies the predicate
-}</span><span>
</span><span id="line-780"></span><span id="local-6989586621679084753"><span class="annot"><a href="Control.Foldl.html#findIndex"><span class="hs-identifier hs-type">findIndex</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084753"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084753"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span></span><span>
</span><span id="line-781"></span><span id="findIndex"><span class="annot"><span class="annottext">findIndex :: forall a. (a -&gt; Bool) -&gt; Fold a (Maybe Int)
</span><a href="Control.Foldl.html#findIndex"><span class="hs-identifier hs-var hs-var">findIndex</span></a></span></span><span> </span><span id="local-6989586621679083377"><span class="annot"><span class="annottext">a -&gt; Bool
</span><a href="#local-6989586621679083377"><span class="hs-identifier hs-var">predicate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a}. Num a =&gt; Either' a a -&gt; a -&gt; Either' a a
</span><a href="#local-6989586621679083376"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. a -&gt; Either' a b
</span><a href="Control.Foldl.Internal.html#Left%27"><span class="hs-identifier hs-var">Left'</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. Either' a b -&gt; Maybe b
</span><a href="Control.Foldl.Internal.html#hush"><span class="hs-identifier hs-var">hush</span></a></span><span>
</span><span id="line-782"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-783"></span><span>    </span><span id="local-6989586621679083376"><span class="annot"><span class="annottext">step :: Either' a a -&gt; a -&gt; Either' a a
</span><a href="#local-6989586621679083376"><span class="hs-identifier hs-var hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679083371"><span class="annot"><span class="annottext">Either' a a
</span><a href="#local-6989586621679083371"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679083370"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083370"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either' a a
</span><a href="#local-6989586621679083371"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-784"></span><span>        </span><span class="annot"><a href="Control.Foldl.Internal.html#Left%27"><span class="hs-identifier hs-type">Left'</span></a></span><span> </span><span id="local-6989586621679083369"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083369"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-785"></span><span>            </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">a -&gt; Bool
</span><a href="#local-6989586621679083377"><span class="hs-identifier hs-var">predicate</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083370"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-786"></span><span>            </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either' a b
</span><a href="Control.Foldl.Internal.html#Right%27"><span class="hs-identifier hs-var">Right'</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083369"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-787"></span><span>            </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either' a b
</span><a href="Control.Foldl.Internal.html#Left%27"><span class="hs-identifier hs-var">Left'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083369"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-788"></span><span>        </span><span class="annot"><span class="annottext">Either' a a
</span><span class="hs-identifier">_</span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either' a a
</span><a href="#local-6989586621679083371"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-789"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#findIndex"><span class="hs-pragma hs-type">findIndex</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-790"></span><span>
</span><span id="line-791"></span><span>
</span><span id="line-792"></span><span class="hs-comment">{-| @(lookup a)@ returns the element paired with the first matching item, or
    'Nothing' if none matches
-}</span><span>
</span><span id="line-795"></span><span id="local-6989586621679084744"><span id="local-6989586621679084745"><span class="annot"><a href="Control.Foldl.html#lookup"><span class="hs-identifier hs-type">lookup</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679084745"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084745"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084745"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679084744"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679084744"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-796"></span><span id="lookup"><span class="annot"><span class="annottext">lookup :: forall a b. Eq a =&gt; a -&gt; Fold (a, b) (Maybe b)
</span><a href="Control.Foldl.html#lookup"><span class="hs-identifier hs-var hs-var">lookup</span></a></span></span><span> </span><span id="local-6989586621679083366"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083366"><span class="hs-identifier hs-var">a0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a}. Maybe' a -&gt; (a, a) -&gt; Maybe' a
</span><a href="#local-6989586621679083365"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe' a
</span><a href="Control.Foldl.Internal.html#Nothing%27"><span class="hs-identifier hs-var">Nothing'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe' a -&gt; Maybe a
</span><a href="Control.Foldl.Internal.html#lazy"><span class="hs-identifier hs-var">lazy</span></a></span><span>
</span><span id="line-797"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-798"></span><span>    </span><span id="local-6989586621679083365"><span class="annot"><span class="annottext">step :: Maybe' a -&gt; (a, a) -&gt; Maybe' a
</span><a href="#local-6989586621679083365"><span class="hs-identifier hs-var hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679083363"><span class="annot"><span class="annottext">Maybe' a
</span><a href="#local-6989586621679083363"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679083362"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083362"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679083361"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083361"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe' a
</span><a href="#local-6989586621679083363"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-799"></span><span>      </span><span class="annot"><span class="annottext">Maybe' a
</span><a href="Control.Foldl.Internal.html#Nothing%27"><span class="hs-identifier hs-var">Nothing'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083362"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083366"><span class="hs-identifier hs-var">a0</span></a></span><span>
</span><span id="line-800"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe' a
</span><a href="Control.Foldl.Internal.html#Just%27"><span class="hs-identifier hs-var">Just'</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083361"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-801"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe' a
</span><a href="Control.Foldl.Internal.html#Nothing%27"><span class="hs-identifier hs-var">Nothing'</span></a></span><span>
</span><span id="line-802"></span><span>      </span><span class="annot"><span class="annottext">Maybe' a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe' a
</span><a href="#local-6989586621679083363"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-803"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#lookup"><span class="hs-pragma hs-type">lookup</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-804"></span><span>
</span><span id="line-805"></span><span class="hs-keyword">data</span><span> </span><span id="Pair3"><span class="annot"><a href="Control.Foldl.html#Pair3"><span class="hs-identifier hs-var">Pair3</span></a></span></span><span> </span><span id="local-6989586621679084778"><span class="annot"><a href="#local-6989586621679084778"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679084777"><span class="annot"><a href="#local-6989586621679084777"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621679084776"><span class="annot"><a href="#local-6989586621679084776"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Pair3"><span class="annot"><a href="Control.Foldl.html#Pair3"><span class="hs-identifier hs-var">Pair3</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="#local-6989586621679084778"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="#local-6989586621679084777"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="#local-6989586621679084776"><span class="hs-identifier hs-type">c</span></a></span><span>
</span><span id="line-806"></span><span>
</span><span id="line-807"></span><span class="hs-comment">-- | Pick a random element, using reservoir sampling</span><span>
</span><span id="line-808"></span><span id="local-6989586621679084741"><span class="annot"><a href="Control.Foldl.html#random"><span class="hs-identifier hs-type">random</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679084741"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679084741"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-809"></span><span id="random"><span class="annot"><span class="annottext">random :: forall a. FoldM IO a (Maybe a)
</span><a href="Control.Foldl.html#random"><span class="hs-identifier hs-var hs-var">random</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b x.
(x -&gt; a -&gt; m x) -&gt; m x -&gt; (x -&gt; m b) -&gt; FoldM m a b
</span><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-var">FoldM</span></a></span><span> </span><span class="annot"><span class="annottext">forall {m :: * -&gt; *} {c} {a} {a}.
(Monad m, RandomGen a, UniformRange c, Eq c, Num c) =&gt;
Pair3 a (Maybe' a) c -&gt; a -&gt; m (Pair3 a (Maybe' a) c)
</span><a href="#local-6989586621679083350"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a}. IO (Pair3 StdGen (Maybe' a) Int)
</span><a href="#local-6989586621679083349"><span class="hs-identifier hs-var">begin</span></a></span><span> </span><span class="annot"><span class="annottext">forall {m :: * -&gt; *} {a} {a} {c}.
Monad m =&gt;
Pair3 a (Maybe' a) c -&gt; m (Maybe a)
</span><a href="#local-6989586621679083348"><span class="hs-identifier hs-var">done</span></a></span><span>
</span><span id="line-810"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-811"></span><span>    </span><span id="local-6989586621679083349"><span class="annot"><span class="annottext">begin :: IO (Pair3 StdGen (Maybe' a) Int)
</span><a href="#local-6989586621679083349"><span class="hs-identifier hs-var hs-var">begin</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-812"></span><span>        </span><span id="local-6989586621679083343"><span class="annot"><span class="annottext">StdGen
</span><a href="#local-6989586621679083343"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). MonadIO m =&gt; m StdGen
</span><span class="hs-identifier hs-var">newStdGen</span></span><span>
</span><span id="line-813"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">forall a b c. a -&gt; b -&gt; c -&gt; Pair3 a b c
</span><a href="Control.Foldl.html#Pair3"><span class="hs-identifier hs-var">Pair3</span></a></span><span> </span><span class="annot"><span class="annottext">StdGen
</span><a href="#local-6989586621679083343"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe' a
</span><a href="Control.Foldl.Internal.html#Nothing%27"><span class="hs-identifier hs-var">Nothing'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span>
</span><span id="line-814"></span><span>
</span><span id="line-815"></span><span>    </span><span id="local-6989586621679083350"><span class="annot"><span class="annottext">step :: Pair3 a (Maybe' a) c -&gt; a -&gt; m (Pair3 a (Maybe' a) c)
</span><a href="#local-6989586621679083350"><span class="hs-identifier hs-var hs-var">step</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Pair3"><span class="hs-identifier hs-type">Pair3</span></a></span><span> </span><span id="local-6989586621679083332"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083332"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe' a
</span><a href="Control.Foldl.Internal.html#Nothing%27"><span class="hs-identifier hs-var">Nothing'</span></a></span><span>  </span><span class="annot"><span class="annottext">c
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679083331"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083331"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">forall a b c. a -&gt; b -&gt; c -&gt; Pair3 a b c
</span><a href="Control.Foldl.html#Pair3"><span class="hs-identifier hs-var">Pair3</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083332"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe' a
</span><a href="Control.Foldl.Internal.html#Just%27"><span class="hs-identifier hs-var">Just'</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083331"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">c
</span><span class="hs-number">2</span></span><span>
</span><span id="line-816"></span><span>    </span><span class="annot"><a href="#local-6989586621679083350"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Pair3"><span class="hs-identifier hs-type">Pair3</span></a></span><span> </span><span id="local-6989586621679083330"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083330"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.Internal.html#Just%27"><span class="hs-identifier hs-type">Just'</span></a></span><span> </span><span id="local-6989586621679083329"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083329"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679083328"><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679083328"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679083327"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083327"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-817"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679083323"><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679083323"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679083322"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083322"><span class="hs-identifier hs-var">g'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall g a. (RandomGen g, UniformRange a) =&gt; (a, a) -&gt; g -&gt; (a, g)
</span><span class="hs-identifier hs-var">uniformR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">c
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679083328"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083330"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-818"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679083319"><span class="annot"><span class="annottext">c :: a
</span><a href="#local-6989586621679083319"><span class="hs-identifier hs-var hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679083323"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">c
</span><span class="hs-number">1</span></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083327"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083329"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-819"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">forall a b c. a -&gt; b -&gt; c -&gt; Pair3 a b c
</span><a href="Control.Foldl.html#Pair3"><span class="hs-identifier hs-var">Pair3</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083322"><span class="hs-identifier hs-var">g'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe' a
</span><a href="Control.Foldl.Internal.html#Just%27"><span class="hs-identifier hs-var">Just'</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083319"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679083328"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">c
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-820"></span><span>
</span><span id="line-821"></span><span>    </span><span id="local-6989586621679083348"><span class="annot"><span class="annottext">done :: Pair3 a (Maybe' a) c -&gt; m (Maybe a)
</span><a href="#local-6989586621679083348"><span class="hs-identifier hs-var hs-var">done</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Pair3"><span class="hs-identifier hs-type">Pair3</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679083316"><span class="annot"><span class="annottext">Maybe' a
</span><a href="#local-6989586621679083316"><span class="hs-identifier hs-var">ma</span></a></span></span><span> </span><span class="annot"><span class="annottext">c
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Maybe' a -&gt; Maybe a
</span><a href="Control.Foldl.Internal.html#lazy"><span class="hs-identifier hs-var">lazy</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe' a
</span><a href="#local-6989586621679083316"><span class="hs-identifier hs-var">ma</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-822"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#random"><span class="hs-pragma hs-type">random</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-823"></span><span>
</span><span id="line-824"></span><span class="hs-keyword">data</span><span> </span><span id="VectorState"><span class="annot"><a href="Control.Foldl.html#VectorState"><span class="hs-identifier hs-var">VectorState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Incomplete"><span class="annot"><a href="Control.Foldl.html#Incomplete"><span class="hs-identifier hs-var">Incomplete</span></a></span></span><span> </span><span class="hs-pragma">{-# UNPACK</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Complete"><span class="annot"><a href="Control.Foldl.html#Complete"><span class="hs-identifier hs-var">Complete</span></a></span></span><span>
</span><span id="line-825"></span><span>
</span><span id="line-826"></span><span class="hs-keyword">data</span><span> </span><span id="RandomNState"><span class="annot"><a href="Control.Foldl.html#RandomNState"><span class="hs-identifier hs-var">RandomNState</span></a></span></span><span> </span><span id="local-6989586621679084723"><span class="annot"><a href="#local-6989586621679084723"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621679084722"><span class="annot"><a href="#local-6989586621679084722"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RandomNState"><span class="annot"><a href="Control.Foldl.html#RandomNState"><span class="hs-identifier hs-var">RandomNState</span></a></span></span><span>
</span><span id="line-827"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="_size"><span class="annot"><span class="annottext">forall (v :: * -&gt; *) a. RandomNState v a -&gt; VectorState
</span><a href="Control.Foldl.html#_size"><span class="hs-identifier hs-var hs-var">_size</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span>                </span><span class="hs-glyph">!</span><span class="annot"><a href="Control.Foldl.html#VectorState"><span class="hs-identifier hs-type">VectorState</span></a></span><span>
</span><span id="line-828"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="_reservoir"><span class="annot"><span class="annottext">forall (v :: * -&gt; *) a. RandomNState v a -&gt; Mutable v RealWorld a
</span><a href="Control.Foldl.html#_reservoir"><span class="hs-identifier hs-var hs-var">_reservoir</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>                </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Mutable</span></span><span> </span><span class="annot"><a href="#local-6989586621679084723"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">RealWorld</span></span><span> </span><span class="annot"><a href="#local-6989586621679084722"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-829"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="_position"><span class="annot"><span class="annottext">forall (v :: * -&gt; *) a. RandomNState v a -&gt; Int
</span><a href="Control.Foldl.html#_position"><span class="hs-identifier hs-var hs-var">_position</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-pragma">{-# UNPACK</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-830"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="_gen"><span class="annot"><span class="annottext">forall (v :: * -&gt; *) a. RandomNState v a -&gt; StdGen
</span><a href="Control.Foldl.html#_gen"><span class="hs-identifier hs-var hs-var">_gen</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="hs-pragma">{-# UNPACK</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">StdGen</span></span><span>
</span><span id="line-831"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-832"></span><span>
</span><span id="line-833"></span><span class="hs-comment">-- | Pick several random elements, using reservoir sampling</span><span>
</span><span id="line-834"></span><span id="local-6989586621679084709"><span id="local-6989586621679084710"><span class="annot"><a href="Control.Foldl.html#randomN"><span class="hs-identifier hs-type">randomN</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Vector</span></span><span> </span><span class="annot"><a href="#local-6989586621679084710"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084709"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679084709"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084710"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084709"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-835"></span><span id="randomN"><span class="annot"><span class="annottext">randomN :: forall (v :: * -&gt; *) a.
Vector v a =&gt;
Int -&gt; FoldM IO a (Maybe (v a))
</span><a href="Control.Foldl.html#randomN"><span class="hs-identifier hs-var hs-var">randomN</span></a></span></span><span> </span><span id="local-6989586621679083303"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083303"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b x.
(x -&gt; a -&gt; m x) -&gt; m x -&gt; (x -&gt; m b) -&gt; FoldM m a b
</span><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-var">FoldM</span></a></span><span> </span><span class="annot"><span class="annottext">forall (v :: * -&gt; *) a.
MVector (Mutable v) a =&gt;
RandomNState v a -&gt; a -&gt; IO (RandomNState v a)
</span><a href="#local-6989586621679083302"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">IO (RandomNState v a)
</span><a href="#local-6989586621679083301"><span class="hs-identifier hs-var">begin</span></a></span><span> </span><span class="annot"><span class="annottext">forall (v :: * -&gt; *) a.
Vector v a =&gt;
RandomNState v a -&gt; IO (Maybe (v a))
</span><a href="#local-6989586621679083300"><span class="hs-identifier hs-var">done</span></a></span><span>
</span><span id="line-836"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-837"></span><span>    </span><span id="local-6989586621679084701"><span id="local-6989586621679084702"><span class="annot"><a href="#local-6989586621679083302"><span class="hs-identifier hs-type">step</span></a></span><span>
</span><span id="line-838"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MVector</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Mutable</span></span><span> </span><span class="annot"><a href="#local-6989586621679084702"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679084701"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-839"></span><span>        </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#RandomNState"><span class="hs-identifier hs-type">RandomNState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084702"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084701"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084701"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#RandomNState"><span class="hs-identifier hs-type">RandomNState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084702"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084701"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-840"></span><span>    </span><span id="local-6989586621679083302"><span class="annot"><span class="annottext">step :: forall (v :: * -&gt; *) a.
MVector (Mutable v) a =&gt;
RandomNState v a -&gt; a -&gt; IO (RandomNState v a)
</span><a href="#local-6989586621679083302"><span class="hs-identifier hs-var hs-var">step</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#RandomNState"><span class="hs-identifier hs-type">RandomNState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Incomplete"><span class="hs-identifier hs-type">Incomplete</span></a></span><span> </span><span id="local-6989586621679083283"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083283"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679083282"><span class="annot"><span class="annottext">Mutable v RealWorld a
</span><a href="#local-6989586621679083282"><span class="hs-identifier hs-var">mv</span></a></span></span><span> </span><span id="local-6989586621679083281"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083281"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679083280"><span class="annot"><span class="annottext">StdGen
</span><a href="#local-6989586621679083280"><span class="hs-identifier hs-var">g</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679083279"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083279"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-841"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) (v :: * -&gt; * -&gt; *) a.
(PrimMonad m, MVector v a) =&gt;
v (PrimState m) a -&gt; Int -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">M.write</span></span><span> </span><span class="annot"><span class="annottext">Mutable v RealWorld a
</span><a href="#local-6989586621679083282"><span class="hs-identifier hs-var">mv</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083283"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083279"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-842"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679083275"><span class="annot"><span class="annottext">m' :: Int
</span><a href="#local-6989586621679083275"><span class="hs-identifier hs-var hs-var">m'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083283"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-843"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679083273"><span class="annot"><span class="annottext">s :: VectorState
</span><a href="#local-6989586621679083273"><span class="hs-identifier hs-var hs-var">s</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083303"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083275"><span class="hs-identifier hs-var">m'</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">VectorState
</span><a href="Control.Foldl.html#Complete"><span class="hs-identifier hs-var">Complete</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Int -&gt; VectorState
</span><a href="Control.Foldl.html#Incomplete"><span class="hs-identifier hs-var">Incomplete</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083275"><span class="hs-identifier hs-var">m'</span></a></span><span>
</span><span id="line-844"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">forall (v :: * -&gt; *) a.
VectorState
-&gt; Mutable v RealWorld a -&gt; Int -&gt; StdGen -&gt; RandomNState v a
</span><a href="Control.Foldl.html#RandomNState"><span class="hs-identifier hs-var">RandomNState</span></a></span><span> </span><span class="annot"><span class="annottext">VectorState
</span><a href="#local-6989586621679083273"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Mutable v RealWorld a
</span><a href="#local-6989586621679083282"><span class="hs-identifier hs-var">mv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083281"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">StdGen
</span><a href="#local-6989586621679083280"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-845"></span><span>    </span><span class="annot"><a href="#local-6989586621679083302"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#RandomNState"><span class="hs-identifier hs-type">RandomNState</span></a></span><span>  </span><span class="annot"><span class="annottext">VectorState
</span><a href="Control.Foldl.html#Complete"><span class="hs-identifier hs-var">Complete</span></a></span><span>      </span><span id="local-6989586621679083271"><span class="annot"><span class="annottext">Mutable v RealWorld a
</span><a href="#local-6989586621679083271"><span class="hs-identifier hs-var">mv</span></a></span></span><span> </span><span id="local-6989586621679083270"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083270"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679083269"><span class="annot"><span class="annottext">StdGen
</span><a href="#local-6989586621679083269"><span class="hs-identifier hs-var">g</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679083268"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083268"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-846"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679083262"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083262"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679083261"><span class="annot"><span class="annottext">StdGen
</span><a href="#local-6989586621679083261"><span class="hs-identifier hs-var">g'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall g a. (RandomGen g, UniformRange a) =&gt; (a, a) -&gt; g -&gt; (a, g)
</span><span class="hs-identifier hs-var">uniformR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083270"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">StdGen
</span><a href="#local-6989586621679083269"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-847"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083262"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083303"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-848"></span><span>            </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) (v :: * -&gt; * -&gt; *) a.
(PrimMonad m, MVector v a) =&gt;
v (PrimState m) a -&gt; Int -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">M.unsafeWrite</span></span><span> </span><span class="annot"><span class="annottext">Mutable v RealWorld a
</span><a href="#local-6989586621679083271"><span class="hs-identifier hs-var">mv</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083262"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083268"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-849"></span><span>            </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-850"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (v :: * -&gt; *) a.
VectorState
-&gt; Mutable v RealWorld a -&gt; Int -&gt; StdGen -&gt; RandomNState v a
</span><a href="Control.Foldl.html#RandomNState"><span class="hs-identifier hs-var">RandomNState</span></a></span><span> </span><span class="annot"><span class="annottext">VectorState
</span><a href="Control.Foldl.html#Complete"><span class="hs-identifier hs-var">Complete</span></a></span><span> </span><span class="annot"><span class="annottext">Mutable v RealWorld a
</span><a href="#local-6989586621679083271"><span class="hs-identifier hs-var">mv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083270"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">StdGen
</span><a href="#local-6989586621679083261"><span class="hs-identifier hs-var">g'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-851"></span><span>
</span><span id="line-852"></span><span>    </span><span id="local-6989586621679083301"><span class="annot"><span class="annottext">begin :: IO (RandomNState v a)
</span><a href="#local-6989586621679083301"><span class="hs-identifier hs-var hs-var">begin</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-853"></span><span>        </span><span id="local-6989586621679083253"><span class="annot"><span class="annottext">Mutable v (PrimState IO) a
</span><a href="#local-6989586621679083253"><span class="hs-identifier hs-var">mv</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) (v :: * -&gt; * -&gt; *) a.
(PrimMonad m, MVector v a) =&gt;
Int -&gt; m (v (PrimState m) a)
</span><span class="hs-identifier hs-var">M.new</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083303"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-854"></span><span>        </span><span id="local-6989586621679083251"><span class="annot"><span class="annottext">StdGen
</span><a href="#local-6989586621679083251"><span class="hs-identifier hs-var">gen</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). MonadIO m =&gt; m StdGen
</span><span class="hs-identifier hs-var">newStdGen</span></span><span>
</span><span id="line-855"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679083248"><span class="annot"><span class="annottext">s :: VectorState
</span><a href="#local-6989586621679083248"><span class="hs-identifier hs-var hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083303"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">VectorState
</span><a href="Control.Foldl.html#Complete"><span class="hs-identifier hs-var">Complete</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Int -&gt; VectorState
</span><a href="Control.Foldl.html#Incomplete"><span class="hs-identifier hs-var">Incomplete</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-856"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (v :: * -&gt; *) a.
VectorState
-&gt; Mutable v RealWorld a -&gt; Int -&gt; StdGen -&gt; RandomNState v a
</span><a href="Control.Foldl.html#RandomNState"><span class="hs-identifier hs-var">RandomNState</span></a></span><span> </span><span class="annot"><span class="annottext">VectorState
</span><a href="#local-6989586621679083248"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Mutable v (PrimState IO) a
</span><a href="#local-6989586621679083253"><span class="hs-identifier hs-var">mv</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">StdGen
</span><a href="#local-6989586621679083251"><span class="hs-identifier hs-var">gen</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-857"></span><span>
</span><span id="line-858"></span><span>    </span><span id="local-6989586621679084699"><span id="local-6989586621679084700"><span class="annot"><a href="#local-6989586621679083300"><span class="hs-identifier hs-type">done</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Vector</span></span><span> </span><span class="annot"><a href="#local-6989586621679084700"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084699"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#RandomNState"><span class="hs-identifier hs-type">RandomNState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084700"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084699"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084700"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084699"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-859"></span><span>    </span><span id="local-6989586621679083300"><span class="annot"><span class="annottext">done :: forall (v :: * -&gt; *) a.
Vector v a =&gt;
RandomNState v a -&gt; IO (Maybe (v a))
</span><a href="#local-6989586621679083300"><span class="hs-identifier hs-var hs-var">done</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#RandomNState"><span class="hs-identifier hs-type">RandomNState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Incomplete"><span class="hs-identifier hs-type">Incomplete</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Mutable v RealWorld a
</span><span class="hs-identifier">_</span></span><span>  </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">StdGen
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-860"></span><span>    </span><span class="annot"><a href="#local-6989586621679083300"><span class="hs-identifier hs-var">done</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#RandomNState"><span class="hs-identifier hs-type">RandomNState</span></a></span><span>  </span><span class="annot"><span class="annottext">VectorState
</span><a href="Control.Foldl.html#Complete"><span class="hs-identifier hs-var">Complete</span></a></span><span>      </span><span id="local-6989586621679083241"><span class="annot"><span class="annottext">Mutable v RealWorld a
</span><a href="#local-6989586621679083241"><span class="hs-identifier hs-var">mv</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">StdGen
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-861"></span><span>        </span><span id="local-6989586621679083240"><span class="annot"><span class="annottext">v a
</span><a href="#local-6989586621679083240"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) (v :: * -&gt; *) a.
(PrimMonad m, Vector v a) =&gt;
Mutable v (PrimState m) a -&gt; m (v a)
</span><span class="hs-identifier hs-var">V.freeze</span></span><span> </span><span class="annot"><span class="annottext">Mutable v RealWorld a
</span><a href="#local-6989586621679083241"><span class="hs-identifier hs-var">mv</span></a></span><span>
</span><span id="line-862"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">v a
</span><a href="#local-6989586621679083240"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-863"></span><span>
</span><span id="line-864"></span><span class="hs-comment">-- | Converts an effectful function to a fold. Specialized version of 'sink'.</span><span>
</span><span id="line-865"></span><span id="local-6989586621679084682"><span id="local-6989586621679084683"><span class="annot"><a href="Control.Foldl.html#mapM_"><span class="hs-identifier hs-type">mapM_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679084683"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084682"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084683"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084683"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084682"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-866"></span><span id="mapM_"><span class="annot"><span class="annottext">mapM_ :: forall (m :: * -&gt; *) a. Monad m =&gt; (a -&gt; m ()) -&gt; FoldM m a ()
</span><a href="Control.Foldl.html#mapM_"><span class="hs-identifier hs-var hs-var">mapM_</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall w (m :: * -&gt; *) a.
(Monoid w, Monad m) =&gt;
(a -&gt; m w) -&gt; FoldM m a w
</span><a href="Control.Foldl.html#sink"><span class="hs-identifier hs-var">sink</span></a></span><span>
</span><span id="line-867"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#mapM_"><span class="hs-pragma hs-type">mapM_</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-868"></span><span>
</span><span id="line-869"></span><span class="hs-comment">{-| Converts an effectful function to a fold

&gt; sink (f &lt;&gt; g) = sink f &lt;&gt; sink g -- if `(&lt;&gt;)` is commutative
&gt; sink mempty = mempty
-}</span><span>
</span><span id="line-874"></span><span>
</span><span id="line-875"></span><span>
</span><span id="line-876"></span><span id="local-6989586621679084678"><span id="local-6989586621679084679"><span id="local-6989586621679084680"><span class="annot"><a href="Control.Foldl.html#sink"><span class="hs-identifier hs-type">sink</span></a></span><span> </span><span class="hs-glyph">::</span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679084680"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679084679"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084678"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084679"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084680"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084679"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084678"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084680"><span class="hs-identifier hs-type">w</span></a></span></span></span></span><span>
</span><span id="line-877"></span><span id="sink"><span class="annot"><span class="annottext">sink :: forall w (m :: * -&gt; *) a.
(Monoid w, Monad m) =&gt;
(a -&gt; m w) -&gt; FoldM m a w
</span><a href="Control.Foldl.html#sink"><span class="hs-identifier hs-var hs-var">sink</span></a></span></span><span> </span><span id="local-6989586621679083232"><span class="annot"><span class="annottext">a -&gt; m w
</span><a href="#local-6989586621679083232"><span class="hs-identifier hs-var">act</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b x.
(x -&gt; a -&gt; m x) -&gt; m x -&gt; (x -&gt; m b) -&gt; FoldM m a b
</span><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-var">FoldM</span></a></span><span> </span><span class="annot"><span class="annottext">w -&gt; a -&gt; m w
</span><a href="#local-6989586621679083231"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">m w
</span><a href="#local-6989586621679083230"><span class="hs-identifier hs-var">begin</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a}. a -&gt; m a
</span><a href="#local-6989586621679083229"><span class="hs-identifier hs-var">done</span></a></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-878"></span><span>  </span><span id="local-6989586621679083229"><span class="annot"><span class="annottext">done :: a -&gt; m a
</span><a href="#local-6989586621679083229"><span class="hs-identifier hs-var hs-var">done</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span>
</span><span id="line-879"></span><span>  </span><span id="local-6989586621679083230"><span class="annot"><span class="annottext">begin :: m w
</span><a href="#local-6989586621679083230"><span class="hs-identifier hs-var hs-var">begin</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-880"></span><span>  </span><span id="local-6989586621679083231"><span class="annot"><span class="annottext">step :: w -&gt; a -&gt; m w
</span><a href="#local-6989586621679083231"><span class="hs-identifier hs-var hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679083222"><span class="annot"><span class="annottext">w
</span><a href="#local-6989586621679083222"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621679083221"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083221"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-881"></span><span>    </span><span id="local-6989586621679083220"><span class="annot"><span class="annottext">w
</span><a href="#local-6989586621679083220"><span class="hs-identifier hs-var">m'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">a -&gt; m w
</span><a href="#local-6989586621679083232"><span class="hs-identifier hs-var">act</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083221"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-882"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">mappend</span></span><span> </span><span class="annot"><span class="annottext">w
</span><a href="#local-6989586621679083222"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">w
</span><a href="#local-6989586621679083220"><span class="hs-identifier hs-var">m'</span></a></span><span>
</span><span id="line-883"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#sink"><span class="hs-pragma hs-type">sink</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-884"></span><span>
</span><span id="line-885"></span><span class="hs-comment">-- | Like 'length', except with a more general 'Num' return value</span><span>
</span><span id="line-886"></span><span id="local-6989586621679084795"><span id="local-6989586621679084796"><span class="annot"><a href="Control.Foldl.html#genericLength"><span class="hs-identifier hs-type">genericLength</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="annot"><a href="#local-6989586621679084796"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084795"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084796"><span class="hs-identifier hs-type">b</span></a></span></span></span><span>
</span><span id="line-887"></span><span id="genericLength"><span class="annot"><span class="annottext">genericLength :: forall b a. Num b =&gt; Fold a b
</span><a href="Control.Foldl.html#genericLength"><span class="hs-identifier hs-var hs-var">genericLength</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679083215"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679083215"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679083215"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">b
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">b
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-888"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#genericLength"><span class="hs-pragma hs-type">genericLength</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-889"></span><span>
</span><span id="line-890"></span><span class="hs-comment">-- | Like 'index', except with a more general 'Integral' argument</span><span>
</span><span id="line-891"></span><span id="local-6989586621679084756"><span id="local-6989586621679084757"><span class="annot"><a href="Control.Foldl.html#genericIndex"><span class="hs-identifier hs-type">genericIndex</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integral</span></span><span> </span><span class="annot"><a href="#local-6989586621679084757"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084757"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084756"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679084756"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-892"></span><span id="genericIndex"><span class="annot"><span class="annottext">genericIndex :: forall i a. Integral i =&gt; i -&gt; Fold a (Maybe a)
</span><a href="Control.Foldl.html#genericIndex"><span class="hs-identifier hs-var hs-var">genericIndex</span></a></span></span><span> </span><span id="local-6989586621679083204"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679083204"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">forall {b}. Either' i b -&gt; b -&gt; Either' i b
</span><a href="#local-6989586621679083203"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. a -&gt; Either' a b
</span><a href="Control.Foldl.Internal.html#Left%27"><span class="hs-identifier hs-var">Left'</span></a></span><span> </span><span class="annot"><span class="annottext">i
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. Either' a b -&gt; Maybe b
</span><a href="#local-6989586621679083202"><span class="hs-identifier hs-var">done</span></a></span><span>
</span><span id="line-893"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-894"></span><span>    </span><span id="local-6989586621679083203"><span class="annot"><span class="annottext">step :: Either' i b -&gt; b -&gt; Either' i b
</span><a href="#local-6989586621679083203"><span class="hs-identifier hs-var hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679083198"><span class="annot"><span class="annottext">Either' i b
</span><a href="#local-6989586621679083198"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679083197"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679083197"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either' i b
</span><a href="#local-6989586621679083198"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-895"></span><span>        </span><span class="annot"><a href="Control.Foldl.Internal.html#Left%27"><span class="hs-identifier hs-type">Left'</span></a></span><span>  </span><span id="local-6989586621679083196"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679083196"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679083204"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679083196"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall a b. b -&gt; Either' a b
</span><a href="Control.Foldl.Internal.html#Right%27"><span class="hs-identifier hs-var">Right'</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679083197"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either' a b
</span><a href="Control.Foldl.Internal.html#Left%27"><span class="hs-identifier hs-var">Left'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679083196"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">i
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-896"></span><span>        </span><span class="annot"><span class="annottext">Either' i b
</span><span class="hs-identifier">_</span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either' i b
</span><a href="#local-6989586621679083198"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-897"></span><span>    </span><span id="local-6989586621679083202"><span class="annot"><span class="annottext">done :: Either' a a -&gt; Maybe a
</span><a href="#local-6989586621679083202"><span class="hs-identifier hs-var hs-var">done</span></a></span></span><span> </span><span id="local-6989586621679083195"><span class="annot"><span class="annottext">Either' a a
</span><a href="#local-6989586621679083195"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either' a a
</span><a href="#local-6989586621679083195"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-898"></span><span>        </span><span class="annot"><a href="Control.Foldl.Internal.html#Left%27"><span class="hs-identifier hs-type">Left'</span></a></span><span>  </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-899"></span><span>        </span><span class="annot"><a href="Control.Foldl.Internal.html#Right%27"><span class="hs-identifier hs-type">Right'</span></a></span><span> </span><span id="local-6989586621679083194"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083194"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083194"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-900"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#genericIndex"><span class="hs-pragma hs-type">genericIndex</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-901"></span><span>
</span><span id="line-902"></span><span class="hs-comment">-- | Fold all values into a list</span><span>
</span><span id="line-903"></span><span id="local-6989586621679084665"><span class="annot"><a href="Control.Foldl.html#list"><span class="hs-identifier hs-type">list</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084665"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679084665"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-904"></span><span id="list"><span class="annot"><span class="annottext">list :: forall a. Fold a [a]
</span><a href="Control.Foldl.html#list"><span class="hs-identifier hs-var hs-var">list</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679083193"><span class="annot"><span class="annottext">[a] -&gt; [a]
</span><a href="#local-6989586621679083193"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679083192"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083192"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [a]
</span><a href="#local-6989586621679083193"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083192"><span class="hs-identifier hs-var">a</span></a></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-905"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#list"><span class="hs-pragma hs-type">list</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-906"></span><span>
</span><span id="line-907"></span><span class="hs-comment">-- | Fold all values into a list, in reverse order</span><span>
</span><span id="line-908"></span><span id="local-6989586621679083191"><span class="annot"><a href="Control.Foldl.html#revList"><span class="hs-identifier hs-type">revList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083191"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679083191"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-909"></span><span id="revList"><span class="annot"><span class="annottext">revList :: forall a. Fold a [a]
</span><a href="Control.Foldl.html#revList"><span class="hs-identifier hs-var hs-var">revList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679083190"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679083190"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679083189"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083189"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083189"><span class="hs-identifier hs-var">a</span></a></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679083190"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-910"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#revList"><span class="hs-pragma hs-type">revList</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-911"></span><span>
</span><span id="line-912"></span><span class="hs-comment">{-| /O(n log n)/.  Fold values into a list with duplicates removed, while
    preserving their first occurrences
-}</span><span>
</span><span id="line-915"></span><span id="local-6989586621679084662"><span class="annot"><a href="Control.Foldl.html#nub"><span class="hs-identifier hs-type">nub</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679084662"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084662"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679084662"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-916"></span><span id="nub"><span class="annot"><span class="annottext">nub :: forall a. Ord a =&gt; Fold a [a]
</span><a href="Control.Foldl.html#nub"><span class="hs-identifier hs-var hs-var">nub</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a} {c}.
Ord a =&gt;
Pair (Set a) ([a] -&gt; c) -&gt; a -&gt; Pair (Set a) ([a] -&gt; c)
</span><a href="#local-6989586621679083186"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; Pair a b
</span><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-var">Pair</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall {a} {a} {t}. Pair a ([a] -&gt; t) -&gt; t
</span><a href="#local-6989586621679083184"><span class="hs-identifier hs-var">fin</span></a></span><span>
</span><span id="line-917"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-918"></span><span>    </span><span id="local-6989586621679083186"><span class="annot"><span class="annottext">step :: Pair (Set a) ([a] -&gt; c) -&gt; a -&gt; Pair (Set a) ([a] -&gt; c)
</span><a href="#local-6989586621679083186"><span class="hs-identifier hs-var hs-var">step</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span id="local-6989586621679083180"><span class="annot"><span class="annottext">Set a
</span><a href="#local-6989586621679083180"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621679083179"><span class="annot"><span class="annottext">[a] -&gt; c
</span><a href="#local-6989586621679083179"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679083178"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083178"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><span class="hs-identifier hs-var">Set.member</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083178"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Set a
</span><a href="#local-6989586621679083180"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-919"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; Pair a b
</span><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-var">Pair</span></a></span><span> </span><span class="annot"><span class="annottext">Set a
</span><a href="#local-6989586621679083180"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; c
</span><a href="#local-6989586621679083179"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-920"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; Pair a b
</span><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-var">Pair</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.insert</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083178"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Set a
</span><a href="#local-6989586621679083180"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[a] -&gt; c
</span><a href="#local-6989586621679083179"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083178"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-921"></span><span>    </span><span id="local-6989586621679083184"><span class="annot"><span class="annottext">fin :: Pair a ([a] -&gt; t) -&gt; t
</span><a href="#local-6989586621679083184"><span class="hs-identifier hs-var hs-var">fin</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679083175"><span class="annot"><span class="annottext">[a] -&gt; t
</span><a href="#local-6989586621679083175"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; t
</span><a href="#local-6989586621679083175"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-922"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#nub"><span class="hs-pragma hs-type">nub</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-923"></span><span>
</span><span id="line-924"></span><span class="hs-comment">{-| /O(n^2)/.  Fold values into a list with duplicates removed, while preserving
    their first occurrences
-}</span><span>
</span><span id="line-927"></span><span id="local-6989586621679084651"><span class="annot"><a href="Control.Foldl.html#eqNub"><span class="hs-identifier hs-type">eqNub</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679084651"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084651"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679084651"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-928"></span><span id="eqNub"><span class="annot"><span class="annottext">eqNub :: forall a. Eq a =&gt; Fold a [a]
</span><a href="Control.Foldl.html#eqNub"><span class="hs-identifier hs-var hs-var">eqNub</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a} {c}.
Eq a =&gt;
Pair [a] ([a] -&gt; c) -&gt; a -&gt; Pair [a] ([a] -&gt; c)
</span><a href="#local-6989586621679083172"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; Pair a b
</span><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-var">Pair</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall {a} {a} {t}. Pair a ([a] -&gt; t) -&gt; t
</span><a href="#local-6989586621679083171"><span class="hs-identifier hs-var">fin</span></a></span><span>
</span><span id="line-929"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-930"></span><span>    </span><span id="local-6989586621679083172"><span class="annot"><span class="annottext">step :: Pair [a] ([a] -&gt; c) -&gt; a -&gt; Pair [a] ([a] -&gt; c)
</span><a href="#local-6989586621679083172"><span class="hs-identifier hs-var hs-var">step</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span id="local-6989586621679083167"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679083167"><span class="hs-identifier hs-var">known</span></a></span></span><span> </span><span id="local-6989586621679083166"><span class="annot"><span class="annottext">[a] -&gt; c
</span><a href="#local-6989586621679083166"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679083165"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083165"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">List.elem</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083165"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679083167"><span class="hs-identifier hs-var">known</span></a></span><span>
</span><span id="line-931"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; Pair a b
</span><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-var">Pair</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679083167"><span class="hs-identifier hs-var">known</span></a></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; c
</span><a href="#local-6989586621679083166"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-932"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; Pair a b
</span><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-var">Pair</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083165"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679083167"><span class="hs-identifier hs-var">known</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[a] -&gt; c
</span><a href="#local-6989586621679083166"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083165"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-933"></span><span>    </span><span id="local-6989586621679083171"><span class="annot"><span class="annottext">fin :: Pair a ([a] -&gt; t) -&gt; t
</span><a href="#local-6989586621679083171"><span class="hs-identifier hs-var hs-var">fin</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679083164"><span class="annot"><span class="annottext">[a] -&gt; t
</span><a href="#local-6989586621679083164"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; t
</span><a href="#local-6989586621679083164"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-934"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#eqNub"><span class="hs-pragma hs-type">eqNub</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-935"></span><span>
</span><span id="line-936"></span><span class="hs-comment">-- | Fold values into a set</span><span>
</span><span id="line-937"></span><span id="local-6989586621679084643"><span class="annot"><a href="Control.Foldl.html#set"><span class="hs-identifier hs-type">set</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679084643"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084643"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set.Set</span></span><span> </span><span class="annot"><a href="#local-6989586621679084643"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-938"></span><span id="set"><span class="annot"><span class="annottext">set :: forall a. Ord a =&gt; Fold a (Set a)
</span><a href="Control.Foldl.html#set"><span class="hs-identifier hs-var hs-var">set</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.insert</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-939"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#set"><span class="hs-pragma hs-type">set</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-940"></span><span>
</span><span id="line-941"></span><span class="hs-comment">-- | Fold values into a hash-set</span><span>
</span><span id="line-942"></span><span id="local-6989586621679084641"><span class="annot"><a href="Control.Foldl.html#hashSet"><span class="hs-identifier hs-type">hashSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679084641"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="#local-6989586621679084641"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084641"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HashSet.HashSet</span></span><span> </span><span class="annot"><a href="#local-6989586621679084641"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-943"></span><span id="hashSet"><span class="annot"><span class="annottext">hashSet :: forall a. (Eq a, Hashable a) =&gt; Fold a (HashSet a)
</span><a href="Control.Foldl.html#hashSet"><span class="hs-identifier hs-var hs-var">hashSet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">forall a. (Eq a, Hashable a) =&gt; a -&gt; HashSet a -&gt; HashSet a
</span><span class="hs-identifier hs-var">HashSet.insert</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. HashSet a
</span><span class="hs-identifier hs-var">HashSet.empty</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-944"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#hashSet"><span class="hs-pragma hs-type">hashSet</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-945"></span><span>
</span><span id="line-946"></span><span class="hs-comment">{-|
Fold pairs into a map.
-}</span><span>
</span><span id="line-949"></span><span id="local-6989586621679084634"><span id="local-6989586621679084635"><span class="annot"><a href="Control.Foldl.html#map"><span class="hs-identifier hs-type">map</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679084635"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084635"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679084634"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map.Map</span></span><span> </span><span class="annot"><a href="#local-6989586621679084635"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084634"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-950"></span><span id="map"><span class="annot"><span class="annottext">map :: forall a b. Ord a =&gt; Fold (a, b) (Map a b)
</span><a href="Control.Foldl.html#map"><span class="hs-identifier hs-var hs-var">map</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">forall {k} {a}. Ord k =&gt; Map k a -&gt; (k, a) -&gt; Map k a
</span><a href="#local-6989586621679083153"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">Map a b
</span><a href="#local-6989586621679083152"><span class="hs-identifier hs-var">begin</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><a href="#local-6989586621679083151"><span class="hs-identifier hs-var">done</span></a></span><span>
</span><span id="line-951"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-952"></span><span>    </span><span id="local-6989586621679083152"><span class="annot"><span class="annottext">begin :: Map a b
</span><a href="#local-6989586621679083152"><span class="hs-identifier hs-var hs-var">begin</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-953"></span><span>    </span><span id="local-6989586621679083153"><span class="annot"><span class="annottext">step :: Map k a -&gt; (k, a) -&gt; Map k a
</span><a href="#local-6989586621679083153"><span class="hs-identifier hs-var hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679083146"><span class="annot"><span class="annottext">Map k a
</span><a href="#local-6989586621679083146"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679083145"><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679083145"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679083144"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083144"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679083145"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083144"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Map k a
</span><a href="#local-6989586621679083146"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-954"></span><span>    </span><span id="local-6989586621679083151"><span class="annot"><span class="annottext">done :: a -&gt; a
</span><a href="#local-6989586621679083151"><span class="hs-identifier hs-var hs-var">done</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-955"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#map"><span class="hs-pragma hs-type">map</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-956"></span><span>
</span><span id="line-957"></span><span>
</span><span id="line-958"></span><span class="hs-comment">{- | Given a 'Fold', produces a 'Map' which applies that fold to each @a@ separated by key @k@.

&gt;&gt;&gt; fold (foldByKeyMap Control.Foldl.sum) [(&quot;a&quot;,1), (&quot;b&quot;,2), (&quot;b&quot;,20), (&quot;a&quot;,10)]
fromList [(&quot;a&quot;,11),(&quot;b&quot;,22)]
-}</span><span>
</span><span id="line-963"></span><span class="annot"><a href="Control.Foldl.html#foldByKeyMap"><span class="hs-identifier hs-type">foldByKeyMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084623"><span class="annot"><a href="#local-6989586621679084623"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span id="local-6989586621679084622"><span class="annot"><a href="#local-6989586621679084622"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679084621"><span class="annot"><a href="#local-6989586621679084621"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679084623"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084622"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084621"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084623"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679084622"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="#local-6989586621679084623"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084621"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-964"></span><span id="foldByKeyMap"><span class="annot"><span class="annottext">foldByKeyMap :: forall k a b. Ord k =&gt; Fold a b -&gt; Fold (k, a) (Map k b)
</span><a href="Control.Foldl.html#foldByKeyMap"><span class="hs-identifier hs-var hs-var">foldByKeyMap</span></a></span></span><span> </span><span id="local-6989586621679083141"><span class="annot"><span class="annottext">Fold a b
</span><a href="#local-6989586621679083141"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Fold a b
</span><a href="#local-6989586621679083141"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-965"></span><span>  </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679083137"><span id="local-6989586621679083136"><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679083136"><span class="hs-identifier hs-var">step0</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679083137"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084622"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679083137"><span class="hs-identifier hs-type">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679083135"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083135"><span class="hs-identifier hs-var">ini0</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679083137"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679083134"><span class="annot"><span class="annottext">x -&gt; b
</span><a href="#local-6989586621679083134"><span class="hs-identifier hs-var">end0</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679083137"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084621"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-966"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-967"></span><span>      </span><span class="annot"><a href="#local-6989586621679083133"><span class="hs-identifier hs-type">step</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="#local-6989586621679084623"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083137"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084623"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679084622"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="#local-6989586621679084623"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083137"><span class="hs-identifier hs-type">x</span></a></span><span>
</span><span id="line-968"></span><span>      </span><span id="local-6989586621679083133"><span class="annot"><span class="annottext">step :: Map k x -&gt; (k, a) -&gt; Map k x
</span><a href="#local-6989586621679083133"><span class="hs-identifier hs-var hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679083132"><span class="annot"><span class="annottext">Map k x
</span><a href="#local-6989586621679083132"><span class="hs-identifier hs-var">mp</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679083131"><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679083131"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679083130"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083130"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k a.
Ord k =&gt;
(Maybe a -&gt; Maybe a) -&gt; k -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.alter</span></span><span> </span><span class="annot"><span class="annottext">Maybe x -&gt; Maybe x
</span><a href="#local-6989586621679083129"><span class="hs-identifier hs-var">addToMap</span></a></span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679083131"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Map k x
</span><a href="#local-6989586621679083132"><span class="hs-identifier hs-var">mp</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-969"></span><span>        </span><span id="local-6989586621679083129"><span class="annot"><span class="annottext">addToMap :: Maybe x -&gt; Maybe x
</span><a href="#local-6989586621679083129"><span class="hs-identifier hs-var hs-var">addToMap</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe x
</span><span class="hs-identifier hs-var">Nothing</span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679083136"><span class="hs-identifier hs-var">step0</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083135"><span class="hs-identifier hs-var">ini0</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083130"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-970"></span><span>        </span><span class="annot"><a href="#local-6989586621679083129"><span class="hs-identifier hs-var">addToMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679083128"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083128"><span class="hs-identifier hs-var">existing</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679083136"><span class="hs-identifier hs-var">step0</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083128"><span class="hs-identifier hs-var">existing</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083130"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-971"></span><span>
</span><span id="line-972"></span><span>      </span><span class="annot"><a href="#local-6989586621679083127"><span class="hs-identifier hs-type">ini</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="#local-6989586621679084623"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083137"><span class="hs-identifier hs-type">x</span></a></span><span>
</span><span id="line-973"></span><span>      </span><span id="local-6989586621679083127"><span class="annot"><span class="annottext">ini :: Map k x
</span><a href="#local-6989586621679083127"><span class="hs-identifier hs-var hs-var">ini</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span>
</span><span id="line-974"></span><span>
</span><span id="line-975"></span><span>      </span><span class="annot"><a href="#local-6989586621679083125"><span class="hs-identifier hs-type">end</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="#local-6989586621679084623"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083137"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="#local-6989586621679084623"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084621"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-976"></span><span>      </span><span id="local-6989586621679083125"><span class="annot"><span class="annottext">end :: Map k x -&gt; Map k b
</span><a href="#local-6989586621679083125"><span class="hs-identifier hs-var hs-var">end</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; b
</span><a href="#local-6989586621679083134"><span class="hs-identifier hs-var">end0</span></a></span><span>
</span><span id="line-977"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">Map k x -&gt; (k, a) -&gt; Map k x
</span><a href="#local-6989586621679083133"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">Map k x
</span><a href="#local-6989586621679083127"><span class="hs-identifier hs-var">ini</span></a></span><span> </span><span class="annot"><span class="annottext">Map k x -&gt; Map k b
</span><a href="#local-6989586621679083125"><span class="hs-identifier hs-var">end</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-978"></span><span>
</span><span id="line-979"></span><span class="hs-comment">{-|
Fold pairs into a hash-map.
-}</span><span>
</span><span id="line-982"></span><span id="local-6989586621679084610"><span id="local-6989586621679084611"><span class="annot"><a href="Control.Foldl.html#hashMap"><span class="hs-identifier hs-type">hashMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679084611"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="#local-6989586621679084611"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084611"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679084610"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HashMap.HashMap</span></span><span> </span><span class="annot"><a href="#local-6989586621679084611"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084610"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-983"></span><span id="hashMap"><span class="annot"><span class="annottext">hashMap :: forall a b. (Eq a, Hashable a) =&gt; Fold (a, b) (HashMap a b)
</span><a href="Control.Foldl.html#hashMap"><span class="hs-identifier hs-var hs-var">hashMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">forall {k} {v}. Hashable k =&gt; HashMap k v -&gt; (k, v) -&gt; HashMap k v
</span><a href="#local-6989586621679083121"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap a b
</span><a href="#local-6989586621679083120"><span class="hs-identifier hs-var">begin</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><a href="#local-6989586621679083119"><span class="hs-identifier hs-var">done</span></a></span><span>
</span><span id="line-984"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-985"></span><span>    </span><span id="local-6989586621679083120"><span class="annot"><span class="annottext">begin :: HashMap a b
</span><a href="#local-6989586621679083120"><span class="hs-identifier hs-var hs-var">begin</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-986"></span><span>    </span><span id="local-6989586621679083121"><span class="annot"><span class="annottext">step :: HashMap k v -&gt; (k, v) -&gt; HashMap k v
</span><a href="#local-6989586621679083121"><span class="hs-identifier hs-var hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679083111"><span class="annot"><span class="annottext">HashMap k v
</span><a href="#local-6989586621679083111"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679083110"><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679083110"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679083109"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679083109"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k v.
(Eq k, Hashable k) =&gt;
k -&gt; v -&gt; HashMap k v -&gt; HashMap k v
</span><span class="hs-identifier hs-var">HashMap.insert</span></span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679083110"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679083109"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap k v
</span><a href="#local-6989586621679083111"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-987"></span><span>    </span><span id="local-6989586621679083119"><span class="annot"><span class="annottext">done :: a -&gt; a
</span><a href="#local-6989586621679083119"><span class="hs-identifier hs-var hs-var">done</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-988"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#hashMap"><span class="hs-pragma hs-type">hashMap</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-989"></span><span>
</span><span id="line-990"></span><span class="hs-comment">{- | Given a 'Fold', produces a 'HashMap' which applies that fold to each @a@ separated by key @k@.

&gt;&gt;&gt; List.sort (HashMap.toList (fold (foldByKeyHashMap Control.Foldl.sum) [(&quot;a&quot;,1), (&quot;b&quot;,2), (&quot;b&quot;,20), (&quot;a&quot;,10)]))
[(&quot;a&quot;,11),(&quot;b&quot;,22)]
-}</span><span>
</span><span id="line-995"></span><span class="annot"><a href="Control.Foldl.html#foldByKeyHashMap"><span class="hs-identifier hs-type">foldByKeyHashMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084598"><span class="annot"><a href="#local-6989586621679084598"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span id="local-6989586621679084597"><span class="annot"><a href="#local-6989586621679084597"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679084596"><span class="annot"><a href="#local-6989586621679084596"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="#local-6989586621679084598"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679084598"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084597"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084596"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084598"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679084597"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HashMap</span></span><span> </span><span class="annot"><a href="#local-6989586621679084598"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084596"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-996"></span><span id="foldByKeyHashMap"><span class="annot"><span class="annottext">foldByKeyHashMap :: forall k a b.
(Hashable k, Eq k) =&gt;
Fold a b -&gt; Fold (k, a) (HashMap k b)
</span><a href="Control.Foldl.html#foldByKeyHashMap"><span class="hs-identifier hs-var hs-var">foldByKeyHashMap</span></a></span></span><span> </span><span id="local-6989586621679083105"><span class="annot"><span class="annottext">Fold a b
</span><a href="#local-6989586621679083105"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Fold a b
</span><a href="#local-6989586621679083105"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-997"></span><span>  </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679083100"><span id="local-6989586621679083099"><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679083099"><span class="hs-identifier hs-var">step0</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679083100"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084597"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679083100"><span class="hs-identifier hs-type">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679083098"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083098"><span class="hs-identifier hs-var">ini0</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679083100"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679083097"><span class="annot"><span class="annottext">x -&gt; b
</span><a href="#local-6989586621679083097"><span class="hs-identifier hs-var">end0</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679083100"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084596"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-998"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-999"></span><span>      </span><span class="annot"><a href="#local-6989586621679083096"><span class="hs-identifier hs-type">step</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashMap</span></span><span> </span><span class="annot"><a href="#local-6989586621679084598"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083100"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084598"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679084597"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashMap</span></span><span> </span><span class="annot"><a href="#local-6989586621679084598"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083100"><span class="hs-identifier hs-type">x</span></a></span><span>
</span><span id="line-1000"></span><span>      </span><span id="local-6989586621679083096"><span class="annot"><span class="annottext">step :: HashMap k x -&gt; (k, a) -&gt; HashMap k x
</span><a href="#local-6989586621679083096"><span class="hs-identifier hs-var hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679083095"><span class="annot"><span class="annottext">HashMap k x
</span><a href="#local-6989586621679083095"><span class="hs-identifier hs-var">mp</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679083094"><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679083094"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679083093"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083093"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k v.
(Eq k, Hashable k) =&gt;
(Maybe v -&gt; Maybe v) -&gt; k -&gt; HashMap k v -&gt; HashMap k v
</span><span class="hs-identifier hs-var">HashMap.alter</span></span><span> </span><span class="annot"><span class="annottext">Maybe x -&gt; Maybe x
</span><a href="#local-6989586621679083091"><span class="hs-identifier hs-var">addToHashMap</span></a></span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679083094"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap k x
</span><a href="#local-6989586621679083095"><span class="hs-identifier hs-var">mp</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1001"></span><span>        </span><span id="local-6989586621679083091"><span class="annot"><span class="annottext">addToHashMap :: Maybe x -&gt; Maybe x
</span><a href="#local-6989586621679083091"><span class="hs-identifier hs-var hs-var">addToHashMap</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe x
</span><span class="hs-identifier hs-var">Nothing</span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679083099"><span class="hs-identifier hs-var">step0</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083098"><span class="hs-identifier hs-var">ini0</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083093"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-1002"></span><span>        </span><span class="annot"><a href="#local-6989586621679083091"><span class="hs-identifier hs-var">addToHashMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679083090"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083090"><span class="hs-identifier hs-var">existing</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679083099"><span class="hs-identifier hs-var">step0</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083090"><span class="hs-identifier hs-var">existing</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083093"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-1003"></span><span>
</span><span id="line-1004"></span><span>      </span><span class="annot"><a href="#local-6989586621679083089"><span class="hs-identifier hs-type">ini</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashMap</span></span><span> </span><span class="annot"><a href="#local-6989586621679084598"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083100"><span class="hs-identifier hs-type">x</span></a></span><span>
</span><span id="line-1005"></span><span>      </span><span id="local-6989586621679083089"><span class="annot"><span class="annottext">ini :: HashMap k x
</span><a href="#local-6989586621679083089"><span class="hs-identifier hs-var hs-var">ini</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k v. HashMap k v
</span><span class="hs-identifier hs-var">HashMap.empty</span></span><span>
</span><span id="line-1006"></span><span>
</span><span id="line-1007"></span><span>      </span><span class="annot"><a href="#local-6989586621679083087"><span class="hs-identifier hs-type">end</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashMap</span></span><span> </span><span class="annot"><a href="#local-6989586621679084598"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679083100"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashMap</span></span><span> </span><span class="annot"><a href="#local-6989586621679084598"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084596"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-1008"></span><span>      </span><span id="local-6989586621679083087"><span class="annot"><span class="annottext">end :: HashMap k x -&gt; HashMap k b
</span><a href="#local-6989586621679083087"><span class="hs-identifier hs-var hs-var">end</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; b
</span><a href="#local-6989586621679083097"><span class="hs-identifier hs-var">end0</span></a></span><span>
</span><span id="line-1009"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap k x -&gt; (k, a) -&gt; HashMap k x
</span><a href="#local-6989586621679083096"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap k x
</span><a href="#local-6989586621679083089"><span class="hs-identifier hs-var">ini</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap k x -&gt; HashMap k b
</span><a href="#local-6989586621679083087"><span class="hs-identifier hs-var">end</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1010"></span><span>
</span><span id="line-1011"></span><span class="hs-comment">-- | Fold all values into a vector</span><span>
</span><span id="line-1012"></span><span id="local-6989586621679084585"><span id="local-6989586621679084586"><span class="annot"><a href="Control.Foldl.html#vector"><span class="hs-identifier hs-type">vector</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Vector</span></span><span> </span><span class="annot"><a href="#local-6989586621679084586"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084585"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084585"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084586"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084585"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1013"></span><span id="vector"><span class="annot"><span class="annottext">vector :: forall (v :: * -&gt; *) a. Vector v a =&gt; Fold a (v a)
</span><a href="Control.Foldl.html#vector"><span class="hs-identifier hs-var hs-var">vector</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (v :: * -&gt; *) a. Vector v a =&gt; Int -&gt; [a] -&gt; v a
</span><a href="Control.Foldl.Util.Vector.html#fromReverseListN"><span class="hs-identifier hs-var">V.fromReverseListN</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Fold a Int
</span><a href="Control.Foldl.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Fold a [a]
</span><a href="Control.Foldl.html#revList"><span class="hs-identifier hs-var">revList</span></a></span><span>
</span><span id="line-1014"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#vector"><span class="hs-pragma hs-type">vector</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1015"></span><span>
</span><span id="line-1016"></span><span class="annot"><a href="Control.Foldl.html#maxChunkSize"><span class="hs-identifier hs-type">maxChunkSize</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-1017"></span><span id="maxChunkSize"><span class="annot"><span class="annottext">maxChunkSize :: Int
</span><a href="Control.Foldl.html#maxChunkSize"><span class="hs-identifier hs-var hs-var">maxChunkSize</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1024</span></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1024</span></span><span>
</span><span id="line-1018"></span><span>
</span><span id="line-1019"></span><span class="hs-comment">{-| Fold all values into a vector

    This is more efficient than `vector` but is impure
-}</span><span>
</span><span id="line-1023"></span><span id="local-6989586621679084578"><span id="local-6989586621679084579"><span id="local-6989586621679084580"><span class="annot"><a href="Control.Foldl.html#vectorM"><span class="hs-identifier hs-type">vectorM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PrimMonad</span></span><span> </span><span class="annot"><a href="#local-6989586621679084580"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Vector</span></span><span> </span><span class="annot"><a href="#local-6989586621679084579"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084578"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084580"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084578"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084579"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084578"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-1024"></span><span id="vectorM"><span class="annot"><span class="annottext">vectorM :: forall (m :: * -&gt; *) (v :: * -&gt; *) a.
(PrimMonad m, Vector v a) =&gt;
FoldM m a (v a)
</span><a href="Control.Foldl.html#vectorM"><span class="hs-identifier hs-var hs-var">vectorM</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b x.
(x -&gt; a -&gt; m x) -&gt; m x -&gt; (x -&gt; m b) -&gt; FoldM m a b
</span><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-var">FoldM</span></a></span><span> </span><span class="annot"><span class="annottext">forall {m :: * -&gt; *} {v :: * -&gt; * -&gt; *} {a}.
(PrimMonad m, MVector v a) =&gt;
Pair (v (PrimState m) a) Int
-&gt; a -&gt; m (Pair (v (PrimState m) a) Int)
</span><a href="#local-6989586621679083071"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">m (Pair (Mutable v (PrimState m) a) Int)
</span><a href="#local-6989586621679083070"><span class="hs-identifier hs-var">begin</span></a></span><span> </span><span class="annot"><span class="annottext">forall {m :: * -&gt; *} {v :: * -&gt; *} {a}.
(PrimMonad m, Vector v a) =&gt;
Pair (Mutable v (PrimState m) a) Int -&gt; m (v a)
</span><a href="#local-6989586621679083069"><span class="hs-identifier hs-var">done</span></a></span><span>
</span><span id="line-1025"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1026"></span><span>    </span><span id="local-6989586621679083070"><span class="annot"><span class="annottext">begin :: m (Pair (Mutable v (PrimState m) a) Int)
</span><a href="#local-6989586621679083070"><span class="hs-identifier hs-var hs-var">begin</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1027"></span><span>        </span><span id="local-6989586621679083063"><span class="annot"><span class="annottext">Mutable v (PrimState m) a
</span><a href="#local-6989586621679083063"><span class="hs-identifier hs-var">mv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) (v :: * -&gt; * -&gt; *) a.
(PrimMonad m, MVector v a) =&gt;
Int -&gt; m (v (PrimState m) a)
</span><span class="hs-identifier hs-var">M.unsafeNew</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span>
</span><span id="line-1028"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; Pair a b
</span><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-var">Pair</span></a></span><span> </span><span class="annot"><span class="annottext">Mutable v (PrimState m) a
</span><a href="#local-6989586621679083063"><span class="hs-identifier hs-var">mv</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-1029"></span><span>    </span><span id="local-6989586621679083071"><span class="annot"><span class="annottext">step :: Pair (v (PrimState m) a) Int
-&gt; a -&gt; m (Pair (v (PrimState m) a) Int)
</span><a href="#local-6989586621679083071"><span class="hs-identifier hs-var hs-var">step</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span id="local-6989586621679083046"><span class="annot"><span class="annottext">v (PrimState m) a
</span><a href="#local-6989586621679083046"><span class="hs-identifier hs-var">mv</span></a></span></span><span> </span><span id="local-6989586621679083045"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083045"><span class="hs-identifier hs-var">idx</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679083044"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083044"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1030"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679083042"><span class="annot"><span class="annottext">len :: Int
</span><a href="#local-6989586621679083042"><span class="hs-identifier hs-var hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (v :: * -&gt; * -&gt; *) a s. MVector v a =&gt; v s a -&gt; Int
</span><span class="hs-identifier hs-var">M.length</span></span><span> </span><span class="annot"><span class="annottext">v (PrimState m) a
</span><a href="#local-6989586621679083046"><span class="hs-identifier hs-var">mv</span></a></span><span>
</span><span id="line-1031"></span><span>        </span><span id="local-6989586621679083040"><span class="annot"><span class="annottext">v (PrimState m) a
</span><a href="#local-6989586621679083040"><span class="hs-identifier hs-var">mv'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083045"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083042"><span class="hs-identifier hs-var">len</span></a></span><span>
</span><span id="line-1032"></span><span>            </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) (v :: * -&gt; * -&gt; *) a.
(PrimMonad m, MVector v a) =&gt;
v (PrimState m) a -&gt; Int -&gt; m (v (PrimState m) a)
</span><span class="hs-identifier hs-var">M.unsafeGrow</span></span><span> </span><span class="annot"><span class="annottext">v (PrimState m) a
</span><a href="#local-6989586621679083046"><span class="hs-identifier hs-var">mv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">min</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083042"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="Control.Foldl.html#maxChunkSize"><span class="hs-identifier hs-var">maxChunkSize</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1033"></span><span>            </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">v (PrimState m) a
</span><a href="#local-6989586621679083046"><span class="hs-identifier hs-var">mv</span></a></span><span>
</span><span id="line-1034"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) (v :: * -&gt; * -&gt; *) a.
(PrimMonad m, MVector v a) =&gt;
v (PrimState m) a -&gt; Int -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">M.unsafeWrite</span></span><span> </span><span class="annot"><span class="annottext">v (PrimState m) a
</span><a href="#local-6989586621679083040"><span class="hs-identifier hs-var">mv'</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083045"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679083044"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-1035"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; Pair a b
</span><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-var">Pair</span></a></span><span> </span><span class="annot"><span class="annottext">v (PrimState m) a
</span><a href="#local-6989586621679083040"><span class="hs-identifier hs-var">mv'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083045"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1036"></span><span>    </span><span id="local-6989586621679083069"><span class="annot"><span class="annottext">done :: Pair (Mutable v (PrimState m) a) Int -&gt; m (v a)
</span><a href="#local-6989586621679083069"><span class="hs-identifier hs-var hs-var">done</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span id="local-6989586621679083030"><span class="annot"><span class="annottext">Mutable v (PrimState m) a
</span><a href="#local-6989586621679083030"><span class="hs-identifier hs-var">mv</span></a></span></span><span> </span><span id="local-6989586621679083029"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083029"><span class="hs-identifier hs-var">idx</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1037"></span><span>        </span><span id="local-6989586621679083028"><span class="annot"><span class="annottext">v a
</span><a href="#local-6989586621679083028"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) (v :: * -&gt; *) a.
(PrimMonad m, Vector v a) =&gt;
Mutable v (PrimState m) a -&gt; m (v a)
</span><span class="hs-identifier hs-var">V.freeze</span></span><span> </span><span class="annot"><span class="annottext">Mutable v (PrimState m) a
</span><a href="#local-6989586621679083030"><span class="hs-identifier hs-var">mv</span></a></span><span>
</span><span id="line-1038"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (v :: * -&gt; *) a. Vector v a =&gt; Int -&gt; v a -&gt; v a
</span><span class="hs-identifier hs-var">V.unsafeTake</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679083029"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">v a
</span><a href="#local-6989586621679083028"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1039"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#vectorM"><span class="hs-pragma hs-type">vectorM</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1040"></span><span>
</span><span id="line-1041"></span><span class="hs-comment">{- $utilities
    'purely' and 'impurely' allow you to write folds compatible with the @foldl@
    library without incurring a @foldl@ dependency.  Write your fold to accept
    three parameters corresponding to the step function, initial
    accumulator, and extraction function and then users can upgrade your
    function to accept a 'Fold' or 'FoldM' using the 'purely' or 'impurely'
    combinators.

    For example, the @pipes@ library implements @fold@ and @foldM@ functions in
    @Pipes.Prelude@ with the following type:

&gt; Pipes.Prelude.fold
&gt;     :: Monad m
&gt;     -&gt; (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Producer a m () -&gt; m b
&gt;
&gt; Pipes.Prelude.foldM
&gt;     :: Monad m
&gt;     =&gt; (x -&gt; a -&gt; m x) -&gt; m x -&gt; (x -&gt; m b) -&gt; Producer a m () -&gt; m b

    Both @fold@ and @foldM@ is set up so that you can wrap them with either
    'purely' or 'impurely' to accept a 'Fold' or 'FoldM', respectively:

&gt; purely Pipes.Prelude.fold
&gt;     :: Monad m =&gt; Fold a b -&gt; Producer a m () -&gt; m b
&gt;
&gt; impurely Pipes.Prelude.foldM
&gt;     :: Monad m =&gt; FoldM m a b -&gt; Producer a m () -&gt; m b

    Other streaming libraries supporting 'purely' and 'impurely' include @io-streams@ and @streaming@.
    So for example we have:

&gt; purely System.IO.Streams.fold_
&gt;     :: Fold a b -&gt; Streams.InputStream a -&gt; IO b
&gt;
&gt; impurely System.IO.Streams.foldM_
&gt;     :: FoldM IO a b -&gt; Streams.InputStream a -&gt; IO b

    The @monotraversable@ package makes it convenient to apply a
    'Fold' or 'FoldM' to pure containers that do not allow
    a general 'Foldable' instance, like unboxed vectors:

&gt; purely ofoldlUnwrap
&gt;     :: MonoFoldable mono
&gt;     =&gt; Fold (Element mono) b -&gt; mono -&gt; b
&gt;
&gt; impurely ofoldMUnwrap
&gt;     :: MonoFoldable mono
&gt;     =&gt; FoldM m (Element mono) b -&gt; mono -&gt; m b
-}</span><span>
</span><span id="line-1090"></span><span>
</span><span id="line-1091"></span><span class="hs-comment">-- | Upgrade a fold to accept the 'Fold' type</span><span>
</span><span id="line-1092"></span><span id="local-6989586621679084556"><span id="local-6989586621679084557"><span id="local-6989586621679084558"><span class="annot"><a href="Control.Foldl.html#purely"><span class="hs-identifier hs-type">purely</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084559"><span class="annot"><a href="#local-6989586621679084559"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084559"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084558"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084559"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084559"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084559"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084557"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084556"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084558"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084557"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084556"><span class="hs-identifier hs-type">r</span></a></span></span></span></span><span>
</span><span id="line-1093"></span><span id="purely"><span class="annot"><span class="annottext">purely :: forall a b r.
(forall x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; r) -&gt; Fold a b -&gt; r
</span><a href="Control.Foldl.html#purely"><span class="hs-identifier hs-var hs-var">purely</span></a></span></span><span> </span><span id="local-6989586621679083026"><span class="annot"><span class="annottext">forall x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; r
</span><a href="#local-6989586621679083026"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span id="local-6989586621679083025"><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679083025"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679083024"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083024"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621679083023"><span class="annot"><span class="annottext">x -&gt; b
</span><a href="#local-6989586621679083023"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; r
</span><a href="#local-6989586621679083026"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679083025"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083024"><span class="hs-identifier hs-var">begin</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; b
</span><a href="#local-6989586621679083023"><span class="hs-identifier hs-var">done</span></a></span><span>
</span><span id="line-1094"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#purely"><span class="hs-pragma hs-type">purely</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1095"></span><span>
</span><span id="line-1096"></span><span class="hs-comment">-- | Upgrade a more traditional fold to accept the `Fold` type</span><span>
</span><span id="line-1097"></span><span id="local-6989586621679084549"><span id="local-6989586621679084550"><span class="annot"><a href="Control.Foldl.html#purely_"><span class="hs-identifier hs-type">purely_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084551"><span class="annot"><a href="#local-6989586621679084551"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084551"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084550"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084551"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084551"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084551"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084550"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084549"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084549"><span class="hs-identifier hs-type">b</span></a></span></span></span><span>
</span><span id="line-1098"></span><span id="purely_"><span class="annot"><span class="annottext">purely_ :: forall a b. (forall x. (x -&gt; a -&gt; x) -&gt; x -&gt; x) -&gt; Fold a b -&gt; b
</span><a href="Control.Foldl.html#purely_"><span class="hs-identifier hs-var hs-var">purely_</span></a></span></span><span> </span><span id="local-6989586621679083022"><span class="annot"><span class="annottext">forall x. (x -&gt; a -&gt; x) -&gt; x -&gt; x
</span><a href="#local-6989586621679083022"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span id="local-6989586621679083021"><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679083021"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679083020"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083020"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621679083019"><span class="annot"><span class="annottext">x -&gt; b
</span><a href="#local-6989586621679083019"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x -&gt; b
</span><a href="#local-6989586621679083019"><span class="hs-identifier hs-var">done</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall x. (x -&gt; a -&gt; x) -&gt; x -&gt; x
</span><a href="#local-6989586621679083022"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679083021"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083020"><span class="hs-identifier hs-var">begin</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1099"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#purely_"><span class="hs-pragma hs-type">purely_</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1100"></span><span>
</span><span id="line-1101"></span><span class="hs-comment">-- | Upgrade a monadic fold to accept the 'FoldM' type</span><span>
</span><span id="line-1102"></span><span id="local-6989586621679084541"><span id="local-6989586621679084542"><span id="local-6989586621679084543"><span id="local-6989586621679084544"><span class="annot"><a href="Control.Foldl.html#impurely"><span class="hs-identifier hs-type">impurely</span></a></span><span>
</span><span id="line-1103"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084545"><span class="annot"><a href="#local-6989586621679084545"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084545"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084544"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084543"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084545"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084543"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084545"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084545"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084543"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084542"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084541"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1104"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084543"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084544"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084542"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-1105"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084541"><span class="hs-identifier hs-type">r</span></a></span></span></span></span></span><span>
</span><span id="line-1106"></span><span id="impurely"><span class="annot"><span class="annottext">impurely :: forall a (m :: * -&gt; *) b r.
(forall x. (x -&gt; a -&gt; m x) -&gt; m x -&gt; (x -&gt; m b) -&gt; r)
-&gt; FoldM m a b -&gt; r
</span><a href="Control.Foldl.html#impurely"><span class="hs-identifier hs-var hs-var">impurely</span></a></span></span><span> </span><span id="local-6989586621679083018"><span class="annot"><span class="annottext">forall x. (x -&gt; a -&gt; m x) -&gt; m x -&gt; (x -&gt; m b) -&gt; r
</span><a href="#local-6989586621679083018"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span id="local-6989586621679083017"><span class="annot"><span class="annottext">x -&gt; a -&gt; m x
</span><a href="#local-6989586621679083017"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679083016"><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621679083016"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621679083015"><span class="annot"><span class="annottext">x -&gt; m b
</span><a href="#local-6989586621679083015"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall x. (x -&gt; a -&gt; m x) -&gt; m x -&gt; (x -&gt; m b) -&gt; r
</span><a href="#local-6989586621679083018"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; m x
</span><a href="#local-6989586621679083017"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621679083016"><span class="hs-identifier hs-var">begin</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; m b
</span><a href="#local-6989586621679083015"><span class="hs-identifier hs-var">done</span></a></span><span>
</span><span id="line-1107"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#impurely"><span class="hs-pragma hs-type">impurely</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1108"></span><span>
</span><span id="line-1109"></span><span class="hs-comment">-- | Upgrade a more traditional monadic fold to accept the `FoldM` type</span><span>
</span><span id="line-1110"></span><span id="local-6989586621679084532"><span id="local-6989586621679084533"><span id="local-6989586621679084535"><span class="annot"><a href="Control.Foldl.html#impurely_"><span class="hs-identifier hs-type">impurely_</span></a></span><span>
</span><span id="line-1111"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679084535"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-1112"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084534"><span class="annot"><a href="#local-6989586621679084534"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084534"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084533"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084535"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084534"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084535"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084534"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084535"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084534"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084535"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084533"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084532"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084535"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084532"><span class="hs-identifier hs-type">b</span></a></span></span></span></span><span>
</span><span id="line-1113"></span><span id="impurely_"><span class="annot"><span class="annottext">impurely_ :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
(forall x. (x -&gt; a -&gt; m x) -&gt; m x -&gt; m x) -&gt; FoldM m a b -&gt; m b
</span><a href="Control.Foldl.html#impurely_"><span class="hs-identifier hs-var hs-var">impurely_</span></a></span></span><span> </span><span id="local-6989586621679083013"><span class="annot"><span class="annottext">forall x. (x -&gt; a -&gt; m x) -&gt; m x -&gt; m x
</span><a href="#local-6989586621679083013"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span id="local-6989586621679083011"><span class="annot"><span class="annottext">x -&gt; a -&gt; m x
</span><a href="#local-6989586621679083011"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679083010"><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621679083010"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621679083009"><span class="annot"><span class="annottext">x -&gt; m b
</span><a href="#local-6989586621679083009"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1114"></span><span>    </span><span id="local-6989586621679083008"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083008"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall x. (x -&gt; a -&gt; m x) -&gt; m x -&gt; m x
</span><a href="#local-6989586621679083013"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; m x
</span><a href="#local-6989586621679083011"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621679083010"><span class="hs-identifier hs-var">begin</span></a></span><span>
</span><span id="line-1115"></span><span>    </span><span class="annot"><span class="annottext">x -&gt; m b
</span><a href="#local-6989586621679083009"><span class="hs-identifier hs-var">done</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083008"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1116"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#impurely_"><span class="hs-pragma hs-type">impurely_</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1117"></span><span>
</span><span id="line-1118"></span><span class="hs-comment">{-| Generalize a `Fold` to a `FoldM`

&gt; generalize (pure r) = pure r
&gt;
&gt; generalize (f &lt;*&gt; x) = generalize f &lt;*&gt; generalize x
-}</span><span>
</span><span id="line-1124"></span><span id="local-6989586621679084525"><span id="local-6989586621679084526"><span id="local-6989586621679084527"><span class="annot"><a href="Control.Foldl.html#generalize"><span class="hs-identifier hs-type">generalize</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679084527"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084526"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084525"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084527"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084526"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084525"><span class="hs-identifier hs-type">b</span></a></span></span></span></span><span>
</span><span id="line-1125"></span><span id="generalize"><span class="annot"><span class="annottext">generalize :: forall (m :: * -&gt; *) a b. Monad m =&gt; Fold a b -&gt; FoldM m a b
</span><a href="Control.Foldl.html#generalize"><span class="hs-identifier hs-var hs-var">generalize</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span id="local-6989586621679083004"><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679083004"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679083003"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083003"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621679083002"><span class="annot"><span class="annottext">x -&gt; b
</span><a href="#local-6989586621679083002"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b x.
(x -&gt; a -&gt; m x) -&gt; m x -&gt; (x -&gt; m b) -&gt; FoldM m a b
</span><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-var">FoldM</span></a></span><span> </span><span class="annot"><span class="annottext">forall {m :: * -&gt; *}. Monad m =&gt; x -&gt; a -&gt; m x
</span><a href="#local-6989586621679083001"><span class="hs-identifier hs-var">step'</span></a></span><span> </span><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621679083000"><span class="hs-identifier hs-var">begin'</span></a></span><span> </span><span class="annot"><span class="annottext">forall {m :: * -&gt; *}. Monad m =&gt; x -&gt; m b
</span><a href="#local-6989586621679082999"><span class="hs-identifier hs-var">done'</span></a></span><span>
</span><span id="line-1126"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1127"></span><span>    </span><span id="local-6989586621679083001"><span class="annot"><span class="annottext">step' :: x -&gt; a -&gt; m x
</span><a href="#local-6989586621679083001"><span class="hs-identifier hs-var hs-var">step'</span></a></span></span><span> </span><span id="local-6989586621679082996"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082996"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679082995"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082995"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679083004"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082996"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082995"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1128"></span><span>    </span><span id="local-6989586621679083000"><span class="annot"><span class="annottext">begin' :: m x
</span><a href="#local-6989586621679083000"><span class="hs-identifier hs-var hs-var">begin'</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span>  </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679083003"><span class="hs-identifier hs-var">begin</span></a></span><span>
</span><span id="line-1129"></span><span>    </span><span id="local-6989586621679082999"><span class="annot"><span class="annottext">done' :: x -&gt; m b
</span><a href="#local-6989586621679082999"><span class="hs-identifier hs-var hs-var">done'</span></a></span></span><span> </span><span id="local-6989586621679082991"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082991"><span class="hs-identifier hs-var">x</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x -&gt; b
</span><a href="#local-6989586621679083002"><span class="hs-identifier hs-var">done</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082991"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1130"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#generalize"><span class="hs-pragma hs-type">generalize</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1131"></span><span>
</span><span id="line-1132"></span><span class="hs-comment">{-| Simplify a pure `FoldM` to a `Fold`

&gt; simplify (pure r) = pure r
&gt;
&gt; simplify (f &lt;*&gt; x) = simplify f &lt;*&gt; simplify x
-}</span><span>
</span><span id="line-1138"></span><span id="local-6989586621679084516"><span id="local-6989586621679084517"><span class="annot"><a href="Control.Foldl.html#simplify"><span class="hs-identifier hs-type">simplify</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Identity</span></span><span> </span><span class="annot"><a href="#local-6989586621679084517"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084516"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084517"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084516"><span class="hs-identifier hs-type">b</span></a></span></span></span><span>
</span><span id="line-1139"></span><span id="simplify"><span class="annot"><span class="annottext">simplify :: forall a b. FoldM Identity a b -&gt; Fold a b
</span><a href="Control.Foldl.html#simplify"><span class="hs-identifier hs-var hs-var">simplify</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span id="local-6989586621679082990"><span class="annot"><span class="annottext">x -&gt; a -&gt; Identity x
</span><a href="#local-6989586621679082990"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679082989"><span class="annot"><span class="annottext">Identity x
</span><a href="#local-6989586621679082989"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621679082988"><span class="annot"><span class="annottext">x -&gt; Identity b
</span><a href="#local-6989586621679082988"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679082987"><span class="hs-identifier hs-var">step'</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082986"><span class="hs-identifier hs-var">begin'</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; b
</span><a href="#local-6989586621679082985"><span class="hs-identifier hs-var">done'</span></a></span><span>
</span><span id="line-1140"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1141"></span><span>    </span><span id="local-6989586621679082987"><span class="annot"><span class="annottext">step' :: x -&gt; a -&gt; x
</span><a href="#local-6989586621679082987"><span class="hs-identifier hs-var hs-var">step'</span></a></span></span><span> </span><span id="local-6989586621679082984"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082984"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679082983"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082983"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Identity a -&gt; a
</span><span class="hs-identifier hs-var">runIdentity</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x -&gt; a -&gt; Identity x
</span><a href="#local-6989586621679082990"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082984"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082983"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1142"></span><span>    </span><span id="local-6989586621679082986"><span class="annot"><span class="annottext">begin' :: x
</span><a href="#local-6989586621679082986"><span class="hs-identifier hs-var hs-var">begin'</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Identity a -&gt; a
</span><span class="hs-identifier hs-var">runIdentity</span></span><span>  </span><span class="annot"><span class="annottext">Identity x
</span><a href="#local-6989586621679082989"><span class="hs-identifier hs-var">begin</span></a></span><span>
</span><span id="line-1143"></span><span>    </span><span id="local-6989586621679082985"><span class="annot"><span class="annottext">done' :: x -&gt; b
</span><a href="#local-6989586621679082985"><span class="hs-identifier hs-var hs-var">done'</span></a></span></span><span> </span><span id="local-6989586621679082982"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082982"><span class="hs-identifier hs-var">x</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Identity a -&gt; a
</span><span class="hs-identifier hs-var">runIdentity</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x -&gt; Identity b
</span><a href="#local-6989586621679082988"><span class="hs-identifier hs-var">done</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082982"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1144"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#simplify"><span class="hs-pragma hs-type">simplify</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1145"></span><span>
</span><span id="line-1146"></span><span class="hs-comment">{- | Shift a 'FoldM' from one monad to another with a morphism such as 'lift' or 'liftIO';
     the effect is the same as 'Control.Monad.Morph.hoist'.
-}</span><span>
</span><span id="line-1149"></span><span id="local-6989586621679084507"><span id="local-6989586621679084508"><span id="local-6989586621679084509"><span id="local-6989586621679084511"><span class="annot"><a href="Control.Foldl.html#hoists"><span class="hs-identifier hs-type">hoists</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679084510"><span class="annot"><a href="#local-6989586621679084510"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679084511"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084510"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084509"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084510"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084511"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084508"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084507"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084509"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084508"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084507"><span class="hs-identifier hs-type">b</span></a></span></span></span></span></span><span>
</span><span id="line-1150"></span><span id="hoists"><span class="annot"><span class="annottext">hoists :: forall (m :: * -&gt; *) (n :: * -&gt; *) a b.
(forall x. m x -&gt; n x) -&gt; FoldM m a b -&gt; FoldM n a b
</span><a href="Control.Foldl.html#hoists"><span class="hs-identifier hs-var hs-var">hoists</span></a></span></span><span> </span><span id="local-6989586621679082981"><span class="annot"><span class="annottext">forall x. m x -&gt; n x
</span><a href="#local-6989586621679082981"><span class="hs-identifier hs-var">phi</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span id="local-6989586621679082980"><span class="annot"><span class="annottext">x -&gt; a -&gt; m x
</span><a href="#local-6989586621679082980"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679082979"><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621679082979"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621679082978"><span class="annot"><span class="annottext">x -&gt; m b
</span><a href="#local-6989586621679082978"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b x.
(x -&gt; a -&gt; m x) -&gt; m x -&gt; (x -&gt; m b) -&gt; FoldM m a b
</span><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-var">FoldM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679082977"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082977"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679082976"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082976"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall x. m x -&gt; n x
</span><a href="#local-6989586621679082981"><span class="hs-identifier hs-var">phi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x -&gt; a -&gt; m x
</span><a href="#local-6989586621679082980"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082977"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082976"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall x. m x -&gt; n x
</span><a href="#local-6989586621679082981"><span class="hs-identifier hs-var">phi</span></a></span><span> </span><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621679082979"><span class="hs-identifier hs-var">begin</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall x. m x -&gt; n x
</span><a href="#local-6989586621679082981"><span class="hs-identifier hs-var">phi</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; m b
</span><a href="#local-6989586621679082978"><span class="hs-identifier hs-var">done</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1151"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#hoists"><span class="hs-pragma hs-type">hoists</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1152"></span><span>
</span><span id="line-1153"></span><span class="hs-comment">{-| Allows to continue feeding a 'FoldM' even after passing it to a function
that closes it.

For pure 'Fold's, this is provided by the 'Control.Comonad.Comonad' instance.
-}</span><span>
</span><span id="line-1158"></span><span id="local-6989586621679084895"><span id="local-6989586621679084896"><span id="local-6989586621679084897"><span class="annot"><a href="Control.Foldl.html#duplicateM"><span class="hs-identifier hs-type">duplicateM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679084897"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084897"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084896"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084895"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084897"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084896"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084897"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084896"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084895"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-1159"></span><span id="duplicateM"><span class="annot"><span class="annottext">duplicateM :: forall (m :: * -&gt; *) a b.
Applicative m =&gt;
FoldM m a b -&gt; FoldM m a (FoldM m a b)
</span><a href="Control.Foldl.html#duplicateM"><span class="hs-identifier hs-var hs-var">duplicateM</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span id="local-6989586621679082972"><span class="annot"><span class="annottext">x -&gt; a -&gt; m x
</span><a href="#local-6989586621679082972"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679082971"><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621679082971"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621679082970"><span class="annot"><span class="annottext">x -&gt; m b
</span><a href="#local-6989586621679082970"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1160"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b x.
(x -&gt; a -&gt; m x) -&gt; m x -&gt; (x -&gt; m b) -&gt; FoldM m a b
</span><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-var">FoldM</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; m x
</span><a href="#local-6989586621679082972"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621679082971"><span class="hs-identifier hs-var">begin</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679082969"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082969"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b x.
(x -&gt; a -&gt; m x) -&gt; m x -&gt; (x -&gt; m b) -&gt; FoldM m a b
</span><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-var">FoldM</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; m x
</span><a href="#local-6989586621679082972"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082969"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">x -&gt; m b
</span><a href="#local-6989586621679082970"><span class="hs-identifier hs-var">done</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1161"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#duplicateM"><span class="hs-pragma hs-type">duplicateM</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1162"></span><span>
</span><span id="line-1163"></span><span class="hs-comment">{-| @_Fold1 step@ returns a new 'Fold' using just a step function that has the
same type for the accumulator and the element. The result type is the
accumulator type wrapped in 'Maybe'. The initial accumulator is retrieved from
the 'Foldable', the result is 'None' for empty containers.
 -}</span><span>
</span><span id="line-1168"></span><span id="local-6989586621679084816"><span class="annot"><a href="Control.Foldl.html#_Fold1"><span class="hs-identifier hs-type">_Fold1</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084816"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084816"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084816"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084816"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679084816"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1169"></span><span id="_Fold1"><span class="annot"><span class="annottext">_Fold1 :: forall a. (a -&gt; a -&gt; a) -&gt; Fold a (Maybe a)
</span><a href="Control.Foldl.html#_Fold1"><span class="hs-identifier hs-var hs-var">_Fold1</span></a></span></span><span> </span><span id="local-6989586621679082968"><span class="annot"><span class="annottext">a -&gt; a -&gt; a
</span><a href="#local-6989586621679082968"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe' a -&gt; a -&gt; Maybe' a
</span><a href="#local-6989586621679082967"><span class="hs-identifier hs-var">step_</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe' a
</span><a href="Control.Foldl.Internal.html#Nothing%27"><span class="hs-identifier hs-var">Nothing'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe' a -&gt; Maybe a
</span><a href="Control.Foldl.Internal.html#lazy"><span class="hs-identifier hs-var">lazy</span></a></span><span>
</span><span id="line-1170"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1171"></span><span>    </span><span id="local-6989586621679082967"><span class="annot"><span class="annottext">step_ :: Maybe' a -&gt; a -&gt; Maybe' a
</span><a href="#local-6989586621679082967"><span class="hs-identifier hs-var hs-var">step_</span></a></span></span><span> </span><span id="local-6989586621679082966"><span class="annot"><span class="annottext">Maybe' a
</span><a href="#local-6989586621679082966"><span class="hs-identifier hs-var">mx</span></a></span></span><span> </span><span id="local-6989586621679082965"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082965"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe' a
</span><a href="Control.Foldl.Internal.html#Just%27"><span class="hs-identifier hs-var">Just'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe' a
</span><a href="#local-6989586621679082966"><span class="hs-identifier hs-var">mx</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1172"></span><span>        </span><span class="annot"><span class="annottext">Maybe' a
</span><a href="Control.Foldl.Internal.html#Nothing%27"><span class="hs-identifier hs-var">Nothing'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082965"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-1173"></span><span>        </span><span class="annot"><a href="Control.Foldl.Internal.html#Just%27"><span class="hs-identifier hs-type">Just'</span></a></span><span> </span><span id="local-6989586621679082964"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082964"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
</span><a href="#local-6989586621679082968"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082964"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082965"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1174"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#_Fold1"><span class="hs-pragma hs-type">_Fold1</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1175"></span><span>
</span><span id="line-1176"></span><span class="hs-comment">{-| @(premap f folder)@ returns a new 'Fold' where f is applied at each step

&gt; fold (premap f folder) list = fold folder (List.map f list)

&gt;&gt;&gt; fold (premap Sum Foldl.mconcat) [1..10]
Sum {getSum = 55}

&gt;&gt;&gt; fold Foldl.mconcat (List.map Sum [1..10])
Sum {getSum = 55}

&gt; premap id = id
&gt;
&gt; premap (f . g) = premap g . premap f

&gt; premap k (pure r) = pure r
&gt;
&gt; premap k (f &lt;*&gt; x) = premap k f &lt;*&gt; premap k x
-}</span><span>
</span><span id="line-1194"></span><span id="local-6989586621679082961"><span id="local-6989586621679082962"><span id="local-6989586621679082963"><span class="annot"><a href="Control.Foldl.html#premap"><span class="hs-identifier hs-type">premap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679082963"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679082962"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082962"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082961"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082963"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082961"><span class="hs-identifier hs-type">r</span></a></span></span></span></span><span>
</span><span id="line-1195"></span><span id="premap"><span class="annot"><span class="annottext">premap :: forall a b c. (a -&gt; b) -&gt; Fold b c -&gt; Fold a c
</span><a href="Control.Foldl.html#premap"><span class="hs-identifier hs-var hs-var">premap</span></a></span></span><span> </span><span id="local-6989586621679082960"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679082960"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span id="local-6989586621679082959"><span class="annot"><span class="annottext">x -&gt; b -&gt; x
</span><a href="#local-6989586621679082959"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679082958"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082958"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621679082957"><span class="annot"><span class="annottext">x -&gt; r
</span><a href="#local-6989586621679082957"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679082956"><span class="hs-identifier hs-var">step'</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082958"><span class="hs-identifier hs-var">begin</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; r
</span><a href="#local-6989586621679082957"><span class="hs-identifier hs-var">done</span></a></span><span>
</span><span id="line-1196"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1197"></span><span>    </span><span id="local-6989586621679082956"><span class="annot"><span class="annottext">step' :: x -&gt; a -&gt; x
</span><a href="#local-6989586621679082956"><span class="hs-identifier hs-var hs-var">step'</span></a></span></span><span> </span><span id="local-6989586621679082955"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082955"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679082954"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082954"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x -&gt; b -&gt; x
</span><a href="#local-6989586621679082959"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082955"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679082960"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082954"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1198"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#premap"><span class="hs-pragma hs-type">premap</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1199"></span><span>
</span><span id="line-1200"></span><span class="hs-comment">{-| @(premapM f folder)@ returns a new 'FoldM' where f is applied to each input
    element

&gt; premapM return = id
&gt;
&gt; premapM (f &lt;=&lt; g) = premap g . premap f

&gt; premapM k (pure r) = pure r
&gt;
&gt; premapM k (f &lt;*&gt; x) = premapM k f &lt;*&gt; premapM k x
-}</span><span>
</span><span id="line-1211"></span><span id="local-6989586621679084489"><span id="local-6989586621679084490"><span id="local-6989586621679084491"><span id="local-6989586621679084492"><span class="annot"><a href="Control.Foldl.html#premapM"><span class="hs-identifier hs-type">premapM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679084492"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084491"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084492"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084490"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084492"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084490"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084489"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084492"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084491"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084489"><span class="hs-identifier hs-type">r</span></a></span></span></span></span></span><span>
</span><span id="line-1212"></span><span id="premapM"><span class="annot"><span class="annottext">premapM :: forall (m :: * -&gt; *) a b r.
Monad m =&gt;
(a -&gt; m b) -&gt; FoldM m b r -&gt; FoldM m a r
</span><a href="Control.Foldl.html#premapM"><span class="hs-identifier hs-var hs-var">premapM</span></a></span></span><span> </span><span id="local-6989586621679082952"><span class="annot"><span class="annottext">a -&gt; m b
</span><a href="#local-6989586621679082952"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span id="local-6989586621679082951"><span class="annot"><span class="annottext">x -&gt; b -&gt; m x
</span><a href="#local-6989586621679082951"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679082950"><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621679082950"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621679082949"><span class="annot"><span class="annottext">x -&gt; m r
</span><a href="#local-6989586621679082949"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b x.
(x -&gt; a -&gt; m x) -&gt; m x -&gt; (x -&gt; m b) -&gt; FoldM m a b
</span><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-var">FoldM</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; m x
</span><a href="#local-6989586621679082948"><span class="hs-identifier hs-var">step'</span></a></span><span> </span><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621679082950"><span class="hs-identifier hs-var">begin</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; m r
</span><a href="#local-6989586621679082949"><span class="hs-identifier hs-var">done</span></a></span><span>
</span><span id="line-1213"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1214"></span><span>    </span><span id="local-6989586621679082948"><span class="annot"><span class="annottext">step' :: x -&gt; a -&gt; m x
</span><a href="#local-6989586621679082948"><span class="hs-identifier hs-var hs-var">step'</span></a></span></span><span> </span><span id="local-6989586621679082946"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082946"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679082945"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082945"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; m b
</span><a href="#local-6989586621679082952"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082945"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; b -&gt; m x
</span><a href="#local-6989586621679082951"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082946"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1215"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#premapM"><span class="hs-pragma hs-type">premapM</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1216"></span><span>
</span><span id="line-1217"></span><span class="hs-comment">{-| @(prefilter f folder)@ returns a new 'Fold' where the folder's input is used
  only when the input satisfies a predicate f

  This can also be done with 'handles' (@handles (filtered f)@) but @prefilter@
  does not need you to depend on a lens library.

&gt; fold (prefilter p folder) list = fold folder (filter p list)

&gt;&gt;&gt; fold (prefilter (&gt;5) Control.Foldl.sum) [1..10]
40

&gt;&gt;&gt; fold Control.Foldl.sum (filter (&gt;5) [1..10])
40
-}</span><span>
</span><span id="line-1231"></span><span id="local-6989586621679084480"><span id="local-6989586621679084481"><span class="annot"><a href="Control.Foldl.html#prefilter"><span class="hs-identifier hs-type">prefilter</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084481"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084481"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084480"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084481"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084480"><span class="hs-identifier hs-type">r</span></a></span></span></span><span>
</span><span id="line-1232"></span><span id="prefilter"><span class="annot"><span class="annottext">prefilter :: forall a r. (a -&gt; Bool) -&gt; Fold a r -&gt; Fold a r
</span><a href="Control.Foldl.html#prefilter"><span class="hs-identifier hs-var hs-var">prefilter</span></a></span></span><span> </span><span id="local-6989586621679082944"><span class="annot"><span class="annottext">a -&gt; Bool
</span><a href="#local-6989586621679082944"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span id="local-6989586621679082943"><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679082943"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679082942"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082942"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621679082941"><span class="annot"><span class="annottext">x -&gt; r
</span><a href="#local-6989586621679082941"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679082940"><span class="hs-identifier hs-var">step'</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082942"><span class="hs-identifier hs-var">begin</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; r
</span><a href="#local-6989586621679082941"><span class="hs-identifier hs-var">done</span></a></span><span>
</span><span id="line-1233"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1234"></span><span>    </span><span id="local-6989586621679082940"><span class="annot"><span class="annottext">step' :: x -&gt; a -&gt; x
</span><a href="#local-6989586621679082940"><span class="hs-identifier hs-var hs-var">step'</span></a></span></span><span> </span><span id="local-6989586621679082939"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082939"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679082938"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082938"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">a -&gt; Bool
</span><a href="#local-6989586621679082944"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082938"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679082943"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082939"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082938"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082939"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1235"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#prefilter"><span class="hs-pragma hs-type">prefilter</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1236"></span><span>
</span><span id="line-1237"></span><span class="hs-comment">{-| @(prefilterM f folder)@ returns a new 'FoldM' where the folder's input is used
  only when the input satisfies a monadic predicate f.
-}</span><span>
</span><span id="line-1240"></span><span id="local-6989586621679084474"><span id="local-6989586621679084475"><span id="local-6989586621679084476"><span class="annot"><a href="Control.Foldl.html#prefilterM"><span class="hs-identifier hs-type">prefilterM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679084476"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084475"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084476"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084476"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084475"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084474"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084476"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084475"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084474"><span class="hs-identifier hs-type">r</span></a></span></span></span></span><span>
</span><span id="line-1241"></span><span id="prefilterM"><span class="annot"><span class="annottext">prefilterM :: forall (m :: * -&gt; *) a r.
Monad m =&gt;
(a -&gt; m Bool) -&gt; FoldM m a r -&gt; FoldM m a r
</span><a href="Control.Foldl.html#prefilterM"><span class="hs-identifier hs-var hs-var">prefilterM</span></a></span></span><span> </span><span id="local-6989586621679082936"><span class="annot"><span class="annottext">a -&gt; m Bool
</span><a href="#local-6989586621679082936"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span id="local-6989586621679082935"><span class="annot"><span class="annottext">x -&gt; a -&gt; m x
</span><a href="#local-6989586621679082935"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679082934"><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621679082934"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621679082933"><span class="annot"><span class="annottext">x -&gt; m r
</span><a href="#local-6989586621679082933"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b x.
(x -&gt; a -&gt; m x) -&gt; m x -&gt; (x -&gt; m b) -&gt; FoldM m a b
</span><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-var">FoldM</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; m x
</span><a href="#local-6989586621679082932"><span class="hs-identifier hs-var">step'</span></a></span><span> </span><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621679082934"><span class="hs-identifier hs-var">begin</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; m r
</span><a href="#local-6989586621679082933"><span class="hs-identifier hs-var">done</span></a></span><span>
</span><span id="line-1242"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1243"></span><span>    </span><span id="local-6989586621679082932"><span class="annot"><span class="annottext">step' :: x -&gt; a -&gt; m x
</span><a href="#local-6989586621679082932"><span class="hs-identifier hs-var hs-var">step'</span></a></span></span><span> </span><span id="local-6989586621679082929"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082929"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679082928"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082928"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1244"></span><span>      </span><span id="local-6989586621679082927"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679082927"><span class="hs-identifier hs-var">use</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">a -&gt; m Bool
</span><a href="#local-6989586621679082936"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082928"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-1245"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679082927"><span class="hs-identifier hs-var">use</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; m x
</span><a href="#local-6989586621679082935"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082929"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082928"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082929"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1246"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#prefilterM"><span class="hs-pragma hs-type">prefilterM</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1247"></span><span>
</span><span id="line-1248"></span><span class="hs-comment">{-| Transforms a 'Fold' into one which ignores elements
    until they stop satisfying a predicate

&gt; fold (predropWhile p folder) list = fold folder (dropWhile p list)

&gt;&gt;&gt; fold (predropWhile (&gt;5) Control.Foldl.sum) [10,9,5,9]
14
-}</span><span>
</span><span id="line-1256"></span><span id="local-6989586621679082925"><span id="local-6989586621679082926"><span class="annot"><a href="Control.Foldl.html#predropWhile"><span class="hs-identifier hs-type">predropWhile</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679082926"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082926"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082925"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082926"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082925"><span class="hs-identifier hs-type">r</span></a></span></span></span><span>
</span><span id="line-1257"></span><span id="predropWhile"><span class="annot"><span class="annottext">predropWhile :: forall a r. (a -&gt; Bool) -&gt; Fold a r -&gt; Fold a r
</span><a href="Control.Foldl.html#predropWhile"><span class="hs-identifier hs-var hs-var">predropWhile</span></a></span></span><span> </span><span id="local-6989586621679082924"><span class="annot"><span class="annottext">a -&gt; Bool
</span><a href="#local-6989586621679082924"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span id="local-6989586621679082923"><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679082923"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679082922"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082922"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621679082921"><span class="annot"><span class="annottext">x -&gt; r
</span><a href="#local-6989586621679082921"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">Pair Bool x -&gt; a -&gt; Pair Bool x
</span><a href="#local-6989586621679082920"><span class="hs-identifier hs-var">step'</span></a></span><span> </span><span class="annot"><span class="annottext">Pair Bool x
</span><a href="#local-6989586621679082919"><span class="hs-identifier hs-var">begin'</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a}. Pair a x -&gt; r
</span><a href="#local-6989586621679082918"><span class="hs-identifier hs-var">done'</span></a></span><span>
</span><span id="line-1258"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1259"></span><span>    </span><span id="local-6989586621679082920"><span class="annot"><span class="annottext">step' :: Pair Bool x -&gt; a -&gt; Pair Bool x
</span><a href="#local-6989586621679082920"><span class="hs-identifier hs-var hs-var">step'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span id="local-6989586621679082917"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679082917"><span class="hs-identifier hs-var">dropping</span></a></span></span><span> </span><span id="local-6989586621679082916"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082916"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679082915"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082915"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679082917"><span class="hs-identifier hs-var">dropping</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Bool
</span><a href="#local-6989586621679082924"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082915"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-1260"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; Pair a b
</span><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-var">Pair</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082916"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1261"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; Pair a b
</span><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-var">Pair</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679082923"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082916"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082915"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1262"></span><span>    </span><span id="local-6989586621679082919"><span class="annot"><span class="annottext">begin' :: Pair Bool x
</span><a href="#local-6989586621679082919"><span class="hs-identifier hs-var hs-var">begin'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; Pair a b
</span><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-var">Pair</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082922"><span class="hs-identifier hs-var">begin</span></a></span><span>
</span><span id="line-1263"></span><span>    </span><span id="local-6989586621679082918"><span class="annot"><span class="annottext">done' :: Pair a x -&gt; r
</span><a href="#local-6989586621679082918"><span class="hs-identifier hs-var hs-var">done'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.Internal.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679082914"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082914"><span class="hs-identifier hs-var">state</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x -&gt; r
</span><a href="#local-6989586621679082921"><span class="hs-identifier hs-var">done</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082914"><span class="hs-identifier hs-var">state</span></a></span><span>
</span><span id="line-1264"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#predropWhile"><span class="hs-pragma hs-type">predropWhile</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1265"></span><span>
</span><span id="line-1266"></span><span class="hs-comment">{-| @(drop n folder)@ returns a new 'Fold' that ignores the first @n@ inputs but
otherwise behaves the same as the original fold.

&gt; fold (drop n folder) list = fold folder (Data.List.genericDrop n list)

&gt;&gt;&gt; Foldl.fold (Foldl.drop 3 Foldl.sum) [10, 20, 30, 1, 2, 3]
6

&gt;&gt;&gt; Foldl.fold (Foldl.drop 10 Foldl.sum) [10, 20, 30, 1, 2, 3]
0
-}</span><span>
</span><span id="line-1277"></span><span>
</span><span id="line-1278"></span><span id="local-6989586621679084464"><span id="local-6989586621679084465"><span class="annot"><a href="Control.Foldl.html#drop"><span class="hs-identifier hs-type">drop</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084465"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084464"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084465"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084464"><span class="hs-identifier hs-type">b</span></a></span></span></span><span>
</span><span id="line-1279"></span><span id="drop"><span class="annot"><span class="annottext">drop :: forall a b. Natural -&gt; Fold a b -&gt; Fold a b
</span><a href="Control.Foldl.html#drop"><span class="hs-identifier hs-var hs-var">drop</span></a></span></span><span> </span><span id="local-6989586621679082913"><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679082913"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span id="local-6989586621679082908"><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679082908"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679082907"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082907"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621679082906"><span class="annot"><span class="annottext">x -&gt; b
</span><a href="#local-6989586621679082906"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a}. (Eq a, Num a) =&gt; (a, x) -&gt; a -&gt; (a, x)
</span><a href="#local-6989586621679082905"><span class="hs-identifier hs-var">step'</span></a></span><span> </span><span class="annot"><span class="annottext">(Natural, x)
</span><a href="#local-6989586621679082904"><span class="hs-identifier hs-var">begin'</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a}. (a, x) -&gt; b
</span><a href="#local-6989586621679082903"><span class="hs-identifier hs-var">done'</span></a></span><span>
</span><span id="line-1280"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1281"></span><span>    </span><span id="local-6989586621679082904"><span class="annot"><span class="annottext">begin' :: (Natural, x)
</span><a href="#local-6989586621679082904"><span class="hs-identifier hs-var hs-var">begin'</span></a></span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679082913"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082907"><span class="hs-identifier hs-var">begin</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1282"></span><span>    </span><span id="local-6989586621679082905"><span class="annot"><span class="annottext">step' :: (a, x) -&gt; a -&gt; (a, x)
</span><a href="#local-6989586621679082905"><span class="hs-identifier hs-var hs-var">step'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span>  </span><span id="local-6989586621679082895"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082895"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679082894"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082894"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679082908"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082895"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082894"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1283"></span><span>    </span><span class="annot"><a href="#local-6989586621679082905"><span class="hs-identifier hs-var">step'</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679082893"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082893"><span class="hs-identifier hs-var">n'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679082892"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082892"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082893"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082892"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1284"></span><span>    </span><span id="local-6989586621679082903"><span class="annot"><span class="annottext">done' :: (a, x) -&gt; b
</span><a href="#local-6989586621679082903"><span class="hs-identifier hs-var hs-var">done'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span>  </span><span id="local-6989586621679082891"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082891"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x -&gt; b
</span><a href="#local-6989586621679082906"><span class="hs-identifier hs-var">done</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082891"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-1285"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#drop"><span class="hs-pragma hs-type">drop</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1286"></span><span>
</span><span id="line-1287"></span><span class="hs-comment">{-| @(dropM n folder)@ returns a new 'FoldM' that ignores the first @n@ inputs but
otherwise behaves the same as the original fold.

&gt; foldM (dropM n folder) list = foldM folder (Data.List.genericDrop n list)

&gt;&gt;&gt; Foldl.foldM (Foldl.dropM 3 (Foldl.generalize Foldl.sum)) [10, 20, 30, 1, 2, 3]
6

&gt;&gt;&gt; Foldl.foldM (Foldl.dropM 10 (Foldl.generalize Foldl.sum)) [10, 20, 30, 1, 2, 3]
0
-}</span><span>
</span><span id="line-1298"></span><span>
</span><span id="line-1299"></span><span id="local-6989586621679084456"><span id="local-6989586621679084457"><span id="local-6989586621679084458"><span class="annot"><a href="Control.Foldl.html#dropM"><span class="hs-identifier hs-type">dropM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679084458"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084458"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084457"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084456"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084458"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084457"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084456"><span class="hs-identifier hs-type">b</span></a></span></span></span></span><span>
</span><span id="line-1300"></span><span id="dropM"><span class="annot"><span class="annottext">dropM :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
Natural -&gt; FoldM m a b -&gt; FoldM m a b
</span><a href="Control.Foldl.html#dropM"><span class="hs-identifier hs-var hs-var">dropM</span></a></span></span><span> </span><span id="local-6989586621679082887"><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679082887"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span id="local-6989586621679082884"><span class="annot"><span class="annottext">x -&gt; a -&gt; m x
</span><a href="#local-6989586621679082884"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679082883"><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621679082883"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621679082882"><span class="annot"><span class="annottext">x -&gt; m b
</span><a href="#local-6989586621679082882"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b x.
(x -&gt; a -&gt; m x) -&gt; m x -&gt; (x -&gt; m b) -&gt; FoldM m a b
</span><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-var">FoldM</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a}. (Eq a, Num a) =&gt; (a, x) -&gt; a -&gt; m (a, x)
</span><a href="#local-6989586621679082881"><span class="hs-identifier hs-var">step'</span></a></span><span> </span><span class="annot"><span class="annottext">m (Natural, x)
</span><a href="#local-6989586621679082880"><span class="hs-identifier hs-var">begin'</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a}. (a, x) -&gt; m b
</span><a href="#local-6989586621679082879"><span class="hs-identifier hs-var">done'</span></a></span><span>
</span><span id="line-1301"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1302"></span><span>    </span><span id="local-6989586621679082880"><span class="annot"><span class="annottext">begin' :: m (Natural, x)
</span><a href="#local-6989586621679082880"><span class="hs-identifier hs-var hs-var">begin'</span></a></span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679082877"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082877"><span class="hs-identifier hs-var">s</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679082887"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082877"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621679082883"><span class="hs-identifier hs-var">begin</span></a></span><span>
</span><span id="line-1303"></span><span>    </span><span id="local-6989586621679082881"><span class="annot"><span class="annottext">step' :: (a, x) -&gt; a -&gt; m (a, x)
</span><a href="#local-6989586621679082881"><span class="hs-identifier hs-var hs-var">step'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span>  </span><span id="local-6989586621679082867"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082867"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679082866"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082866"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679082865"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082865"><span class="hs-identifier hs-var">s'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082865"><span class="hs-identifier hs-var">s'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x -&gt; a -&gt; m x
</span><a href="#local-6989586621679082884"><span class="hs-identifier hs-var">step</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082867"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082866"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1304"></span><span>    </span><span class="annot"><a href="#local-6989586621679082881"><span class="hs-identifier hs-var">step'</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679082864"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082864"><span class="hs-identifier hs-var">n'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679082863"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082863"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082864"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082863"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1305"></span><span>    </span><span id="local-6989586621679082879"><span class="annot"><span class="annottext">done' :: (a, x) -&gt; m b
</span><a href="#local-6989586621679082879"><span class="hs-identifier hs-var hs-var">done'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span>  </span><span id="local-6989586621679082862"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082862"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x -&gt; m b
</span><a href="#local-6989586621679082882"><span class="hs-identifier hs-var">done</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082862"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-1306"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#dropM"><span class="hs-pragma hs-type">dropM</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1307"></span><span>
</span><span id="line-1308"></span><span class="hs-comment">{-| A handler for the upstream input of a `Fold`

    Any lens, traversal, or prism will type-check as a `Handler`
-}</span><span>
</span><span id="line-1312"></span><span class="hs-keyword">type</span><span> </span><span id="Handler"><span class="annot"><a href="Control.Foldl.html#Handler"><span class="hs-identifier hs-var">Handler</span></a></span></span><span> </span><span id="local-6989586621679082861"><span class="annot"><a href="#local-6989586621679082861"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679082860"><span class="annot"><a href="#local-6989586621679082860"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1313"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679082859"><span class="annot"><a href="#local-6989586621679082859"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679082860"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Const</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Dual</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Endo</span></span><span> </span><span class="annot"><a href="#local-6989586621679082859"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679082860"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679082861"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Const</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Dual</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Endo</span></span><span> </span><span class="annot"><a href="#local-6989586621679082859"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679082861"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1314"></span><span>
</span><span id="line-1315"></span><span class="hs-comment">{-| @(handles t folder)@ transforms the input of a `Fold` using a lens,
    traversal, or prism:

&gt; handles _1       :: Fold a r -&gt; Fold (a, b) r
&gt; handles _Left    :: Fold a r -&gt; Fold (Either a b) r
&gt; handles traverse :: Traversable t =&gt; Fold a r -&gt; Fold (t a) r
&gt; handles folded   :: Foldable    t =&gt; Fold a r -&gt; Fold (t a) r

&gt;&gt;&gt; fold (handles traverse sum) [[1..5],[6..10]]
55

&gt;&gt;&gt; fold (handles (traverse.traverse) sum) [[Nothing, Just 2, Just 7],[Just 13, Nothing, Just 20]]
42

&gt;&gt;&gt; fold (handles (filtered even) sum) [1..10]
30

&gt;&gt;&gt; fold (handles _2 Foldl.mconcat) [(1,&quot;Hello &quot;),(2,&quot;World&quot;),(3,&quot;!&quot;)]
&quot;Hello World!&quot;

&gt; handles id = id
&gt;
&gt; handles (f . g) = handles f . handles g

&gt; handles t (pure r) = pure r
&gt;
&gt; handles t (f &lt;*&gt; x) = handles t f &lt;*&gt; handles t x
-}</span><span>
</span><span id="line-1343"></span><span id="local-6989586621679084446"><span id="local-6989586621679084448"><span id="local-6989586621679084449"><span class="annot"><a href="Control.Foldl.html#handles"><span class="hs-identifier hs-type">handles</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Foldl.html#Handler"><span class="hs-identifier hs-type">Handler</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084449"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084448"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084448"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084446"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084449"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084446"><span class="hs-identifier hs-type">r</span></a></span></span></span></span><span>
</span><span id="line-1344"></span><span id="handles"><span class="annot"><span class="annottext">handles :: forall a b r. Handler a b -&gt; Fold b r -&gt; Fold a r
</span><a href="Control.Foldl.html#handles"><span class="hs-identifier hs-var hs-var">handles</span></a></span></span><span> </span><span id="local-6989586621679082858"><span class="annot"><span class="annottext">Handler a b
</span><a href="#local-6989586621679082858"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span id="local-6989586621679082857"><span class="annot"><span class="annottext">x -&gt; b -&gt; x
</span><a href="#local-6989586621679082857"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679082856"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082856"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621679082855"><span class="annot"><span class="annottext">x -&gt; r
</span><a href="#local-6989586621679082855"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679082854"><span class="hs-identifier hs-var">step'</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082856"><span class="hs-identifier hs-var">begin</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; r
</span><a href="#local-6989586621679082855"><span class="hs-identifier hs-var">done</span></a></span><span>
</span><span id="line-1345"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1346"></span><span>    </span><span id="local-6989586621679082854"><span class="annot"><span class="annottext">step' :: x -&gt; a -&gt; x
</span><a href="#local-6989586621679082854"><span class="hs-identifier hs-var hs-var">step'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Endo a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">appEndo</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a. Dual a -&gt; a
</span><span class="hs-identifier hs-var">getDual</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall {k} a (b :: k). Const a b -&gt; a
</span><span class="hs-identifier hs-var">getConst</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Handler a b
</span><a href="#local-6989586621679082858"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} a (b :: k). a -&gt; Const a b
</span><span class="hs-identifier hs-var">Const</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Dual a
</span><span class="hs-identifier hs-var">Dual</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; a) -&gt; Endo a
</span><span class="hs-identifier hs-var">Endo</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; b -&gt; x
</span><a href="#local-6989586621679082857"><span class="hs-identifier hs-var">step</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1347"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#handles"><span class="hs-pragma hs-type">handles</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1348"></span><span>
</span><span id="line-1349"></span><span class="hs-comment">{- | @(foldOver f folder xs)@ folds all values from a Lens, Traversal, Prism or Fold with the given folder

&gt;&gt;&gt; foldOver (_Just . both) Foldl.sum (Just (2, 3))
5

&gt;&gt;&gt; foldOver (_Just . both) Foldl.sum Nothing
0

&gt; Foldl.foldOver f folder xs == Foldl.fold folder (xs^..f)

&gt; Foldl.foldOver (folded.f) folder == Foldl.fold (handles f folder)

&gt; Foldl.foldOver folded == Foldl.fold

-}</span><span>
</span><span id="line-1364"></span><span id="local-6989586621679084426"><span id="local-6989586621679084427"><span id="local-6989586621679084428"><span class="annot"><a href="Control.Foldl.html#foldOver"><span class="hs-identifier hs-type">foldOver</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Foldl.html#Handler"><span class="hs-identifier hs-type">Handler</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084428"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084427"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084427"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084426"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084428"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084426"><span class="hs-identifier hs-type">b</span></a></span></span></span></span><span>
</span><span id="line-1365"></span><span id="foldOver"><span class="annot"><span class="annottext">foldOver :: forall s a b. Handler s a -&gt; Fold a b -&gt; s -&gt; b
</span><a href="Control.Foldl.html#foldOver"><span class="hs-identifier hs-var hs-var">foldOver</span></a></span></span><span> </span><span id="local-6989586621679082847"><span class="annot"><span class="annottext">Handler s a
</span><a href="#local-6989586621679082847"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span id="local-6989586621679082846"><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679082846"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679082845"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082845"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621679082844"><span class="annot"><span class="annottext">x -&gt; b
</span><a href="#local-6989586621679082844"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1366"></span><span>  </span><span class="annot"><span class="annottext">x -&gt; b
</span><a href="#local-6989586621679082844"><span class="hs-identifier hs-var">done</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">forall a. Endo a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">appEndo</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082845"><span class="hs-identifier hs-var">begin</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a. Dual a -&gt; a
</span><span class="hs-identifier hs-var">getDual</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall {k} a (b :: k). Const a b -&gt; a
</span><span class="hs-identifier hs-var">getConst</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Handler s a
</span><a href="#local-6989586621679082847"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} a (b :: k). a -&gt; Const a b
</span><span class="hs-identifier hs-var">Const</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Dual a
</span><span class="hs-identifier hs-var">Dual</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; a) -&gt; Endo a
</span><span class="hs-identifier hs-var">Endo</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679082846"><span class="hs-identifier hs-var">step</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1367"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#foldOver"><span class="hs-pragma hs-type">foldOver</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1368"></span><span>
</span><span id="line-1369"></span><span class="hs-comment">{-|
&gt; instance Monad m =&gt; Monoid (EndoM m a) where
&gt;     mempty = EndoM return
&gt;     mappend (EndoM f) (EndoM g) = EndoM (f &lt;=&lt; g)
-}</span><span>
</span><span id="line-1374"></span><span class="hs-keyword">newtype</span><span> </span><span id="EndoM"><span class="annot"><a href="Control.Foldl.html#EndoM"><span class="hs-identifier hs-var">EndoM</span></a></span></span><span> </span><span id="local-6989586621679084421"><span class="annot"><a href="#local-6989586621679084421"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679084420"><span class="annot"><a href="#local-6989586621679084420"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="EndoM"><span class="annot"><a href="Control.Foldl.html#EndoM"><span class="hs-identifier hs-var">EndoM</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="appEndoM"><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. EndoM m a -&gt; a -&gt; m a
</span><a href="Control.Foldl.html#appEndoM"><span class="hs-identifier hs-var hs-var">appEndoM</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679084420"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084421"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084420"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1375"></span><span>
</span><span id="line-1376"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679082837"><span id="local-6989586621679082839"><span id="local-6989586621679084416"><span id="local-6989586621679084417"><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679084417"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#EndoM"><span class="hs-identifier hs-type">EndoM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084417"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084416"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1377"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#EndoM"><span class="hs-identifier hs-type">EndoM</span></a></span><span> </span><span id="local-6989586621679082835"><span class="annot"><span class="annottext">a -&gt; m a
</span><a href="#local-6989586621679082835"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679082834"><span class="annot"><span class="annottext">&lt;&gt; :: EndoM m a -&gt; EndoM m a -&gt; EndoM m a
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#EndoM"><span class="hs-identifier hs-type">EndoM</span></a></span><span> </span><span id="local-6989586621679082833"><span class="annot"><span class="annottext">a -&gt; m a
</span><a href="#local-6989586621679082833"><span class="hs-identifier hs-var">g</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. (a -&gt; m a) -&gt; EndoM m a
</span><a href="Control.Foldl.html#EndoM"><span class="hs-identifier hs-var">EndoM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; m a
</span><a href="#local-6989586621679082835"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) b c a.
Monad m =&gt;
(b -&gt; m c) -&gt; (a -&gt; m b) -&gt; a -&gt; m c
</span><span class="hs-operator hs-var">&lt;=&lt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; m a
</span><a href="#local-6989586621679082833"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1378"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&lt;&gt;</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1379"></span><span>
</span><span id="line-1380"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679082827"><span id="local-6989586621679084410"><span id="local-6989586621679084411"><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679084411"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#EndoM"><span class="hs-identifier hs-type">EndoM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084411"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084410"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1381"></span><span>    </span><span id="local-6989586621679082825"><span class="annot"><span class="annottext">mempty :: EndoM m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. (a -&gt; m a) -&gt; EndoM m a
</span><a href="Control.Foldl.html#EndoM"><span class="hs-identifier hs-var">EndoM</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span>
</span><span id="line-1382"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">mempty</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1383"></span><span>
</span><span id="line-1384"></span><span>    </span><span id="local-6989586621679082823"><span class="annot"><span class="annottext">mappend :: EndoM m a -&gt; EndoM m a -&gt; EndoM m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">mappend</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(&lt;&gt;)</span></span><span>
</span><span id="line-1385"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">mappend</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1386"></span><span>
</span><span id="line-1387"></span><span class="hs-comment">{-| A Handler for the upstream input of `FoldM`

    Any lens, traversal, or prism will type-check as a `HandlerM`
-}</span><span>
</span><span id="line-1391"></span><span class="hs-keyword">type</span><span> </span><span id="HandlerM"><span class="annot"><a href="Control.Foldl.html#HandlerM"><span class="hs-identifier hs-var">HandlerM</span></a></span></span><span> </span><span id="local-6989586621679082822"><span class="annot"><a href="#local-6989586621679082822"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679082821"><span class="annot"><a href="#local-6989586621679082821"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679082820"><span class="annot"><a href="#local-6989586621679082820"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1392"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679082819"><span class="annot"><a href="#local-6989586621679082819"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679082820"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Const</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Dual</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#EndoM"><span class="hs-identifier hs-type">EndoM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082822"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082819"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679082820"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679082821"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Const</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Dual</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#EndoM"><span class="hs-identifier hs-type">EndoM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082822"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082819"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679082821"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1393"></span><span>
</span><span id="line-1394"></span><span class="hs-comment">{-| @(handlesM t folder)@ transforms the input of a `FoldM` using a lens,
    traversal, or prism:

&gt; handlesM _1       :: FoldM m a r -&gt; FoldM (a, b) r
&gt; handlesM _Left    :: FoldM m a r -&gt; FoldM (Either a b) r
&gt; handlesM traverse :: Traversable t =&gt; FoldM m a r -&gt; FoldM m (t a) r
&gt; handlesM folded   :: Foldable    t =&gt; FoldM m a r -&gt; FoldM m (t a) r

    `handlesM` obeys these laws:

&gt; handlesM id = id
&gt;
&gt; handlesM (f . g) = handlesM f . handlesM g

&gt; handlesM t (pure r) = pure r
&gt;
&gt; handlesM t (f &lt;*&gt; x) = handlesM t f &lt;*&gt; handlesM t x
-}</span><span>
</span><span id="line-1412"></span><span id="local-6989586621679084405"><span id="local-6989586621679084407"><span id="local-6989586621679084408"><span id="local-6989586621679084409"><span class="annot"><a href="Control.Foldl.html#handlesM"><span class="hs-identifier hs-type">handlesM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Foldl.html#HandlerM"><span class="hs-identifier hs-type">HandlerM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084409"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084408"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084407"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084409"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084407"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084405"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084409"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084408"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084405"><span class="hs-identifier hs-type">r</span></a></span></span></span></span></span><span>
</span><span id="line-1413"></span><span id="handlesM"><span class="annot"><span class="annottext">handlesM :: forall (m :: * -&gt; *) a b r.
HandlerM m a b -&gt; FoldM m b r -&gt; FoldM m a r
</span><a href="Control.Foldl.html#handlesM"><span class="hs-identifier hs-var hs-var">handlesM</span></a></span></span><span> </span><span id="local-6989586621679082818"><span class="annot"><span class="annottext">HandlerM m a b
</span><a href="#local-6989586621679082818"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span id="local-6989586621679082817"><span class="annot"><span class="annottext">x -&gt; b -&gt; m x
</span><a href="#local-6989586621679082817"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679082816"><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621679082816"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621679082815"><span class="annot"><span class="annottext">x -&gt; m r
</span><a href="#local-6989586621679082815"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b x.
(x -&gt; a -&gt; m x) -&gt; m x -&gt; (x -&gt; m b) -&gt; FoldM m a b
</span><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-var">FoldM</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; m x
</span><a href="#local-6989586621679082814"><span class="hs-identifier hs-var">step'</span></a></span><span> </span><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621679082816"><span class="hs-identifier hs-var">begin</span></a></span><span> </span><span class="annot"><span class="annottext">x -&gt; m r
</span><a href="#local-6989586621679082815"><span class="hs-identifier hs-var">done</span></a></span><span>
</span><span id="line-1414"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1415"></span><span>    </span><span id="local-6989586621679082814"><span class="annot"><span class="annottext">step' :: x -&gt; a -&gt; m x
</span><a href="#local-6989586621679082814"><span class="hs-identifier hs-var hs-var">step'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. EndoM m a -&gt; a -&gt; m a
</span><a href="Control.Foldl.html#appEndoM"><span class="hs-identifier hs-var">appEndoM</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a. Dual a -&gt; a
</span><span class="hs-identifier hs-var">getDual</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall {k} a (b :: k). Const a b -&gt; a
</span><span class="hs-identifier hs-var">getConst</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HandlerM m a b
</span><a href="#local-6989586621679082818"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} a (b :: k). a -&gt; Const a b
</span><span class="hs-identifier hs-var">Const</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Dual a
</span><span class="hs-identifier hs-var">Dual</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. (a -&gt; m a) -&gt; EndoM m a
</span><a href="Control.Foldl.html#EndoM"><span class="hs-identifier hs-var">EndoM</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; b -&gt; m x
</span><a href="#local-6989586621679082817"><span class="hs-identifier hs-var">step</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1416"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#handlesM"><span class="hs-pragma hs-type">handlesM</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1417"></span><span>
</span><span id="line-1418"></span><span class="hs-comment">{- | @(foldOverM f folder xs)@ folds all values from a Lens, Traversal, Prism or Fold monadically with the given folder

&gt; Foldl.foldOverM (folded.f) folder == Foldl.foldM (handlesM f folder)

&gt; Foldl.foldOverM folded == Foldl.foldM

-}</span><span>
</span><span id="line-1425"></span><span id="local-6989586621679084396"><span id="local-6989586621679084397"><span id="local-6989586621679084398"><span id="local-6989586621679084399"><span class="annot"><a href="Control.Foldl.html#foldOverM"><span class="hs-identifier hs-type">foldOverM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679084399"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#HandlerM"><span class="hs-identifier hs-type">HandlerM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084399"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084398"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084397"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084399"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084397"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084396"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084398"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084399"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084396"><span class="hs-identifier hs-type">b</span></a></span></span></span></span></span><span>
</span><span id="line-1426"></span><span id="foldOverM"><span class="annot"><span class="annottext">foldOverM :: forall (m :: * -&gt; *) s a b.
Monad m =&gt;
HandlerM m s a -&gt; FoldM m a b -&gt; s -&gt; m b
</span><a href="Control.Foldl.html#foldOverM"><span class="hs-identifier hs-var hs-var">foldOverM</span></a></span></span><span> </span><span id="local-6989586621679082812"><span class="annot"><span class="annottext">HandlerM m s a
</span><a href="#local-6989586621679082812"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span id="local-6989586621679082809"><span class="annot"><span class="annottext">x -&gt; a -&gt; m x
</span><a href="#local-6989586621679082809"><span class="hs-identifier hs-var">step</span></a></span></span><span> </span><span id="local-6989586621679082808"><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621679082808"><span class="hs-identifier hs-var">begin</span></a></span></span><span> </span><span id="local-6989586621679082807"><span class="annot"><span class="annottext">x -&gt; m b
</span><a href="#local-6989586621679082807"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679082806"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679082806"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1427"></span><span>  </span><span id="local-6989586621679082805"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082805"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m x
</span><a href="#local-6989586621679082808"><span class="hs-identifier hs-var">begin</span></a></span><span>
</span><span id="line-1428"></span><span>  </span><span id="local-6989586621679082804"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082804"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. EndoM m a -&gt; a -&gt; m a
</span><a href="Control.Foldl.html#appEndoM"><span class="hs-identifier hs-var">appEndoM</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082805"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a. Dual a -&gt; a
</span><span class="hs-identifier hs-var">getDual</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall {k} a (b :: k). Const a b -&gt; a
</span><span class="hs-identifier hs-var">getConst</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HandlerM m s a
</span><a href="#local-6989586621679082812"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} a (b :: k). a -&gt; Const a b
</span><span class="hs-identifier hs-var">Const</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Dual a
</span><span class="hs-identifier hs-var">Dual</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. (a -&gt; m a) -&gt; EndoM m a
</span><a href="Control.Foldl.html#EndoM"><span class="hs-identifier hs-var">EndoM</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; m x
</span><a href="#local-6989586621679082809"><span class="hs-identifier hs-var">step</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679082806"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-1429"></span><span>  </span><span class="annot"><span class="annottext">x -&gt; m b
</span><a href="#local-6989586621679082807"><span class="hs-identifier hs-var">done</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082804"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-1430"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#foldOverM"><span class="hs-pragma hs-type">foldOverM</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1431"></span><span>
</span><span id="line-1432"></span><span class="hs-comment">{-|
&gt; folded :: Foldable t =&gt; Fold (t a) a
&gt;
&gt; handles folded :: Foldable t =&gt; Fold a r -&gt; Fold (t a) r
-}</span><span>
</span><span id="line-1437"></span><span id="local-6989586621679084387"><span id="local-6989586621679084388"><span id="local-6989586621679084390"><span class="annot"><a href="Control.Foldl.html#folded"><span class="hs-identifier hs-type">folded</span></a></span><span>
</span><span id="line-1438"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Contravariant</span></span><span> </span><span class="annot"><a href="#local-6989586621679084390"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679084390"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Foldable</span></span><span> </span><span class="annot"><a href="#local-6989586621679084388"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1439"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084387"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084390"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084387"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084388"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084387"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084390"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084388"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084387"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-1440"></span><span id="folded"><span class="annot"><span class="annottext">folded :: forall (f :: * -&gt; *) (t :: * -&gt; *) a.
(Contravariant f, Applicative f, Foldable t) =&gt;
(a -&gt; f a) -&gt; t a -&gt; f (t a)
</span><a href="Control.Foldl.html#folded"><span class="hs-identifier hs-var hs-var">folded</span></a></span></span><span> </span><span id="local-6989586621679082797"><span class="annot"><span class="annottext">a -&gt; f a
</span><a href="#local-6989586621679082797"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679082796"><span class="annot"><span class="annottext">t a
</span><a href="#local-6989586621679082796"><span class="hs-identifier hs-var">ts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a' a.
Contravariant f =&gt;
(a' -&gt; a) -&gt; f a -&gt; f a'
</span><span class="hs-identifier hs-var">contramap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">t a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f ()
</span><span class="hs-identifier hs-var">F.traverse_</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; f a
</span><a href="#local-6989586621679082797"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">t a
</span><a href="#local-6989586621679082796"><span class="hs-identifier hs-var">ts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1441"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#folded"><span class="hs-pragma hs-type">folded</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1442"></span><span>
</span><span id="line-1443"></span><span class="hs-comment">{-|
&gt;&gt;&gt; fold (handles (filtered even) sum) [1..10]
30

&gt;&gt;&gt; foldM (handlesM (filtered even) (Foldl.mapM_ print)) [1..10]
2
4
6
8
10

-}</span><span>
</span><span id="line-1455"></span><span id="local-6989586621679084375"><span id="local-6989586621679084376"><span class="annot"><a href="Control.Foldl.html#filtered"><span class="hs-identifier hs-type">filtered</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679084376"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084375"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084375"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084376"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084375"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084376"><span class="hs-identifier hs-type">m</span></a></span></span></span><span>
</span><span id="line-1456"></span><span id="filtered"><span class="annot"><span class="annottext">filtered :: forall m a. Monoid m =&gt; (a -&gt; Bool) -&gt; (a -&gt; m) -&gt; a -&gt; m
</span><a href="Control.Foldl.html#filtered"><span class="hs-identifier hs-var hs-var">filtered</span></a></span></span><span> </span><span id="local-6989586621679082791"><span class="annot"><span class="annottext">a -&gt; Bool
</span><a href="#local-6989586621679082791"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679082790"><span class="annot"><span class="annottext">a -&gt; m
</span><a href="#local-6989586621679082790"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679082789"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082789"><span class="hs-identifier hs-var">x</span></a></span></span><span>
</span><span id="line-1457"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">a -&gt; Bool
</span><a href="#local-6989586621679082791"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082789"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; m
</span><a href="#local-6989586621679082790"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082789"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1458"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1459"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#filtered"><span class="hs-pragma hs-type">filtered</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1460"></span><span>
</span><span id="line-1461"></span><span class="hs-comment">{-| Perform a 'Fold' while grouping the data according to a specified group
projection function. Returns the folded result grouped as a map keyed by the
group.

-}</span><span>
</span><span id="line-1466"></span><span id="local-6989586621679084370"><span id="local-6989586621679084371"><span id="local-6989586621679084372"><span class="annot"><a href="Control.Foldl.html#groupBy"><span class="hs-identifier hs-type">groupBy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679084372"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084371"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679084372"><span class="hs-identifier hs-type">g</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084371"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084370"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084371"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="#local-6989586621679084372"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084370"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-1467"></span><span id="groupBy"><span class="annot"><span class="annottext">groupBy :: forall g a r. Ord g =&gt; (a -&gt; g) -&gt; Fold a r -&gt; Fold a (Map g r)
</span><a href="Control.Foldl.html#groupBy"><span class="hs-identifier hs-var hs-var">groupBy</span></a></span></span><span> </span><span id="local-6989586621679082787"><span class="annot"><span class="annottext">a -&gt; g
</span><a href="#local-6989586621679082787"><span class="hs-identifier hs-var">grouper</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span id="local-6989586621679082784"><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679082784"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679082783"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082783"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679082782"><span class="annot"><span class="annottext">x -&gt; r
</span><a href="#local-6989586621679082782"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="annot"><span class="annottext">Map g x -&gt; a -&gt; Map g x
</span><a href="#local-6989586621679082781"><span class="hs-identifier hs-var">f'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; r
</span><a href="#local-6989586621679082782"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1468"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1469"></span><span>    </span><span id="local-6989586621679082781"><span class="annot"><span class="annottext">f' :: Map g x -&gt; a -&gt; Map g x
</span><a href="#local-6989586621679082781"><span class="hs-identifier hs-var hs-var">f'</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679082779"><span class="annot"><span class="annottext">Map g x
</span><a href="#local-6989586621679082779"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679082778"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082778"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k a.
Ord k =&gt;
(Maybe a -&gt; Maybe a) -&gt; k -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">alter</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679082777"><span class="annot"><span class="annottext">Maybe x
</span><a href="#local-6989586621679082777"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679082784"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082783"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe x
</span><a href="#local-6989586621679082777"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082778"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; g
</span><a href="#local-6989586621679082787"><span class="hs-identifier hs-var">grouper</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679082778"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map g x
</span><a href="#local-6989586621679082779"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-1470"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#groupBy"><span class="hs-pragma hs-type">groupBy</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1471"></span><span>
</span><span id="line-1472"></span><span class="hs-comment">{-| Combine two folds into a fold over inputs for either of them.
-}</span><span>
</span><span id="line-1474"></span><span id="local-6989586621679084361"><span id="local-6989586621679084362"><span id="local-6989586621679084363"><span id="local-6989586621679084364"><span class="annot"><a href="Control.Foldl.html#either"><span class="hs-identifier hs-type">either</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084364"><span class="hs-identifier hs-type">a1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084363"><span class="hs-identifier hs-type">b1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084362"><span class="hs-identifier hs-type">a2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084361"><span class="hs-identifier hs-type">b2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="#local-6989586621679084364"><span class="hs-identifier hs-type">a1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084362"><span class="hs-identifier hs-type">a2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084363"><span class="hs-identifier hs-type">b1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679084361"><span class="hs-identifier hs-type">b2</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-1475"></span><span id="either"><span class="annot"><span class="annottext">either :: forall a1 b1 a2 b2.
Fold a1 b1 -&gt; Fold a2 b2 -&gt; Fold (Either a1 a2) (b1, b2)
</span><a href="Control.Foldl.html#either"><span class="hs-identifier hs-var hs-var">either</span></a></span></span><span> </span><span id="local-6989586621679082774"><span class="annot"><span class="annottext">Fold a1 b1
</span><a href="#local-6989586621679082774"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679082773"><span class="annot"><span class="annottext">Fold a2 b2
</span><a href="#local-6989586621679082773"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a b r. Handler a b -&gt; Fold b r -&gt; Fold a r
</span><a href="Control.Foldl.html#handles"><span class="hs-identifier hs-var">handles</span></a></span><span> </span><span class="annot"><span class="annottext">forall a c b. Prism (Either a c) (Either b c) a b
</span><a href="Control.Foldl.Optics.html#_Left"><span class="hs-identifier hs-var">_Left</span></a></span><span> </span><span class="annot"><span class="annottext">Fold a1 b1
</span><a href="#local-6989586621679082774"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a b r. Handler a b -&gt; Fold b r -&gt; Fold a r
</span><a href="Control.Foldl.html#handles"><span class="hs-identifier hs-var">handles</span></a></span><span> </span><span class="annot"><span class="annottext">forall c a b. Prism (Either c a) (Either c b) a b
</span><a href="Control.Foldl.Optics.html#_Right"><span class="hs-identifier hs-var">_Right</span></a></span><span> </span><span class="annot"><span class="annottext">Fold a2 b2
</span><a href="#local-6989586621679082773"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-1476"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#either"><span class="hs-pragma hs-type">either</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1477"></span><span>
</span><span id="line-1478"></span><span class="hs-comment">{-| Combine two monadic folds into a fold over inputs for either of them.
-}</span><span>
</span><span id="line-1480"></span><span id="local-6989586621679084339"><span id="local-6989586621679084340"><span id="local-6989586621679084341"><span id="local-6989586621679084342"><span id="local-6989586621679084343"><span class="annot"><a href="Control.Foldl.html#eitherM"><span class="hs-identifier hs-type">eitherM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679084343"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084343"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084342"><span class="hs-identifier hs-type">a1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084341"><span class="hs-identifier hs-type">b1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084343"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084340"><span class="hs-identifier hs-type">a2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084339"><span class="hs-identifier hs-type">b2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#FoldM"><span class="hs-identifier hs-type">FoldM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084343"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="#local-6989586621679084342"><span class="hs-identifier hs-type">a1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084340"><span class="hs-identifier hs-type">a2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084341"><span class="hs-identifier hs-type">b1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679084339"><span class="hs-identifier hs-type">b2</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-1481"></span><span id="eitherM"><span class="annot"><span class="annottext">eitherM :: forall (m :: * -&gt; *) a1 b1 a2 b2.
Monad m =&gt;
FoldM m a1 b1 -&gt; FoldM m a2 b2 -&gt; FoldM m (Either a1 a2) (b1, b2)
</span><a href="Control.Foldl.html#eitherM"><span class="hs-identifier hs-var hs-var">eitherM</span></a></span></span><span> </span><span id="local-6989586621679082755"><span class="annot"><span class="annottext">FoldM m a1 b1
</span><a href="#local-6989586621679082755"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679082754"><span class="annot"><span class="annottext">FoldM m a2 b2
</span><a href="#local-6989586621679082754"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b r.
HandlerM m a b -&gt; FoldM m b r -&gt; FoldM m a r
</span><a href="Control.Foldl.html#handlesM"><span class="hs-identifier hs-var">handlesM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a c b. Prism (Either a c) (Either b c) a b
</span><a href="Control.Foldl.Optics.html#_Left"><span class="hs-identifier hs-var">_Left</span></a></span><span> </span><span class="annot"><span class="annottext">FoldM m a1 b1
</span><a href="#local-6989586621679082755"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b r.
HandlerM m a b -&gt; FoldM m b r -&gt; FoldM m a r
</span><a href="Control.Foldl.html#handlesM"><span class="hs-identifier hs-var">handlesM</span></a></span><span> </span><span class="annot"><span class="annottext">forall c a b. Prism (Either c a) (Either c b) a b
</span><a href="Control.Foldl.Optics.html#_Right"><span class="hs-identifier hs-var">_Right</span></a></span><span> </span><span class="annot"><span class="annottext">FoldM m a2 b2
</span><a href="#local-6989586621679082754"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-1482"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#eitherM"><span class="hs-pragma hs-type">eitherM</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1483"></span><span>
</span><span id="line-1484"></span><span class="hs-comment">{-| Nest a fold in an applicative.
-}</span><span>
</span><span id="line-1486"></span><span id="local-6989586621679084329"><span id="local-6989586621679084330"><span id="local-6989586621679084331"><span class="annot"><a href="Control.Foldl.html#nest"><span class="hs-identifier hs-type">nest</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679084331"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084330"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084329"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084331"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084330"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679084331"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679084329"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-1487"></span><span id="nest"><span class="annot"><span class="annottext">nest :: forall (f :: * -&gt; *) a b.
Applicative f =&gt;
Fold a b -&gt; Fold (f a) (f b)
</span><a href="Control.Foldl.html#nest"><span class="hs-identifier hs-var hs-var">nest</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-type">Fold</span></a></span><span> </span><span id="local-6989586621679082740"><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679082740"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621679082739"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082739"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679082738"><span class="annot"><span class="annottext">x -&gt; b
</span><a href="#local-6989586621679082738"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1488"></span><span>    </span><span class="annot"><span class="annottext">forall a b x. (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; Fold a b
</span><a href="Control.Foldl.html#Fold"><span class="hs-identifier hs-var">Fold</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679082737"><span class="annot"><span class="annottext">f x
</span><a href="#local-6989586621679082737"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span id="local-6989586621679082736"><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679082736"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b c.
Applicative f =&gt;
(a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><span class="hs-identifier hs-var">liftA2</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; a -&gt; x
</span><a href="#local-6989586621679082740"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">f x
</span><a href="#local-6989586621679082737"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679082736"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1489"></span><span>         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679082739"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1490"></span><span>         </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679082735"><span class="annot"><span class="annottext">f x
</span><a href="#local-6989586621679082735"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; b
</span><a href="#local-6989586621679082738"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">f x
</span><a href="#local-6989586621679082735"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1491"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Control.Foldl.html#nest"><span class="hs-pragma hs-type">nest</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1492"></span><span>
</span><span id="line-1493"></span><span class="hs-comment">{- $reexports
    @Control.Monad.Primitive@ re-exports the 'PrimMonad' type class

    @Data.Foldable@ re-exports the 'Foldable' type class

    @Data.Vector.Generic@ re-exports the 'Vector' type class
-}</span><span>
</span><span id="line-1500"></span></pre></body></html>