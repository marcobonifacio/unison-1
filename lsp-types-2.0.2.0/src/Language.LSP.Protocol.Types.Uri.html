<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DeriveGeneric              #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE InstanceSigs               #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings          #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes                 #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards            #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE TypeSynonymInstances       #-}</span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Language.LSP.Protocol.Types.Uri</span><span>
</span><span id="line-10"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#Uri"><span class="hs-identifier">Uri</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-11"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#uriToFilePath"><span class="hs-identifier">uriToFilePath</span></a></span><span>
</span><span id="line-12"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#filePathToUri"><span class="hs-identifier">filePathToUri</span></a></span><span>
</span><span id="line-13"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier">NormalizedUri</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-14"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#toNormalizedUri"><span class="hs-identifier">toNormalizedUri</span></a></span><span>
</span><span id="line-15"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#fromNormalizedUri"><span class="hs-identifier">fromNormalizedUri</span></a></span><span>
</span><span id="line-16"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier">NormalizedFilePath</span></a></span><span>
</span><span id="line-17"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#toNormalizedFilePath"><span class="hs-identifier">toNormalizedFilePath</span></a></span><span>
</span><span id="line-18"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#fromNormalizedFilePath"><span class="hs-identifier">fromNormalizedFilePath</span></a></span><span>
</span><span id="line-19"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#normalizedFilePathToUri"><span class="hs-identifier">normalizedFilePathToUri</span></a></span><span>
</span><span id="line-20"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#uriToNormalizedFilePath"><span class="hs-identifier">uriToNormalizedFilePath</span></a></span><span>
</span><span id="line-21"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#emptyNormalizedFilePath"><span class="hs-identifier">emptyNormalizedFilePath</span></a></span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-comment">-- Private functions</span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#platformAwareUriToFilePath"><span class="hs-identifier">platformAwareUriToFilePath</span></a></span><span>
</span><span id="line-24"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#platformAwareFilePathToUri"><span class="hs-identifier">platformAwareFilePathToUri</span></a></span><span>
</span><span id="line-25"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.DeepSeq</span></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span>              </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">A</span></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Binary</span></span><span>             </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Binary</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Get</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">get</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">put</span></span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Hashable</span></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">stripPrefix</span></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.String</span></span><span>             </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">IsString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fromString</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span>               </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">GHC.Generics</span></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Network.URI</span></span><span>             </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">authority</span></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Safe</span></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">tailMay</span></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">System.FilePath</span></span><span>         </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">FP</span></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">System.FilePath.Posix</span></span><span>   </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">FPP</span></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">System.FilePath.Windows</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">FPW</span></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">System.Info</span></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Prettyprinter</span></span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span class="hs-comment">-- | The @Uri@ type in the LSP specification.</span><span>
</span><span id="line-46"></span><span id="local-6989586621682126803"><span id="local-6989586621682126804"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="Uri"><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#Uri"><span class="hs-identifier hs-var">Uri</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Uri"><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#Uri"><span class="hs-identifier hs-var">Uri</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AgetUri%3AUri"><span class="annot"><span class="annottext">Uri -&gt; Text
</span><a href="Language.LSP.Protocol.Types.Uri.html#%24sel%3AgetUri%3AUri"><span class="hs-identifier hs-var hs-var">getUri</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-47"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682126795"><span id="local-6989586621682126799"><span class="annot"><span class="annottext">Uri -&gt; Uri -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Uri -&gt; Uri -&gt; Bool
$c/= :: Uri -&gt; Uri -&gt; Bool
== :: Uri -&gt; Uri -&gt; Bool
$c== :: Uri -&gt; Uri -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span id="local-6989586621682126772"><span id="local-6989586621682126774"><span id="local-6989586621682126777"><span id="local-6989586621682126780"><span id="local-6989586621682126783"><span id="local-6989586621682126786"><span id="local-6989586621682126790"><span class="annot"><span class="annottext">Eq Uri
Uri -&gt; Uri -&gt; Bool
Uri -&gt; Uri -&gt; Ordering
Uri -&gt; Uri -&gt; Uri
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: Uri -&gt; Uri -&gt; Uri
$cmin :: Uri -&gt; Uri -&gt; Uri
max :: Uri -&gt; Uri -&gt; Uri
$cmax :: Uri -&gt; Uri -&gt; Uri
&gt;= :: Uri -&gt; Uri -&gt; Bool
$c&gt;= :: Uri -&gt; Uri -&gt; Bool
&gt; :: Uri -&gt; Uri -&gt; Bool
$c&gt; :: Uri -&gt; Uri -&gt; Bool
&lt;= :: Uri -&gt; Uri -&gt; Bool
$c&lt;= :: Uri -&gt; Uri -&gt; Bool
&lt; :: Uri -&gt; Uri -&gt; Bool
$c&lt; :: Uri -&gt; Uri -&gt; Bool
compare :: Uri -&gt; Uri -&gt; Ordering
$ccompare :: Uri -&gt; Uri -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span id="local-6989586621682126754"><span id="local-6989586621682126764"><span id="local-6989586621682126767"><span id="local-6989586621682126769"><span class="annot"><span class="annottext">ReadPrec [Uri]
ReadPrec Uri
Int -&gt; ReadS Uri
ReadS [Uri]
forall a.
(Int -&gt; ReadS a)
-&gt; ReadS [a] -&gt; ReadPrec a -&gt; ReadPrec [a] -&gt; Read a
readListPrec :: ReadPrec [Uri]
$creadListPrec :: ReadPrec [Uri]
readPrec :: ReadPrec Uri
$creadPrec :: ReadPrec Uri
readList :: ReadS [Uri]
$creadList :: ReadS [Uri]
readsPrec :: Int -&gt; ReadS Uri
$creadsPrec :: Int -&gt; ReadS Uri
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Read</span></span></span></span></span></span><span class="hs-special">,</span><span id="local-6989586621682126742"><span id="local-6989586621682126744"><span id="local-6989586621682126750"><span class="annot"><span class="annottext">Int -&gt; Uri -&gt; ShowS
[Uri] -&gt; ShowS
Uri -&gt; SystemOS
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; SystemOS) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [Uri] -&gt; ShowS
$cshowList :: [Uri] -&gt; ShowS
show :: Uri -&gt; SystemOS
$cshow :: Uri -&gt; SystemOS
showsPrec :: Int -&gt; Uri -&gt; ShowS
$cshowsPrec :: Int -&gt; Uri -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">forall x. Rep Uri x -&gt; Uri
forall x. Uri -&gt; Rep Uri x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep Uri x -&gt; Uri
$cfrom :: forall x. Uri -&gt; Rep Uri x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682126731"><span id="local-6989586621682126736"><span class="annot"><span class="annottext">Value -&gt; Parser [Uri]
Value -&gt; Parser Uri
forall a.
(Value -&gt; Parser a) -&gt; (Value -&gt; Parser [a]) -&gt; FromJSON a
parseJSONList :: Value -&gt; Parser [Uri]
$cparseJSONList :: Value -&gt; Parser [Uri]
parseJSON :: Value -&gt; Parser Uri
$cparseJSON :: Value -&gt; Parser Uri
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">A.FromJSON</span></span></span></span><span class="hs-special">,</span><span id="local-6989586621682126712"><span id="local-6989586621682126716"><span id="local-6989586621682126720"><span id="local-6989586621682126725"><span class="annot"><span class="annottext">[Uri] -&gt; Encoding
[Uri] -&gt; Value
Uri -&gt; Encoding
Uri -&gt; Value
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; ToJSON a
toEncodingList :: [Uri] -&gt; Encoding
$ctoEncodingList :: [Uri] -&gt; Encoding
toJSONList :: [Uri] -&gt; Value
$ctoJSONList :: [Uri] -&gt; Value
toEncoding :: Uri -&gt; Encoding
$ctoEncoding :: Uri -&gt; Encoding
toJSON :: Uri -&gt; Value
$ctoJSON :: Uri -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">A.ToJSON</span></span></span></span></span></span><span class="hs-special">,</span><span id="local-6989586621682126700"><span id="local-6989586621682126704"><span class="annot"><span class="annottext">Eq Uri
Int -&gt; Uri -&gt; Int
Uri -&gt; Int
forall a. Eq a -&gt; (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
hash :: Uri -&gt; Int
$chash :: Uri -&gt; Int
hashWithSalt :: Int -&gt; Uri -&gt; Int
$chashWithSalt :: Int -&gt; Uri -&gt; Int
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></span></span></span><span class="hs-special">,</span><span id="local-6989586621682126689"><span id="local-6989586621682126694"><span class="annot"><span class="annottext">ToJSONKeyFunction [Uri]
ToJSONKeyFunction Uri
forall a.
ToJSONKeyFunction a -&gt; ToJSONKeyFunction [a] -&gt; ToJSONKey a
toJSONKeyList :: ToJSONKeyFunction [Uri]
$ctoJSONKeyList :: ToJSONKeyFunction [Uri]
toJSONKey :: ToJSONKeyFunction Uri
$ctoJSONKey :: ToJSONKeyFunction Uri
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">A.ToJSONKey</span></span></span></span><span class="hs-special">,</span><span id="local-6989586621682126678"><span id="local-6989586621682126683"><span class="annot"><span class="annottext">FromJSONKeyFunction [Uri]
FromJSONKeyFunction Uri
forall a.
FromJSONKeyFunction a -&gt; FromJSONKeyFunction [a] -&gt; FromJSONKey a
fromJSONKeyList :: FromJSONKeyFunction [Uri]
$cfromJSONKeyList :: FromJSONKeyFunction [Uri]
fromJSONKey :: FromJSONKeyFunction Uri
$cfromJSONKey :: FromJSONKeyFunction Uri
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">A.FromJSONKey</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682126667"><span id="local-6989586621682126672"><span class="annot"><span class="annottext">forall ann. [Uri] -&gt; Doc ann
forall ann. Uri -&gt; Doc ann
forall a.
(forall ann. a -&gt; Doc ann)
-&gt; (forall ann. [a] -&gt; Doc ann) -&gt; Pretty a
prettyList :: forall ann. [Uri] -&gt; Doc ann
$cprettyList :: forall ann. [Uri] -&gt; Doc ann
pretty :: forall ann. Uri -&gt; Doc ann
$cpretty :: forall ann. Uri -&gt; Doc ann
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Pretty</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682126661"><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#Uri"><span class="hs-identifier hs-type">Uri</span></a></span></span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span class="hs-comment">{- | A normalized 'Uri'.

If you want to use a URI as a map key, use this type. It is important to normalize
the percent encoding in the URI since URIs that only differ
when it comes to the percent-encoding should be treated as equivalent.

'NormalizedUri' has a cached hash in order to make it especially fast in a hash map.
-}</span><span>
</span><span id="line-60"></span><span id="local-6989586621682126658"><span id="local-6989586621682126659"></span></span><span class="hs-keyword">data</span><span> </span><span id="NormalizedUri"><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-var">NormalizedUri</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NormalizedUri"><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-var">NormalizedUri</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-61"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682126641"><span id="local-6989586621682126650"><span id="local-6989586621682126653"><span id="local-6989586621682126655"><span class="annot"><span class="annottext">ReadPrec [NormalizedUri]
ReadPrec NormalizedUri
Int -&gt; ReadS NormalizedUri
ReadS [NormalizedUri]
forall a.
(Int -&gt; ReadS a)
-&gt; ReadS [a] -&gt; ReadPrec a -&gt; ReadPrec [a] -&gt; Read a
readListPrec :: ReadPrec [NormalizedUri]
$creadListPrec :: ReadPrec [NormalizedUri]
readPrec :: ReadPrec NormalizedUri
$creadPrec :: ReadPrec NormalizedUri
readList :: ReadS [NormalizedUri]
$creadList :: ReadS [NormalizedUri]
readsPrec :: Int -&gt; ReadS NormalizedUri
$creadsPrec :: Int -&gt; ReadS NormalizedUri
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Read</span></span></span></span></span></span><span class="hs-special">,</span><span id="local-6989586621682126630"><span id="local-6989586621682126632"><span id="local-6989586621682126638"><span class="annot"><span class="annottext">Int -&gt; NormalizedUri -&gt; ShowS
[NormalizedUri] -&gt; ShowS
NormalizedUri -&gt; SystemOS
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; SystemOS) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [NormalizedUri] -&gt; ShowS
$cshowList :: [NormalizedUri] -&gt; ShowS
show :: NormalizedUri -&gt; SystemOS
$cshow :: NormalizedUri -&gt; SystemOS
showsPrec :: Int -&gt; NormalizedUri -&gt; ShowS
$cshowsPrec :: Int -&gt; NormalizedUri -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">forall x. Rep NormalizedUri x -&gt; NormalizedUri
forall x. NormalizedUri -&gt; Rep NormalizedUri x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep NormalizedUri x -&gt; NormalizedUri
$cfrom :: forall x. NormalizedUri -&gt; Rep NormalizedUri x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682126621"><span id="local-6989586621682126626"><span class="annot"><span class="annottext">NormalizedUri -&gt; NormalizedUri -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: NormalizedUri -&gt; NormalizedUri -&gt; Bool
$c/= :: NormalizedUri -&gt; NormalizedUri -&gt; Bool
== :: NormalizedUri -&gt; NormalizedUri -&gt; Bool
$c== :: NormalizedUri -&gt; NormalizedUri -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span class="hs-comment">-- Slow but compares paths alphabetically as you would expect.</span><span>
</span><span id="line-64"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682126606"><span id="local-6989586621682126608"><span id="local-6989586621682126610"><span id="local-6989586621682126612"><span id="local-6989586621682126614"><span id="local-6989586621682126616"><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-65"></span><span>  </span><span id="local-6989586621682126604"><span class="annot"><span class="annottext">compare :: NormalizedUri -&gt; NormalizedUri -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">compare</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682126602"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682126602"><span class="hs-identifier hs-var">u1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682126601"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682126601"><span class="hs-identifier hs-var">u2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682126602"><span class="hs-identifier hs-var">u1</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682126601"><span class="hs-identifier hs-var">u2</span></a></span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-68"></span><span>  </span><span id="local-6989586621682126595"><span class="annot"><span class="annottext">hash :: NormalizedUri -&gt; Int
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">hash</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span><span> </span><span id="local-6989586621682126593"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682126593"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682126593"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-69"></span><span>  </span><span id="local-6989586621682126590"><span class="annot"><span class="annottext">hashWithSalt :: Int -&gt; NormalizedUri -&gt; Int
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">hashWithSalt</span></span></span><span> </span><span id="local-6989586621682126588"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682126588"><span class="hs-identifier hs-var">salt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span><span> </span><span id="local-6989586621682126587"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682126587"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Hashable a =&gt; Int -&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">hashWithSalt</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682126588"><span class="hs-identifier hs-var">salt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682126587"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-70"></span><span>
</span><span id="line-71"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682126584"><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-72"></span><span>  </span><span id="local-6989586621682126582"><span class="annot"><span class="annottext">pretty :: forall ann. NormalizedUri -&gt; Doc ann
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682126580"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682126580"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><span class="hs-identifier hs-var">pretty</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682126580"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-73"></span><span>
</span><span id="line-74"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682126578"><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span></span><span>
</span><span id="line-75"></span><span>
</span><span id="line-76"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#isUnescapedInUriPath"><span class="hs-identifier hs-type">isUnescapedInUriPath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#SystemOS"><span class="hs-identifier hs-type">SystemOS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-77"></span><span id="isUnescapedInUriPath"><span class="annot"><span class="annottext">isUnescapedInUriPath :: SystemOS -&gt; Char -&gt; Bool
</span><a href="Language.LSP.Protocol.Types.Uri.html#isUnescapedInUriPath"><span class="hs-identifier hs-var hs-var">isUnescapedInUriPath</span></a></span></span><span> </span><span id="local-6989586621682126576"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126576"><span class="hs-identifier hs-var">systemOS</span></a></span></span><span> </span><span id="local-6989586621682126575"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682126575"><span class="hs-identifier hs-var">c</span></a></span></span><span>
</span><span id="line-78"></span><span>   </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126576"><span class="hs-identifier hs-var">systemOS</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#windowsOS"><span class="hs-identifier hs-var">windowsOS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isUnreserved</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682126575"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682126575"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`elem`</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">':'</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\\'</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'/'</span></span><span class="hs-special">]</span><span>
</span><span id="line-79"></span><span>   </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isUnreserved</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682126575"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682126575"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'/'</span></span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#normalizeUriEscaping"><span class="hs-identifier hs-type">normalizeUriEscaping</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-82"></span><span id="normalizeUriEscaping"><span class="annot"><span class="annottext">normalizeUriEscaping :: ShowS
</span><a href="Language.LSP.Protocol.Types.Uri.html#normalizeUriEscaping"><span class="hs-identifier hs-var hs-var">normalizeUriEscaping</span></a></span></span><span> </span><span id="local-6989586621682126569"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126569"><span class="hs-identifier hs-var">uri</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-83"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; [a] -&gt; [a] -&gt; Maybe [a]
</span><span class="hs-identifier hs-var">stripPrefix</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#fileScheme"><span class="hs-identifier hs-var">fileScheme</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-string">&quot;//&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126569"><span class="hs-identifier hs-var">uri</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-84"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682126567"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126567"><span class="hs-identifier hs-var">p</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#fileScheme"><span class="hs-identifier hs-var">fileScheme</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-string">&quot;//&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">ShowS
</span><a href="#local-6989586621682126566"><span class="hs-identifier hs-var">escapeURIPath</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShowS
</span><span class="hs-identifier hs-var">unEscapeString</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126567"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span>    </span><span class="annot"><span class="annottext">Maybe SystemOS
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; ShowS
</span><span class="hs-identifier hs-var">escapeURIString</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isUnescapedInURI</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ShowS
</span><span class="hs-identifier hs-var">unEscapeString</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126569"><span class="hs-identifier hs-var">uri</span></a></span><span>
</span><span id="line-86"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682126566"><span class="annot"><span class="annottext">escapeURIPath :: ShowS
</span><a href="#local-6989586621682126566"><span class="hs-identifier hs-var hs-var">escapeURIPath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; ShowS
</span><span class="hs-identifier hs-var">escapeURIString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SystemOS -&gt; Char -&gt; Bool
</span><a href="Language.LSP.Protocol.Types.Uri.html#isUnescapedInUriPath"><span class="hs-identifier hs-var">isUnescapedInUriPath</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-identifier hs-var">System.Info.os</span></span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#toNormalizedUri"><span class="hs-identifier hs-type">toNormalizedUri</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#Uri"><span class="hs-identifier hs-type">Uri</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span><span>
</span><span id="line-89"></span><span id="toNormalizedUri"><span class="annot"><span class="annottext">toNormalizedUri :: Uri -&gt; NormalizedUri
</span><a href="Language.LSP.Protocol.Types.Uri.html#toNormalizedUri"><span class="hs-identifier hs-var hs-var">toNormalizedUri</span></a></span></span><span> </span><span id="local-6989586621682126561"><span class="annot"><span class="annottext">Uri
</span><a href="#local-6989586621682126561"><span class="hs-identifier hs-var">uri</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; NormalizedUri
</span><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-var">NormalizedUri</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Hashable a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">hash</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682126560"><span class="hs-identifier hs-var">norm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682126560"><span class="hs-identifier hs-var">norm</span></a></span><span>
</span><span id="line-90"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#Uri"><span class="hs-identifier hs-type">Uri</span></a></span><span> </span><span id="local-6989586621682126559"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682126559"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">Uri
</span><a href="#local-6989586621682126561"><span class="hs-identifier hs-var">uri</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; Uri
</span><a href="Language.LSP.Protocol.Types.Uri.html#filePathToUri"><span class="hs-identifier hs-var">filePathToUri</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Uri -&gt; Maybe SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#uriToFilePath"><span class="hs-identifier hs-var">uriToFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">Uri
</span><a href="#local-6989586621682126561"><span class="hs-identifier hs-var">uri</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span>        </span><span class="hs-comment">-- To ensure all `Uri`s have the file path normalized</span><span>
</span><span id="line-92"></span><span>        </span><span id="local-6989586621682126560"><span class="annot"><span class="annottext">norm :: Text
</span><a href="#local-6989586621682126560"><span class="hs-identifier hs-var hs-var">norm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShowS
</span><a href="Language.LSP.Protocol.Types.Uri.html#normalizeUriEscaping"><span class="hs-identifier hs-var">normalizeUriEscaping</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; SystemOS
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682126559"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#fromNormalizedUri"><span class="hs-identifier hs-type">fromNormalizedUri</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#Uri"><span class="hs-identifier hs-type">Uri</span></a></span><span>
</span><span id="line-95"></span><span id="fromNormalizedUri"><span class="annot"><span class="annottext">fromNormalizedUri :: NormalizedUri -&gt; Uri
</span><a href="Language.LSP.Protocol.Types.Uri.html#fromNormalizedUri"><span class="hs-identifier hs-var hs-var">fromNormalizedUri</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682126555"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682126555"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Uri
</span><a href="Language.LSP.Protocol.Types.Uri.html#Uri"><span class="hs-identifier hs-var">Uri</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682126555"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-96"></span><span>
</span><span id="line-97"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#fileScheme"><span class="hs-identifier hs-type">fileScheme</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-98"></span><span id="fileScheme"><span class="annot"><span class="annottext">fileScheme :: SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#fileScheme"><span class="hs-identifier hs-var hs-var">fileScheme</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-string">&quot;file:&quot;</span></span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#windowsOS"><span class="hs-identifier hs-type">windowsOS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-101"></span><span id="windowsOS"><span class="annot"><span class="annottext">windowsOS :: SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#windowsOS"><span class="hs-identifier hs-var hs-var">windowsOS</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-string">&quot;mingw32&quot;</span></span><span>
</span><span id="line-102"></span><span>
</span><span id="line-103"></span><span class="hs-keyword">type</span><span> </span><span id="SystemOS"><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#SystemOS"><span class="hs-identifier hs-var">SystemOS</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#uriToFilePath"><span class="hs-identifier hs-type">uriToFilePath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#Uri"><span class="hs-identifier hs-type">Uri</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span>
</span><span id="line-106"></span><span id="uriToFilePath"><span class="annot"><span class="annottext">uriToFilePath :: Uri -&gt; Maybe SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#uriToFilePath"><span class="hs-identifier hs-var hs-var">uriToFilePath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; Uri -&gt; Maybe SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#platformAwareUriToFilePath"><span class="hs-identifier hs-var">platformAwareUriToFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-identifier hs-var">System.Info.os</span></span><span>
</span><span id="line-107"></span><span>
</span><span id="line-108"></span><span class="hs-pragma">{-# WARNING</span><span> </span><span class="hs-pragma">platformAwareUriToFilePath</span><span> </span><span class="hs-pragma">&quot;This function is considered private. Use normalizedFilePathToUri instead.&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-109"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#platformAwareUriToFilePath"><span class="hs-identifier hs-type">platformAwareUriToFilePath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#Uri"><span class="hs-identifier hs-type">Uri</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span>
</span><span id="line-110"></span><span id="platformAwareUriToFilePath"><span class="annot"><span class="annottext">platformAwareUriToFilePath :: SystemOS -&gt; Uri -&gt; Maybe SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#platformAwareUriToFilePath"><span class="hs-identifier hs-var hs-var">platformAwareUriToFilePath</span></a></span></span><span> </span><span id="local-6989586621682126553"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126553"><span class="hs-identifier hs-var">systemOS</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#Uri"><span class="hs-identifier hs-type">Uri</span></a></span><span> </span><span id="local-6989586621682126552"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682126552"><span class="hs-identifier hs-var">uri</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-111"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">URI</span></span><span class="hs-special">{</span><span id="local-6989586621682126546"><span id="local-6989586621682126547"><span id="local-6989586621682126548"><span id="local-6989586621682126549"><span id="local-6989586621682126550"><span class="annot"><span class="annottext">SystemOS
Maybe URIAuth
uriScheme :: URI -&gt; SystemOS
uriAuthority :: URI -&gt; Maybe URIAuth
uriPath :: URI -&gt; SystemOS
uriQuery :: URI -&gt; SystemOS
uriFragment :: URI -&gt; SystemOS
uriFragment :: SystemOS
uriQuery :: SystemOS
uriPath :: SystemOS
uriAuthority :: Maybe URIAuth
uriScheme :: SystemOS
</span><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; Maybe URI
</span><span class="hs-identifier hs-var">parseURI</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; SystemOS
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682126552"><span class="hs-identifier hs-var">uri</span></a></span><span>
</span><span id="line-112"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126550"><span class="hs-identifier hs-var">uriScheme</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#fileScheme"><span class="hs-identifier hs-var">fileScheme</span></a></span><span>
</span><span id="line-113"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-114"></span><span>      </span><span class="annot"><span class="annottext">SystemOS -&gt; Maybe SystemOS -&gt; ShowS
</span><a href="Language.LSP.Protocol.Types.Uri.html#platformAdjustFromUriPath"><span class="hs-identifier hs-var">platformAdjustFromUriPath</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126553"><span class="hs-identifier hs-var">systemOS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">URIAuth -&gt; SystemOS
</span><span class="hs-identifier hs-var">uriRegName</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe URIAuth
</span><a href="#local-6989586621682126549"><span class="hs-identifier hs-var">uriAuthority</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ShowS
</span><span class="hs-identifier hs-var">unEscapeString</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126548"><span class="hs-identifier hs-var">uriPath</span></a></span><span>
</span><span id="line-115"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span class="hs-comment">-- | We pull in the authority because in relative file paths the Uri likes to put everything before the slash</span><span>
</span><span id="line-118"></span><span class="hs-comment">--   into the authority field</span><span>
</span><span id="line-119"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#platformAdjustFromUriPath"><span class="hs-identifier hs-type">platformAdjustFromUriPath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#SystemOS"><span class="hs-identifier hs-type">SystemOS</span></a></span><span>
</span><span id="line-120"></span><span>                          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-comment">-- ^ authority</span><span>
</span><span id="line-121"></span><span>                          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-comment">-- ^ path</span><span>
</span><span id="line-122"></span><span>                          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span>
</span><span id="line-123"></span><span id="platformAdjustFromUriPath"><span class="annot"><span class="annottext">platformAdjustFromUriPath :: SystemOS -&gt; Maybe SystemOS -&gt; ShowS
</span><a href="Language.LSP.Protocol.Types.Uri.html#platformAdjustFromUriPath"><span class="hs-identifier hs-var hs-var">platformAdjustFromUriPath</span></a></span></span><span> </span><span id="local-6989586621682126536"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126536"><span class="hs-identifier hs-var">systemOS</span></a></span></span><span> </span><span id="local-6989586621682126535"><span class="annot"><span class="annottext">Maybe SystemOS
</span><a href="#local-6989586621682126535"><span class="hs-identifier hs-var">authority</span></a></span></span><span> </span><span id="local-6989586621682126534"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126534"><span class="hs-identifier hs-var">srcPath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-124"></span><span>  </span><span class="annot"><span class="annottext">forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">(++)</span></span><span> </span><span class="annot"><span class="annottext">Maybe SystemOS
</span><a href="#local-6989586621682126535"><span class="hs-identifier hs-var">authority</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-125"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126536"><span class="hs-identifier hs-var">systemOS</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#windowsOS"><span class="hs-identifier hs-var">windowsOS</span></a></span><span>
</span><span id="line-126"></span><span>  </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126534"><span class="hs-identifier hs-var">srcPath</span></a></span><span>
</span><span id="line-127"></span><span>  </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; [SystemOS]
</span><span class="hs-identifier hs-var">FPP.splitDirectories</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; Maybe [a]
</span><span class="hs-identifier hs-var">tailMay</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126534"><span class="hs-identifier hs-var">srcPath</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-128"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682126530"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126530"><span class="hs-identifier hs-var">firstSegment</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682126529"><span class="annot"><span class="annottext">[SystemOS]
</span><a href="#local-6989586621682126529"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-comment">-- Drop leading '/' for absolute Windows paths</span><span>
</span><span id="line-129"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682126528"><span class="annot"><span class="annottext">drive :: SystemOS
</span><a href="#local-6989586621682126528"><span class="hs-identifier hs-var hs-var">drive</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; Bool
</span><span class="hs-identifier hs-var">FPW.isDrive</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126530"><span class="hs-identifier hs-var">firstSegment</span></a></span><span>
</span><span id="line-130"></span><span>                    </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">ShowS
</span><span class="hs-identifier hs-var">FPW.addTrailingPathSeparator</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126530"><span class="hs-identifier hs-var">firstSegment</span></a></span><span>
</span><span id="line-131"></span><span>                    </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126530"><span class="hs-identifier hs-var">firstSegment</span></a></span><span>
</span><span id="line-132"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; ShowS
</span><span class="hs-identifier hs-var">FPW.joinDrive</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126528"><span class="hs-identifier hs-var">drive</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[SystemOS] -&gt; SystemOS
</span><span class="hs-identifier hs-var">FPW.joinPath</span></span><span> </span><span class="annot"><span class="annottext">[SystemOS]
</span><a href="#local-6989586621682126529"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-133"></span><span>      </span><span class="annot"><span class="annottext">Maybe [SystemOS]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126534"><span class="hs-identifier hs-var">srcPath</span></a></span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#filePathToUri"><span class="hs-identifier hs-type">filePathToUri</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#Uri"><span class="hs-identifier hs-type">Uri</span></a></span><span>
</span><span id="line-136"></span><span id="filePathToUri"><span class="annot"><span class="annottext">filePathToUri :: SystemOS -&gt; Uri
</span><a href="Language.LSP.Protocol.Types.Uri.html#filePathToUri"><span class="hs-identifier hs-var hs-var">filePathToUri</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; SystemOS -&gt; Uri
</span><a href="Language.LSP.Protocol.Types.Uri.html#platformAwareFilePathToUri"><span class="hs-identifier hs-var">platformAwareFilePathToUri</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-identifier hs-var">System.Info.os</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ShowS
</span><span class="hs-identifier hs-var">FP.normalise</span></span><span>
</span><span id="line-137"></span><span>
</span><span id="line-138"></span><span class="hs-pragma">{-# WARNING</span><span> </span><span class="hs-pragma">platformAwareFilePathToUri</span><span> </span><span class="hs-pragma">&quot;This function is considered private. Use normalizedUriToFilePath instead.&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-139"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#platformAwareFilePathToUri"><span class="hs-identifier hs-type">platformAwareFilePathToUri</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#SystemOS"><span class="hs-identifier hs-type">SystemOS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#Uri"><span class="hs-identifier hs-type">Uri</span></a></span><span>
</span><span id="line-140"></span><span id="platformAwareFilePathToUri"><span class="annot"><span class="annottext">platformAwareFilePathToUri :: SystemOS -&gt; SystemOS -&gt; Uri
</span><a href="Language.LSP.Protocol.Types.Uri.html#platformAwareFilePathToUri"><span class="hs-identifier hs-var hs-var">platformAwareFilePathToUri</span></a></span></span><span> </span><span id="local-6989586621682126521"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126521"><span class="hs-identifier hs-var">systemOS</span></a></span></span><span> </span><span id="local-6989586621682126520"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126520"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Uri
</span><a href="Language.LSP.Protocol.Types.Uri.html#Uri"><span class="hs-identifier hs-var">Uri</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; SystemOS
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">URI</span></span><span>
</span><span id="line-141"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">uriScheme :: SystemOS
</span><span class="hs-identifier hs-var">uriScheme</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#fileScheme"><span class="hs-identifier hs-var">fileScheme</span></a></span><span>
</span><span id="line-142"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">uriAuthority :: Maybe URIAuth
</span><span class="hs-identifier hs-var">uriAuthority</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; SystemOS -&gt; SystemOS -&gt; URIAuth
</span><span class="hs-identifier hs-var">URIAuth</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-143"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">uriPath :: SystemOS
</span><span class="hs-identifier hs-var">uriPath</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; ShowS
</span><a href="Language.LSP.Protocol.Types.Uri.html#platformAdjustToUriPath"><span class="hs-identifier hs-var">platformAdjustToUriPath</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126521"><span class="hs-identifier hs-var">systemOS</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126520"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-144"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">uriQuery :: SystemOS
</span><span class="hs-identifier hs-var">uriQuery</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-145"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">uriFragment :: SystemOS
</span><span class="hs-identifier hs-var">uriFragment</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-146"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-147"></span><span>
</span><span id="line-148"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#platformAdjustToUriPath"><span class="hs-identifier hs-type">platformAdjustToUriPath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#SystemOS"><span class="hs-identifier hs-type">SystemOS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-149"></span><span id="platformAdjustToUriPath"><span class="annot"><span class="annottext">platformAdjustToUriPath :: SystemOS -&gt; ShowS
</span><a href="Language.LSP.Protocol.Types.Uri.html#platformAdjustToUriPath"><span class="hs-identifier hs-var hs-var">platformAdjustToUriPath</span></a></span></span><span> </span><span id="local-6989586621682126516"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126516"><span class="hs-identifier hs-var">systemOS</span></a></span></span><span> </span><span id="local-6989586621682126515"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126515"><span class="hs-identifier hs-var">srcPath</span></a></span></span><span>
</span><span id="line-150"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126516"><span class="hs-identifier hs-var">systemOS</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#windowsOS"><span class="hs-identifier hs-var">windowsOS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'/'</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126514"><span class="hs-identifier hs-var">escapedPath</span></a></span><span>
</span><span id="line-151"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126514"><span class="hs-identifier hs-var">escapedPath</span></a></span><span>
</span><span id="line-152"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-153"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682126513"><span class="annot"><span class="annottext">SystemOS -&gt; [SystemOS]
</span><a href="#local-6989586621682126513"><span class="hs-identifier hs-var">splitDirectories</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682126512"><span class="annot"><span class="annottext">SystemOS -&gt; (SystemOS, SystemOS)
</span><a href="#local-6989586621682126512"><span class="hs-identifier hs-var">splitDrive</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-154"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126516"><span class="hs-identifier hs-var">systemOS</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#windowsOS"><span class="hs-identifier hs-var">windowsOS</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-155"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SystemOS -&gt; [SystemOS]
</span><span class="hs-identifier hs-var">FPW.splitDirectories</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; (SystemOS, SystemOS)
</span><span class="hs-identifier hs-var">FPW.splitDrive</span></span><span class="hs-special">)</span><span>
</span><span id="line-156"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-157"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SystemOS -&gt; [SystemOS]
</span><span class="hs-identifier hs-var">FPP.splitDirectories</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; (SystemOS, SystemOS)
</span><span class="hs-identifier hs-var">FPP.splitDrive</span></span><span class="hs-special">)</span><span>
</span><span id="line-158"></span><span>    </span><span id="local-6989586621682126514"><span class="annot"><span class="annottext">escapedPath :: SystemOS
</span><a href="#local-6989586621682126514"><span class="hs-identifier hs-var hs-var">escapedPath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-159"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; (SystemOS, SystemOS)
</span><a href="#local-6989586621682126512"><span class="hs-identifier hs-var">splitDrive</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126515"><span class="hs-identifier hs-var">srcPath</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-160"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621682126508"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126508"><span class="hs-identifier hs-var">drv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682126507"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126507"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-161"></span><span>                </span><span class="annot"><span class="annottext">ShowS
</span><a href="#local-6989586621682126506"><span class="hs-identifier hs-var">convertDrive</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126508"><span class="hs-identifier hs-var">drv</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; ShowS
</span><span class="hs-operator hs-var">`FPP.joinDrive`</span></span><span>
</span><span id="line-162"></span><span>                </span><span class="annot"><span class="annottext">[SystemOS] -&gt; SystemOS
</span><span class="hs-identifier hs-var">FPP.joinPath</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; ShowS
</span><span class="hs-identifier hs-var">escapeURIString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SystemOS -&gt; Char -&gt; Bool
</span><a href="Language.LSP.Protocol.Types.Uri.html#isUnescapedInUriPath"><span class="hs-identifier hs-var">isUnescapedInUriPath</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126516"><span class="hs-identifier hs-var">systemOS</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; [SystemOS]
</span><a href="#local-6989586621682126513"><span class="hs-identifier hs-var">splitDirectories</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126507"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-163"></span><span>    </span><span class="hs-comment">-- splitDirectories does not remove the path separator after the drive so</span><span>
</span><span id="line-164"></span><span>    </span><span class="hs-comment">-- we do a final replacement of \ to /</span><span>
</span><span id="line-165"></span><span>    </span><span id="local-6989586621682126506"><span class="annot"><span class="annottext">convertDrive :: ShowS
</span><a href="#local-6989586621682126506"><span class="hs-identifier hs-var hs-var">convertDrive</span></a></span></span><span> </span><span id="local-6989586621682126503"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126503"><span class="hs-identifier hs-var">drv</span></a></span></span><span>
</span><span id="line-166"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126516"><span class="hs-identifier hs-var">systemOS</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#windowsOS"><span class="hs-identifier hs-var">windowsOS</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; Bool
</span><span class="hs-identifier hs-var">FPW.hasTrailingPathSeparator</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126503"><span class="hs-identifier hs-var">drv</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-167"></span><span>          </span><span class="annot"><span class="annottext">ShowS
</span><span class="hs-identifier hs-var">FPP.addTrailingPathSeparator</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">init</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126503"><span class="hs-identifier hs-var">drv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-168"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126503"><span class="hs-identifier hs-var">drv</span></a></span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span>
</span><span id="line-171"></span><span class="hs-comment">{- Note [Adoption Plan of OsPath]
Currently we store 'Text' in 'NormalizedFilePath'. We may change it to OsPath in the future if
the following steps are executed.

1. In the client codebase, use 'osPathToNormalizedFilePath' and 'normalizedFilePathToOsPath' instead of 'fromNormalizedFilePath'
  and 'toNormalizedFilePath'. For HLS, we could wait until GHC 9.6 becomes the oldest
  GHC we support, then change 'FilePath' to OsPath everywhere in the codebase.
2. Deprecate and remove 'fromNormalizedFilePath' and 'toNormalizedFilePath'.
3. Change 'Text' to OsPath and benchmark it to make sure performance doesn't go down. Don't forget to check Windows,
  as OsPath on Windows uses UTF-16, which may consume more memory.

See [#453](https://github.com/haskell/lsp/pull/453) and [#446](https://github.com/haskell/lsp/pull/446)
for more discussions on this topic.
-}</span><span>
</span><span id="line-185"></span><span class="hs-comment">{-| A file path that is already normalized.

The 'NormalizedUri' is cached to avoided
repeated normalisation when we need to compute them (which is a lot).

This is one of the most performance critical parts of HLS, do not
modify it without profiling.

-}</span><span>
</span><span id="line-194"></span><span id="local-6989586621682126497"><span id="local-6989586621682126498"></span></span><span class="hs-keyword">data</span><span> </span><span id="NormalizedFilePath"><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-var">NormalizedFilePath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NormalizedFilePath"><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-var">NormalizedFilePath</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span><span> </span><span class="hs-pragma">{-# UNPACK</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-195"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall x. Rep NormalizedFilePath x -&gt; NormalizedFilePath
forall x. NormalizedFilePath -&gt; Rep NormalizedFilePath x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep NormalizedFilePath x -&gt; NormalizedFilePath
$cfrom :: forall x. NormalizedFilePath -&gt; Rep NormalizedFilePath x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682126488"><span id="local-6989586621682126492"><span class="annot"><span class="annottext">NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool
$c/= :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool
== :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool
$c== :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682126465"><span id="local-6989586621682126467"><span id="local-6989586621682126470"><span id="local-6989586621682126473"><span id="local-6989586621682126476"><span id="local-6989586621682126480"><span id="local-6989586621682126484"><span class="annot"><span class="annottext">Eq NormalizedFilePath
NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool
NormalizedFilePath -&gt; NormalizedFilePath -&gt; Ordering
NormalizedFilePath -&gt; NormalizedFilePath -&gt; NormalizedFilePath
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; NormalizedFilePath
$cmin :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; NormalizedFilePath
max :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; NormalizedFilePath
$cmax :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; NormalizedFilePath
&gt;= :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool
$c&gt;= :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool
&gt; :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool
$c&gt; :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool
&lt;= :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool
$c&lt;= :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool
&lt; :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool
$c&lt; :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; Bool
compare :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; Ordering
$ccompare :: NormalizedFilePath -&gt; NormalizedFilePath -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-196"></span><span>
</span><span id="line-197"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682126463"><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span></span><span>
</span><span id="line-198"></span><span>
</span><span id="line-199"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682126459"><span class="annot"><span class="hs-identifier hs-type">Binary</span></span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-200"></span><span>  </span><span id="local-6989586621682126455"><span class="annot"><span class="annottext">put :: NormalizedFilePath -&gt; Put
</span><a href="#local-6989586621682126455"><span class="hs-identifier hs-var hs-var hs-var hs-var">put</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">NormalizedUri
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682126454"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682126454"><span class="hs-identifier hs-var">fp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t. Binary t =&gt; t -&gt; Put
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682126454"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-201"></span><span>  </span><span id="local-6989586621682126449"><span class="annot"><span class="annottext">get :: Get NormalizedFilePath
</span><a href="#local-6989586621682126449"><span class="hs-identifier hs-var hs-var hs-var hs-var">get</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-202"></span><span>    </span><span id="local-6989586621682126448"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682126448"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall t. Binary t =&gt; Get t
</span><span class="hs-identifier hs-var">Data.Binary.get</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Get</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-203"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NormalizedUri -&gt; Text -&gt; NormalizedFilePath
</span><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-var">NormalizedFilePath</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SystemOS -&gt; NormalizedUri
</span><a href="Language.LSP.Protocol.Types.Uri.html#internalNormalizedFilePathToUri"><span class="hs-identifier hs-var">internalNormalizedFilePathToUri</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; SystemOS
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682126448"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682126448"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-204"></span><span>
</span><span id="line-205"></span><span class="hs-comment">-- | Internal helper that takes a file path that is assumed to</span><span>
</span><span id="line-206"></span><span class="hs-comment">-- already be normalized to a URI. It is up to the caller</span><span>
</span><span id="line-207"></span><span class="hs-comment">-- to ensure normalization.</span><span>
</span><span id="line-208"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#internalNormalizedFilePathToUri"><span class="hs-identifier hs-type">internalNormalizedFilePathToUri</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span><span>
</span><span id="line-209"></span><span id="internalNormalizedFilePathToUri"><span class="annot"><span class="annottext">internalNormalizedFilePathToUri :: SystemOS -&gt; NormalizedUri
</span><a href="Language.LSP.Protocol.Types.Uri.html#internalNormalizedFilePathToUri"><span class="hs-identifier hs-var hs-var">internalNormalizedFilePathToUri</span></a></span></span><span> </span><span id="local-6989586621682126446"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126446"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NormalizedUri
</span><a href="#local-6989586621682126445"><span class="hs-identifier hs-var">nuri</span></a></span><span>
</span><span id="line-210"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-211"></span><span>    </span><span id="local-6989586621682126444"><span class="annot"><span class="annottext">uriPath :: SystemOS
</span><a href="#local-6989586621682126444"><span class="hs-identifier hs-var hs-var">uriPath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; ShowS
</span><a href="Language.LSP.Protocol.Types.Uri.html#platformAdjustToUriPath"><span class="hs-identifier hs-var">platformAdjustToUriPath</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-identifier hs-var">System.Info.os</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126446"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-212"></span><span>    </span><span id="local-6989586621682126443"><span class="annot"><span class="annottext">nuriStr :: Text
</span><a href="#local-6989586621682126443"><span class="hs-identifier hs-var hs-var">nuriStr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#fileScheme"><span class="hs-identifier hs-var">fileScheme</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-string">&quot;//&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126444"><span class="hs-identifier hs-var">uriPath</span></a></span><span>
</span><span id="line-213"></span><span>    </span><span id="local-6989586621682126445"><span class="annot"><span class="annottext">nuri :: NormalizedUri
</span><a href="#local-6989586621682126445"><span class="hs-identifier hs-var hs-var">nuri</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; NormalizedUri
</span><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-var">NormalizedUri</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Hashable a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">hash</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682126443"><span class="hs-identifier hs-var">nuriStr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682126443"><span class="hs-identifier hs-var">nuriStr</span></a></span><span>
</span><span id="line-214"></span><span>
</span><span id="line-215"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682126438"><span id="local-6989586621682126441"><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-216"></span><span>  </span><span id="local-6989586621682126435"><span class="annot"><span class="annottext">show :: NormalizedFilePath -&gt; SystemOS
</span><a href="#local-6989586621682126435"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">NormalizedUri
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682126434"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682126434"><span class="hs-identifier hs-var">fp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-string">&quot;NormalizedFilePath &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; SystemOS
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682126434"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-217"></span><span>
</span><span id="line-218"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-219"></span><span>  </span><span id="local-6989586621682126427"><span class="annot"><span class="annottext">hash :: NormalizedFilePath -&gt; Int
</span><a href="#local-6989586621682126427"><span class="hs-identifier hs-var hs-var hs-var hs-var">hash</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span><span> </span><span id="local-6989586621682126426"><span class="annot"><span class="annottext">NormalizedUri
</span><a href="#local-6989586621682126426"><span class="hs-identifier hs-var">uri</span></a></span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Hashable a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">hash</span></span><span> </span><span class="annot"><span class="annottext">NormalizedUri
</span><a href="#local-6989586621682126426"><span class="hs-identifier hs-var">uri</span></a></span><span>
</span><span id="line-220"></span><span>  </span><span id="local-6989586621682126424"><span class="annot"><span class="annottext">hashWithSalt :: Int -&gt; NormalizedFilePath -&gt; Int
</span><a href="#local-6989586621682126424"><span class="hs-identifier hs-var hs-var hs-var hs-var">hashWithSalt</span></a></span></span><span> </span><span id="local-6989586621682126423"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682126423"><span class="hs-identifier hs-var">salt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span><span> </span><span id="local-6989586621682126422"><span class="annot"><span class="annottext">NormalizedUri
</span><a href="#local-6989586621682126422"><span class="hs-identifier hs-var">uri</span></a></span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Hashable a =&gt; Int -&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">hashWithSalt</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682126423"><span class="hs-identifier hs-var">salt</span></a></span><span> </span><span class="annot"><span class="annottext">NormalizedUri
</span><a href="#local-6989586621682126422"><span class="hs-identifier hs-var">uri</span></a></span><span>
</span><span id="line-221"></span><span>
</span><span id="line-222"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsString</span></span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-223"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">fromString</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span><span>
</span><span id="line-224"></span><span>    </span><span id="local-6989586621682126418"><span class="annot"><span class="annottext">fromString :: SystemOS -&gt; NormalizedFilePath
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fromString</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; NormalizedFilePath
</span><a href="Language.LSP.Protocol.Types.Uri.html#toNormalizedFilePath"><span class="hs-identifier hs-var">toNormalizedFilePath</span></a></span><span>
</span><span id="line-225"></span><span>
</span><span id="line-226"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#toNormalizedFilePath"><span class="hs-identifier hs-type">toNormalizedFilePath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span><span>
</span><span id="line-227"></span><span id="toNormalizedFilePath"><span class="annot"><span class="annottext">toNormalizedFilePath :: SystemOS -&gt; NormalizedFilePath
</span><a href="Language.LSP.Protocol.Types.Uri.html#toNormalizedFilePath"><span class="hs-identifier hs-var hs-var">toNormalizedFilePath</span></a></span></span><span> </span><span id="local-6989586621682126417"><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126417"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NormalizedUri -&gt; Text -&gt; NormalizedFilePath
</span><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-var">NormalizedFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">NormalizedUri
</span><a href="#local-6989586621682126416"><span class="hs-identifier hs-var">nuri</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126415"><span class="hs-identifier hs-var">nfp</span></a></span><span>
</span><span id="line-228"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-229"></span><span>    </span><span id="local-6989586621682126415"><span class="annot"><span class="annottext">nfp :: SystemOS
</span><a href="#local-6989586621682126415"><span class="hs-identifier hs-var hs-var">nfp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShowS
</span><span class="hs-identifier hs-var">FP.normalise</span></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126417"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-230"></span><span>    </span><span id="local-6989586621682126416"><span class="annot"><span class="annottext">nuri :: NormalizedUri
</span><a href="#local-6989586621682126416"><span class="hs-identifier hs-var hs-var">nuri</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; NormalizedUri
</span><a href="Language.LSP.Protocol.Types.Uri.html#internalNormalizedFilePathToUri"><span class="hs-identifier hs-var">internalNormalizedFilePathToUri</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><a href="#local-6989586621682126415"><span class="hs-identifier hs-var">nfp</span></a></span><span>
</span><span id="line-231"></span><span>
</span><span id="line-232"></span><span class="hs-comment">-- | Extracts 'FilePath' from 'NormalizedFilePath'.</span><span>
</span><span id="line-233"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#fromNormalizedFilePath"><span class="hs-identifier hs-type">fromNormalizedFilePath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span>
</span><span id="line-234"></span><span id="fromNormalizedFilePath"><span class="annot"><span class="annottext">fromNormalizedFilePath :: NormalizedFilePath -&gt; SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#fromNormalizedFilePath"><span class="hs-identifier hs-var hs-var">fromNormalizedFilePath</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">NormalizedUri
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682126414"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682126414"><span class="hs-identifier hs-var">fp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; SystemOS
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682126414"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-235"></span><span>
</span><span id="line-236"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#normalizedFilePathToUri"><span class="hs-identifier hs-type">normalizedFilePathToUri</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span><span>
</span><span id="line-237"></span><span id="normalizedFilePathToUri"><span class="annot"><span class="annottext">normalizedFilePathToUri :: NormalizedFilePath -&gt; NormalizedUri
</span><a href="Language.LSP.Protocol.Types.Uri.html#normalizedFilePathToUri"><span class="hs-identifier hs-var hs-var">normalizedFilePathToUri</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span><span> </span><span id="local-6989586621682126413"><span class="annot"><span class="annottext">NormalizedUri
</span><a href="#local-6989586621682126413"><span class="hs-identifier hs-var">uri</span></a></span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NormalizedUri
</span><a href="#local-6989586621682126413"><span class="hs-identifier hs-var">uri</span></a></span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#uriToNormalizedFilePath"><span class="hs-identifier hs-type">uriToNormalizedFilePath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span><span>
</span><span id="line-240"></span><span id="uriToNormalizedFilePath"><span class="annot"><span class="annottext">uriToNormalizedFilePath :: NormalizedUri -&gt; Maybe NormalizedFilePath
</span><a href="Language.LSP.Protocol.Types.Uri.html#uriToNormalizedFilePath"><span class="hs-identifier hs-var hs-var">uriToNormalizedFilePath</span></a></span></span><span> </span><span id="local-6989586621682126412"><span class="annot"><span class="annottext">NormalizedUri
</span><a href="#local-6989586621682126412"><span class="hs-identifier hs-var">nuri</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NormalizedUri -&gt; Text -&gt; NormalizedFilePath
</span><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-var">NormalizedFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">NormalizedUri
</span><a href="#local-6989586621682126412"><span class="hs-identifier hs-var">nuri</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe SystemOS
</span><a href="#local-6989586621682126411"><span class="hs-identifier hs-var">mbFilePath</span></a></span><span>
</span><span id="line-241"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682126411"><span class="annot"><span class="annottext">mbFilePath :: Maybe SystemOS
</span><a href="#local-6989586621682126411"><span class="hs-identifier hs-var hs-var">mbFilePath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SystemOS -&gt; Uri -&gt; Maybe SystemOS
</span><a href="Language.LSP.Protocol.Types.Uri.html#platformAwareUriToFilePath"><span class="hs-identifier hs-var">platformAwareUriToFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">SystemOS
</span><span class="hs-identifier hs-var">System.Info.os</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NormalizedUri -&gt; Uri
</span><a href="Language.LSP.Protocol.Types.Uri.html#fromNormalizedUri"><span class="hs-identifier hs-var">fromNormalizedUri</span></a></span><span> </span><span class="annot"><span class="annottext">NormalizedUri
</span><a href="#local-6989586621682126412"><span class="hs-identifier hs-var">nuri</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#emptyNormalizedUri"><span class="hs-identifier hs-type">emptyNormalizedUri</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-type">NormalizedUri</span></a></span><span>
</span><span id="line-244"></span><span id="emptyNormalizedUri"><span class="annot"><span class="annottext">emptyNormalizedUri :: NormalizedUri
</span><a href="Language.LSP.Protocol.Types.Uri.html#emptyNormalizedUri"><span class="hs-identifier hs-var hs-var">emptyNormalizedUri</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-245"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682126408"><span class="annot"><span class="annottext">s :: Text
</span><a href="#local-6989586621682126408"><span class="hs-identifier hs-var hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;file://&quot;</span></span><span>
</span><span id="line-246"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; NormalizedUri
</span><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedUri"><span class="hs-identifier hs-var">NormalizedUri</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Hashable a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">hash</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682126408"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621682126408"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-247"></span><span>
</span><span id="line-248"></span><span class="hs-comment">-- | 'NormalizedFilePath' that contains an empty file path</span><span>
</span><span id="line-249"></span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#emptyNormalizedFilePath"><span class="hs-identifier hs-type">emptyNormalizedFilePath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-type">NormalizedFilePath</span></a></span><span>
</span><span id="line-250"></span><span id="emptyNormalizedFilePath"><span class="annot"><span class="annottext">emptyNormalizedFilePath :: NormalizedFilePath
</span><a href="Language.LSP.Protocol.Types.Uri.html#emptyNormalizedFilePath"><span class="hs-identifier hs-var hs-var">emptyNormalizedFilePath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NormalizedUri -&gt; Text -&gt; NormalizedFilePath
</span><a href="Language.LSP.Protocol.Types.Uri.html#NormalizedFilePath"><span class="hs-identifier hs-var">NormalizedFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">NormalizedUri
</span><a href="Language.LSP.Protocol.Types.Uri.html#emptyNormalizedUri"><span class="hs-identifier hs-var">emptyNormalizedUri</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span></pre></body></html>